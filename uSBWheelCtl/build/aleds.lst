ARM GAS  /tmp/ccL3WSVH.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"aleds.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.comm	aleds_ledGreenStatus,1,1
  16              		.comm	aleds_ledGreenBlinkTimeMs,2,2
  17              		.section	.text.aleds_init,"ax",%progbits
  18              		.align	1
  19              		.global	aleds_init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu softvfp
  25              	aleds_init:
  26              	.LFB66:
  27              		.file 1 "Application/aLeds/aleds.c"
   1:Application/aLeds/aleds.c **** /*
   2:Application/aLeds/aleds.c ****  * aleds.c
   3:Application/aLeds/aleds.c ****  *
   4:Application/aLeds/aleds.c ****  *  Created on: FEB 02, 2014
   5:Application/aLeds/aleds.c ****  *      Author: mircea.patras
   6:Application/aLeds/aleds.c ****  *
   7:Application/aLeds/aleds.c ****  *  Description
   8:Application/aLeds/aleds.c ****  *  	Implements LED's application module
   9:Application/aLeds/aleds.c ****  *
  10:Application/aLeds/aleds.c ****  *  History
  11:Application/aLeds/aleds.c ****  *  	FEB 02, 2014 file creation
  12:Application/aLeds/aleds.c ****  */
  13:Application/aLeds/aleds.c **** 
  14:Application/aLeds/aleds.c **** #include "aleds.h"
  15:Application/aLeds/aleds.c **** #include "stm32f1xx_hal.h"
  16:Application/aLeds/aleds.c **** 
  17:Application/aLeds/aleds.c **** /**Exported data*/
  18:Application/aLeds/aleds.c **** UINT8 aleds_ledGreenStatus;
  19:Application/aLeds/aleds.c **** UINT16 aleds_ledGreenBlinkTimeMs;
  20:Application/aLeds/aleds.c **** 
  21:Application/aLeds/aleds.c **** /**
  22:Application/aLeds/aleds.c **** * \brief initialize led's control
  23:Application/aLeds/aleds.c **** */
  24:Application/aLeds/aleds.c **** void aleds_init( void )
  25:Application/aLeds/aleds.c **** {
  28              		.loc 1 25 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 80B4     		push	{r7}
ARM GAS  /tmp/ccL3WSVH.s 			page 2


  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 7, -4
  37 0002 00AF     		add	r7, sp, #0
  38              	.LCFI1:
  39              		.cfi_def_cfa_register 7
  26:Application/aLeds/aleds.c **** 	/*XXX : the user led GPIO pin is initialized in gpio.c (generated by CubeMx)*/
  27:Application/aLeds/aleds.c **** 	aleds_ledGreenStatus = ALEDS_LED_STATUS_BLINK;
  40              		.loc 1 27 0
  41 0004 054B     		ldr	r3, .L2
  42 0006 0222     		movs	r2, #2
  43 0008 1A70     		strb	r2, [r3]
  28:Application/aLeds/aleds.c **** 	aleds_ledGreenBlinkTimeMs = 6000; /*ms*/
  44              		.loc 1 28 0
  45 000a 054B     		ldr	r3, .L2+4
  46 000c 41F27072 		movw	r2, #6000
  47 0010 1A80     		strh	r2, [r3]	@ movhi
  29:Application/aLeds/aleds.c **** }
  48              		.loc 1 29 0
  49 0012 00BF     		nop
  50 0014 BD46     		mov	sp, r7
  51              	.LCFI2:
  52              		.cfi_def_cfa_register 13
  53              		@ sp needed
  54 0016 80BC     		pop	{r7}
  55              	.LCFI3:
  56              		.cfi_restore 7
  57              		.cfi_def_cfa_offset 0
  58 0018 7047     		bx	lr
  59              	.L3:
  60 001a 00BF     		.align	2
  61              	.L2:
  62 001c 00000000 		.word	aleds_ledGreenStatus
  63 0020 00000000 		.word	aleds_ledGreenBlinkTimeMs
  64              		.cfi_endproc
  65              	.LFE66:
  67              		.section	.text.aleds_manage,"ax",%progbits
  68              		.align	1
  69              		.global	aleds_manage
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  73              		.fpu softvfp
  75              	aleds_manage:
  76              	.LFB67:
  30:Application/aLeds/aleds.c **** 
  31:Application/aLeds/aleds.c **** /**
  32:Application/aLeds/aleds.c **** * \brief 	manages led's
  33:Application/aLeds/aleds.c **** *		task		:	10ms with offset
  34:Application/aLeds/aleds.c **** *		description	:	
  35:Application/aLeds/aleds.c **** */
  36:Application/aLeds/aleds.c **** void aleds_manage( void )
  37:Application/aLeds/aleds.c **** {
  77              		.loc 1 37 0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccL3WSVH.s 			page 3


  81 0000 80B5     		push	{r7, lr}
  82              	.LCFI4:
  83              		.cfi_def_cfa_offset 8
  84              		.cfi_offset 7, -8
  85              		.cfi_offset 14, -4
  86 0002 00AF     		add	r7, sp, #0
  87              	.LCFI5:
  88              		.cfi_def_cfa_register 7
  38:Application/aLeds/aleds.c **** 	static UINT16 aleds_manage_odd = 0;
  39:Application/aLeds/aleds.c **** 	aleds_manage_odd+=10;
  89              		.loc 1 39 0
  90 0004 1D4B     		ldr	r3, .L12
  91 0006 1B88     		ldrh	r3, [r3]
  92 0008 0A33     		adds	r3, r3, #10
  93 000a 9AB2     		uxth	r2, r3
  94 000c 1B4B     		ldr	r3, .L12
  95 000e 1A80     		strh	r2, [r3]	@ movhi
  40:Application/aLeds/aleds.c **** 	if ( aleds_manage_odd >= 1000 )
  96              		.loc 1 40 0
  97 0010 1A4B     		ldr	r3, .L12
  98 0012 1B88     		ldrh	r3, [r3]
  99 0014 B3F57A7F 		cmp	r3, #1000
 100 0018 02D3     		bcc	.L5
  41:Application/aLeds/aleds.c **** 	{
  42:Application/aLeds/aleds.c **** 		aleds_manage_odd = 0;
 101              		.loc 1 42 0
 102 001a 184B     		ldr	r3, .L12
 103 001c 0022     		movs	r2, #0
 104 001e 1A80     		strh	r2, [r3]	@ movhi
 105              	.L5:
  43:Application/aLeds/aleds.c **** 	}
  44:Application/aLeds/aleds.c **** 
  45:Application/aLeds/aleds.c **** 	if ( ALEDS_LED_STATUS_ON == aleds_ledGreenStatus ||
 106              		.loc 1 45 0
 107 0020 174B     		ldr	r3, .L12+4
 108 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 109 0024 012B     		cmp	r3, #1
 110 0026 08D0     		beq	.L6
  46:Application/aLeds/aleds.c **** 			( (ALEDS_LED_STATUS_BLINK == aleds_ledGreenStatus) && (aleds_manage_odd>500) )
 111              		.loc 1 46 0 discriminator 1
 112 0028 154B     		ldr	r3, .L12+4
 113 002a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  45:Application/aLeds/aleds.c **** 			( (ALEDS_LED_STATUS_BLINK == aleds_ledGreenStatus) && (aleds_manage_odd>500) )
 114              		.loc 1 45 0 discriminator 1
 115 002c 022B     		cmp	r3, #2
 116 002e 0AD1     		bne	.L7
 117              		.loc 1 46 0
 118 0030 124B     		ldr	r3, .L12
 119 0032 1B88     		ldrh	r3, [r3]
 120 0034 B3F5FA7F 		cmp	r3, #500
 121 0038 05D9     		bls	.L7
 122              	.L6:
  47:Application/aLeds/aleds.c **** 		)
  48:Application/aLeds/aleds.c **** 	{
  49:Application/aLeds/aleds.c **** 		/*led on*/
  50:Application/aLeds/aleds.c **** 		HAL_GPIO_WritePin(userLed_GPIO_Port, userLed_Pin, GPIO_PIN_SET);
 123              		.loc 1 50 0
ARM GAS  /tmp/ccL3WSVH.s 			page 4


 124 003a 0122     		movs	r2, #1
 125 003c 0121     		movs	r1, #1
 126 003e 1148     		ldr	r0, .L12+8
 127 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 128 0044 04E0     		b	.L8
 129              	.L7:
  51:Application/aLeds/aleds.c **** 	}
  52:Application/aLeds/aleds.c **** 	else
  53:Application/aLeds/aleds.c **** 	{
  54:Application/aLeds/aleds.c **** 		/*led off*/
  55:Application/aLeds/aleds.c **** 		HAL_GPIO_WritePin(userLed_GPIO_Port, userLed_Pin, GPIO_PIN_RESET);
 130              		.loc 1 55 0
 131 0046 0022     		movs	r2, #0
 132 0048 0121     		movs	r1, #1
 133 004a 0E48     		ldr	r0, .L12+8
 134 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 135              	.L8:
  56:Application/aLeds/aleds.c **** 	}
  57:Application/aLeds/aleds.c **** 
  58:Application/aLeds/aleds.c **** 	if ( aleds_ledGreenBlinkTimeMs > 0 )
 136              		.loc 1 58 0
 137 0050 0D4B     		ldr	r3, .L12+12
 138 0052 1B88     		ldrh	r3, [r3]
 139 0054 002B     		cmp	r3, #0
 140 0056 0FD0     		beq	.L11
  59:Application/aLeds/aleds.c **** 	{
  60:Application/aLeds/aleds.c **** 		if ( aleds_ledGreenBlinkTimeMs < 20 )
 141              		.loc 1 60 0
 142 0058 0B4B     		ldr	r3, .L12+12
 143 005a 1B88     		ldrh	r3, [r3]
 144 005c 132B     		cmp	r3, #19
 145 005e 05D8     		bhi	.L10
  61:Application/aLeds/aleds.c **** 		{
  62:Application/aLeds/aleds.c **** 			aleds_ledGreenStatus = ALEDS_LED_STATUS_OFF;
 146              		.loc 1 62 0
 147 0060 074B     		ldr	r3, .L12+4
 148 0062 0022     		movs	r2, #0
 149 0064 1A70     		strb	r2, [r3]
  63:Application/aLeds/aleds.c **** 			aleds_ledGreenBlinkTimeMs = 10;
 150              		.loc 1 63 0
 151 0066 084B     		ldr	r3, .L12+12
 152 0068 0A22     		movs	r2, #10
 153 006a 1A80     		strh	r2, [r3]	@ movhi
 154              	.L10:
  64:Application/aLeds/aleds.c **** 		}
  65:Application/aLeds/aleds.c **** 		aleds_ledGreenBlinkTimeMs-=10;
 155              		.loc 1 65 0
 156 006c 064B     		ldr	r3, .L12+12
 157 006e 1B88     		ldrh	r3, [r3]
 158 0070 0A3B     		subs	r3, r3, #10
 159 0072 9AB2     		uxth	r2, r3
 160 0074 044B     		ldr	r3, .L12+12
 161 0076 1A80     		strh	r2, [r3]	@ movhi
 162              	.L11:
  66:Application/aLeds/aleds.c **** 	}
  67:Application/aLeds/aleds.c **** 
  68:Application/aLeds/aleds.c **** }
ARM GAS  /tmp/ccL3WSVH.s 			page 5


 163              		.loc 1 68 0
 164 0078 00BF     		nop
 165 007a 80BD     		pop	{r7, pc}
 166              	.L13:
 167              		.align	2
 168              	.L12:
 169 007c 00000000 		.word	aleds_manage_odd.7356
 170 0080 00000000 		.word	aleds_ledGreenStatus
 171 0084 00080140 		.word	1073809408
 172 0088 00000000 		.word	aleds_ledGreenBlinkTimeMs
 173              		.cfi_endproc
 174              	.LFE67:
 176              		.section	.bss.aleds_manage_odd.7356,"aw",%nobits
 177              		.align	1
 180              	aleds_manage_odd.7356:
 181 0000 0000     		.space	2
 182              		.text
 183              	.Letext0:
 184              		.file 2 "Scheduler/aSchTT_types.h"
 185              		.file 3 "Application/aLeds/aleds.h"
 186              		.file 4 "/usr/include/newlib/machine/_default_types.h"
 187              		.file 5 "/usr/include/newlib/sys/_stdint.h"
 188              		.file 6 "Drivers/CMSIS/Include/core_cm3.h"
 189              		.file 7 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 190              		.file 8 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 191              		.file 9 "/usr/include/newlib/sys/lock.h"
 192              		.file 10 "/usr/include/newlib/sys/_types.h"
 193              		.file 11 "/usr/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h"
 194              		.file 12 "/usr/include/newlib/sys/reent.h"
 195              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
ARM GAS  /tmp/ccL3WSVH.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 aleds.c
                            *COM*:0000000000000001 aleds_ledGreenStatus
                            *COM*:0000000000000002 aleds_ledGreenBlinkTimeMs
     /tmp/ccL3WSVH.s:18     .text.aleds_init:0000000000000000 $t
     /tmp/ccL3WSVH.s:25     .text.aleds_init:0000000000000000 aleds_init
     /tmp/ccL3WSVH.s:62     .text.aleds_init:000000000000001c $d
     /tmp/ccL3WSVH.s:68     .text.aleds_manage:0000000000000000 $t
     /tmp/ccL3WSVH.s:75     .text.aleds_manage:0000000000000000 aleds_manage
     /tmp/ccL3WSVH.s:169    .text.aleds_manage:000000000000007c $d
     /tmp/ccL3WSVH.s:180    .bss.aleds_manage_odd.7356:0000000000000000 aleds_manage_odd.7356
     /tmp/ccL3WSVH.s:177    .bss.aleds_manage_odd.7356:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
