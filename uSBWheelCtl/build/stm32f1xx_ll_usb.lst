ARM GAS  /tmp/ccxRhxZv.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"stm32f1xx_ll_usb.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.USB_CoreInit,"ax",%progbits
  16              		.align	1
  17              		.global	USB_CoreInit
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	USB_CoreInit:
  24              	.LFB66:
  25              		.file 1 "Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c"
   1:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
   2:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ******************************************************************************
   3:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @file    stm32f1xx_ll_usb.c
   4:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @author  MCD Application Team
   5:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @version V1.1.1
   6:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @date    12-May-2017
   7:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief   USB Low Layer HAL module driver.
   8:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
   9:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This file provides firmware functions to manage the following 
  10:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          functionalities of the USB Peripheral Controller:
  11:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + Initialization/de-initialization functions
  12:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + I/O operation functions
  13:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + Peripheral Control functions 
  14:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           + Peripheral State functions
  15:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  16:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   @verbatim
  17:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ==============================================================================
  18:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     ##### How to use this driver #####
  19:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ==============================================================================
  20:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     [..]
  21:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (#) Fill parameters of Init structure in USB_OTG_CfgTypeDef structure.
  22:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
  23:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (#) Call USB_CoreInit() API to initialize the USB Core peripheral.
  24:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  25:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (#) The upper HAL HCD/PCD driver will call the right routines for its internal processes.
  26:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  27:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   @endverbatim
  28:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ******************************************************************************
  29:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @attention
  30:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  31:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
  32:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  33:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * Redistribution and use in source and binary forms, with or without modification,
ARM GAS  /tmp/ccxRhxZv.s 			page 2


  34:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * are permitted provided that the following conditions are met:
  35:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   1. Redistributions of source code must retain the above copyright notice,
  36:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      this list of conditions and the following disclaimer.
  37:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
  38:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      this list of conditions and the following disclaimer in the documentation
  39:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      and/or other materials provided with the distribution.
  40:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
  41:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      may be used to endorse or promote products derived from this software
  42:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *      without specific prior written permission.
  43:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  44:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  45:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  46:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  47:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  48:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  49:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  50:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  51:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  52:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  53:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  54:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *
  55:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   ******************************************************************************
  56:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */ 
  57:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  58:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Includes ------------------------------------------------------------------*/
  59:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #include "stm32f1xx_hal.h"
  60:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  61:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @addtogroup STM32F1xx_HAL_Driver
  62:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  63:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  64:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  65:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL USB Low Layer
  66:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief Low layer module for USB_FS and USB_OTG_FS drivers
  67:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  68:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  69:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  70:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (HAL_PCD_MODULE_ENABLED) || defined (HAL_HCD_MODULE_ENABLED)
  71:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  72:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined(STM32F102x6) || defined(STM32F102xB) || \
  73:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     defined(STM32F103x6) || defined(STM32F103xB) || \
  74:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     defined(STM32F103xE) || defined(STM32F103xG) || \
  75:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     defined(STM32F105xC) || defined(STM32F107xC)
  76:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
  77:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private types -------------------------------------------------------------*/
  78:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private variables ---------------------------------------------------------*/
  79:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private constants ---------------------------------------------------------*/
  80:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private macros ------------------------------------------------------------*/
  81:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Private functions ---------------------------------------------------------*/
  82:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (USB_OTG_FS)
  83:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL_Private_Functions USB Low Layer Private Functions
  84:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  85:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  86:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** static HAL_StatusTypeDef USB_CoreReset(USB_OTG_GlobalTypeDef *USBx);
  87:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
  88:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @}
  89:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  90:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #endif /* USB_OTG_FS */
ARM GAS  /tmp/ccxRhxZv.s 			page 3


  91:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  92:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /* Exported functions --------------------------------------------------------*/
  93:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL_Exported_Functions USB Low Layer Exported Functions
  94:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
  95:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
  96:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
  97:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /** @defgroup USB_LL_Exported_Functions_Group1 Peripheral Control functions
  98:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  *  @brief   management functions
  99:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  *
 100:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** @verbatim
 101:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  ===============================================================================
 102:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                       ##### Peripheral Control functions #####
 103:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  ===============================================================================  
 104:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     [..]
 105:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     This subsection provides a set of functions allowing to control the PCD data 
 106:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     transfers.
 107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
 108:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** @endverbatim
 109:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @{
 110:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 112:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /*==============================================================================
 113:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB OTG FS peripheral available on STM32F105xx and STM32F107xx devices 
 114:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** ==============================================================================*/
 115:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (USB_OTG_FS)
 116:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 118:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initializes the USB Core
 119:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx: USB Instance
 120:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg : pointer to a USB_OTG_CfgTypeDef structure that contains
 121:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 122:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 123:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 124:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_CoreInit(USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 125:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 126:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 127:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(cfg);
 128:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 129:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Select FS Embedded PHY */
 130:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GUSBCFG |= USB_OTG_GUSBCFG_PHYSEL;
 131:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 132:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Reset after a PHY select and set Host mode */
 133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_CoreReset(USBx);
 134:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 135:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Deactivate the power down*/
 136:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG = USB_OTG_GCCFG_PWRDWN;
 137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 138:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 139:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 141:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 142:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EnableGlobalInt
 143:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Enables the controller's Global Int in the AHB Config reg
 144:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 145:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 146:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 147:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EnableGlobalInt(USB_OTG_GlobalTypeDef *USBx)
ARM GAS  /tmp/ccxRhxZv.s 			page 4


 148:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 149:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GAHBCFG |= USB_OTG_GAHBCFG_GINT;
 150:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 151:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 152:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 153:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 154:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DisableGlobalInt
 155:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Disable the controller's Global Int in the AHB Config reg
 156:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 157:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 158:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
 159:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DisableGlobalInt(USB_OTG_GlobalTypeDef *USBx)
 160:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 161:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GAHBCFG &= ~USB_OTG_GAHBCFG_GINT;
 162:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 163:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 164:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 165:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 166:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetCurrentMode : Set functional mode
 167:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 168:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  mode :  current core mode
 169:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 170:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_DEVICE_MODE: Peripheral mode mode
 171:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_HOST_MODE: Host mode
 172:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_DRD_MODE: Dual Role Device mode  
 173:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 174:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 175:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_SetCurrentMode(USB_OTG_GlobalTypeDef *USBx , USB_ModeTypeDef mode)
 176:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 177:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GUSBCFG &= ~(USB_OTG_GUSBCFG_FHMOD | USB_OTG_GUSBCFG_FDMOD); 
 178:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 179:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if ( mode == USB_HOST_MODE)
 180:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 181:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_FHMOD;
 182:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 183:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else if (mode == USB_DEVICE_MODE)
 184:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 185:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_FDMOD; 
 186:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 187:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(50);
 188:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 189:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 190:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 191:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 192:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 193:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevInit : Initializes the USB_OTG controller registers 
 194:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         for device mode
 195:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 196:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_OTG_CfgTypeDef structure that contains
 197:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 198:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 199:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 200:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DevInit (USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 201:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 202:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 203:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 204:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < 15 ; index++)
ARM GAS  /tmp/ccxRhxZv.s 			page 5


 205:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 206:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->DIEPTXF[index] = 0;
 207:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 208:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 209:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Activate VBUS Sensing B */
 210:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG |= USB_OTG_GCCFG_VBUSBSEN;
 211:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 212:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Restart the Phy Clock */
 213:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_PCGCCTL = 0;
 214:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 215:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Device mode configuration */
 216:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG |= DCFG_FRAME_INTERVAL_80;
 217:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 218:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set Full speed phy */
 219:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_SetDevSpeed (USBx , USB_OTG_SPEED_FULL);
 220:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 221:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Flush the FIFOs */
 222:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx , 0x10); /* all Tx FIFOs */
 223:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
 224:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 225:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear all pending Device Interrupts */
 226:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK = 0;
 227:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DOEPMSK = 0;
 228:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINT = 0xFFFFFFFF;
 229:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINTMSK = 0;
 230:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 231:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < cfg.dev_endpoints; index++)
 232:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 233:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx_INEP(index)->DIEPCTL & USB_OTG_DIEPCTL_EPENA) == USB_OTG_DIEPCTL_EPENA)
 234:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 235:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(index)->DIEPCTL = (USB_OTG_DIEPCTL_EPDIS | USB_OTG_DIEPCTL_SNAK);
 236:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 237:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 238:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(index)->DIEPCTL = 0;
 240:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 241:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 242:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(index)->DIEPTSIZ = 0;
 243:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(index)->DIEPINT  = 0xFF;
 244:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 245:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 246:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < cfg.dev_endpoints; index++)
 247:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 248:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx_OUTEP(index)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == USB_OTG_DOEPCTL_EPENA)
 249:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 250:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(index)->DOEPCTL = (USB_OTG_DOEPCTL_EPDIS | USB_OTG_DOEPCTL_SNAK);
 251:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 252:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 253:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 254:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(index)->DOEPCTL = 0;
 255:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 256:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 257:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(index)->DOEPTSIZ = 0;
 258:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(index)->DOEPINT  = 0xFF;
 259:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 260:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 261:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK &= ~(USB_OTG_DIEPMSK_TXFURM);
ARM GAS  /tmp/ccxRhxZv.s 			page 6


 262:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 263:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Disable all interrupts. */
 264:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK = 0;
 265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 266:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear any pending interrupts */
 267:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS = 0xBFFFFFFF;
 268:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 269:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable the common interrupts */
 270:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_RXFLVLM;
 271:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 272:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable interrupts matching to the Device mode ONLY */
 273:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= (USB_OTG_GINTMSK_USBSUSPM | USB_OTG_GINTMSK_USBRST |\
 274:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_ENUMDNEM | USB_OTG_GINTMSK_IEPINT |\
 275:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_OEPINT   | USB_OTG_GINTMSK_IISOIXFRM|\
 276:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_PXFRM_IISOOXFRM | USB_OTG_GINTMSK_WUIM);
 277:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 278:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if(cfg.Sof_enable)
 279:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 280:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GINTMSK |= USB_OTG_GINTMSK_SOFM;
 281:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 282:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 283:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (cfg.vbus_sensing_enable == ENABLE)
 284:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 285:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GINTMSK |= (USB_OTG_GINTMSK_SRQIM | USB_OTG_GINTMSK_OTGINT); 
 286:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 287:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 288:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 289:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 290:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 291:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 292:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_OTG_FlushTxFifo : Flush a Tx FIFO
 293:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 294:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  num : FIFO number
 295:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
 296:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             15 means Flush all Tx FIFOs
 297:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 298:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 299:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushTxFifo (USB_OTG_GlobalTypeDef *USBx, uint32_t num )
 300:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 301:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
 302:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 303:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GRSTCTL = (USB_OTG_GRSTCTL_TXFFLSH |(uint32_t)(num << 6)); 
 304:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 305:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   do
 306:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 307:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (++count > 200000)
 308:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 309:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       return HAL_TIMEOUT;
 310:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 311:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 312:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_TXFFLSH) == USB_OTG_GRSTCTL_TXFFLSH);
 313:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 314:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 315:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 316:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 317:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 318:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_FlushRxFifo : Flush Rx FIFO
ARM GAS  /tmp/ccxRhxZv.s 			page 7


 319:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 320:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 321:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 322:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushRxFifo(USB_OTG_GlobalTypeDef *USBx)
 323:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 324:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
 325:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 326:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GRSTCTL = USB_OTG_GRSTCTL_RXFFLSH;
 327:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 328:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   do
 329:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 330:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (++count > 200000)
 331:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 332:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       return HAL_TIMEOUT;
 333:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 334:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 335:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_RXFFLSH) == USB_OTG_GRSTCTL_RXFFLSH);
 336:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 337:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 338:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 339:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 340:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 341:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetDevSpeed :Initializes the DevSpd field of DCFG register 
 342:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         depending the PHY type and the enumeration speed of the device.
 343:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 344:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  speed : device speed
 345:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 346:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
 347:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
 348:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval  Hal status
 349:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 350:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_SetDevSpeed(USB_OTG_GlobalTypeDef *USBx , uint8_t speed)
 351:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 352:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 353:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 354:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 355:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG |= speed;
 356:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 357:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 358:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 359:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 360:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_GetDevSpeed :Return the  Dev Speed 
 361:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 362:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval speed : device speed
 363:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 364:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
 365:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
 366:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 367:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint8_t USB_GetDevSpeed(USB_OTG_GlobalTypeDef *USBx)
 368:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 369:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t speed = 0;
 370:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 371:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 372:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 373:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_FS_PHY_30MHZ_OR_60MHZ)||
 374:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_FS_PHY_48MHZ))
 375:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
ARM GAS  /tmp/ccxRhxZv.s 			page 8


 376:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     speed = USB_OTG_SPEED_FULL;
 377:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 378:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else if((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_LS_PHY_6MHZ)
 379:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 380:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     speed = USB_OTG_SPEED_LOW;
 381:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 382:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 383:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return speed;
 384:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 385:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 386:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 387:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Activate and configure an endpoint
 388:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 389:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 390:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 391:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 392:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 393:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 394:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 395:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 396:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 397:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in)
 398:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 399:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Assign a Tx FIFO */
 400:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     ep->tx_fifo_num = ep->num;
 401:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 402:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set initial data PID. */
 403:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->type == EP_TYPE_BULK )
 404:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 405:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     ep->data_pid_start = 0;
 406:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 407:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 408:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 409:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 410:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    USBx_DEVICE->DAINTMSK |= USB_OTG_DAINTMSK_IEPM & ((1 << (ep->num)));
 411:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 412:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_INEP(ep->num)->DIEPCTL) & USB_OTG_DIEPCTL_USBAEP) == 0)
 413:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 414:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPCTL |= ((ep->maxpacket & USB_OTG_DIEPCTL_MPSIZ ) | (ep->type << 18 ) 
 415:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         ((ep->num) << 22 ) | (USB_OTG_DIEPCTL_SD0PID_SEVNFRM) | (USB_OTG_DIEPCTL_USBAEP)); 
 416:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 417:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 418:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 419:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 420:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      USBx_DEVICE->DAINTMSK |= USB_OTG_DAINTMSK_OEPM & ((1 << (ep->num)) << 16);
 421:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      
 422:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_OUTEP(ep->num)->DOEPCTL) & USB_OTG_DOEPCTL_USBAEP) == 0)
 423:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 424:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPCTL |= ((ep->maxpacket & USB_OTG_DOEPCTL_MPSIZ ) | (ep->type << 18 )
 425:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****        (USB_OTG_DIEPCTL_SD0PID_SEVNFRM)| (USB_OTG_DOEPCTL_USBAEP));
 426:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 427:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 428:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 429:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 430:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 431:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 432:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
ARM GAS  /tmp/ccxRhxZv.s 			page 9


 433:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  De-activate and de-initialize an endpoint
 434:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 435:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 436:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 437:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 438:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 439:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 440:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 441:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 442:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 443:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Read DEPCTLn register */
 444:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 445:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 446:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK &= ~(USB_OTG_DAINTMSK_IEPM & ((1 << (ep->num))));
 447:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_IEPM & ((1 << (ep->num))));
 448:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL &= ~ USB_OTG_DIEPCTL_USBAEP;
 449:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 450:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 451:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 452:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((1 << (ep->num)) << 16));
 453:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((1 << (ep->num)) << 16));
 454:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL &= ~USB_OTG_DOEPCTL_USBAEP;
 455:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 456:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 457:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 458:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 459:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 460:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPStartXfer : setup and starts a transfer over an EP
 461:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 462:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 463:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 464:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 465:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPStartXfer(USB_OTG_GlobalTypeDef *USBx , USB_OTG_EPTypeDef *ep)
 466:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 467:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pktcnt = 0;
 468:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 469:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 470:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 471:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* IN endpoint */
 472:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 473:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 474:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Zero Length Packet? */
 475:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len == 0)
 476:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 477:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT); 
 478:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1 << 19)) ;
 479:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ); 
 480:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 481:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 482:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 483:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Program the transfer size and packet count
 484:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * as follows: xfersize = N * maxpacket +
 485:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * short_packet pktcnt = N + (short_packet
 486:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * exist ? 1 : 0)
 487:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       */
 488:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 489:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT); 
ARM GAS  /tmp/ccxRhxZv.s 			page 10


 490:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (((ep->xfer_len + ep->maxpacket -1
 491:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_XFRSIZ & ep->xfer_len); 
 492:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 493:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (ep->type == EP_TYPE_ISOC)
 494:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 495:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_MULCNT); 
 496:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_MULCNT & (1 << 29)); 
 497:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 498:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 499:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 500:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type != EP_TYPE_ISOC)
 501:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 502:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Enable the Tx FIFO Empty Interrupt for this EP */
 503:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (ep->xfer_len > 0)
 504:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 505:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_DEVICE->DIEPEMPMSK |= 1 << ep->num;
 506:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 507:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 508:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 509:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 510:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 511:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if ((USBx_DEVICE->DSTS & ( 1 << 8 )) == 0)
 512:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 513:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_SODDFRM;
 514:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 515:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       else
 516:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 517:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_SD0PID_SEVNFRM;
 518:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 519:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     } 
 520:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 521:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable, IN data in FIFO */
 522:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL |= (USB_OTG_DIEPCTL_CNAK | USB_OTG_DIEPCTL_EPENA);
 523:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 524:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 525:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 526:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USB_WritePacket(USBx, ep->xfer_buff, ep->num, ep->xfer_len);
 527:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 528:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 529:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else /* OUT endpoint */
 530:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 531:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Program the transfer size and packet count as follows:
 532:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * pktcnt = N
 533:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * xfersize = N * maxpacket
 534:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     */
 535:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_XFRSIZ); 
 536:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_PKTCNT); 
 537:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 538:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len == 0)
 539:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 540:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & ep->maxpacket);
 541:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1 << 19));
 542:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 543:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 544:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 545:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       pktcnt = (ep->xfer_len + ep->maxpacket -1)/ ep->maxpacket;
 546:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (pktcnt << 19));
ARM GAS  /tmp/ccxRhxZv.s 			page 11


 547:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & (ep->maxpacket * pktcnt));
 548:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 549:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 550:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 551:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 552:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if ((USBx_DEVICE->DSTS & ( 1 << 8 )) == 0)
 553:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 554:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_SODDFRM;
 555:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 556:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       else
 557:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 558:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_SD0PID_SEVNFRM;
 559:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 560:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 561:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable */
 562:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL |= (USB_OTG_DOEPCTL_CNAK | USB_OTG_DOEPCTL_EPENA);
 563:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 564:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 565:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 566:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 567:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 568:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 569:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EP0StartXfer : setup and starts a transfer over the EP  0
 570:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 571:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 572:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 573:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 574:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0StartXfer(USB_OTG_GlobalTypeDef *USBx , USB_OTG_EPTypeDef *ep)
 575:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 576:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 577:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 578:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 579:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* IN endpoint */
 580:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 581:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 582:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Zero Length Packet? */
 583:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len == 0)
 584:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 585:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 586:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1 << 19));
 587:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 588:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 589:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
 590:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 591:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Program the transfer size and packet count
 592:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * as follows: xfersize = N * maxpacket +
 593:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * short_packet pktcnt = N + (short_packet
 594:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       * exist ? 1 : 0)
 595:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       */
 596:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 597:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 598:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
 599:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if(ep->xfer_len > ep->maxpacket)
 600:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
 601:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         ep->xfer_len = ep->maxpacket;
 602:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
 603:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1 << 19));
ARM GAS  /tmp/ccxRhxZv.s 			page 12


 604:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_XFRSIZ & ep->xfer_len);
 605:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 606:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 607:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Enable the Tx FIFO Empty Interrupt for this EP */
 608:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > 0)
 609:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 610:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_DEVICE->DIEPEMPMSK |= 1 << (ep->num);
 611:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 612:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 613:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable, IN data in FIFO */
 614:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL |= (USB_OTG_DIEPCTL_CNAK | USB_OTG_DIEPCTL_EPENA);   
 615:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 616:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else /* OUT endpoint */
 617:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 618:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Program the transfer size and packet count as follows:
 619:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * pktcnt = N
 620:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     * xfersize = N * maxpacket
 621:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     */
 622:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_XFRSIZ);
 623:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_PKTCNT);
 624:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 625:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > 0)
 626:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 627:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len = ep->maxpacket;
 628:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 629:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 630:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1 << 19));
 631:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & (ep->maxpacket));
 632:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 633:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* EP enable */
 634:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL |= (USB_OTG_DOEPCTL_CNAK | USB_OTG_DOEPCTL_EPENA);
 635:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 636:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 637:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 638:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 639:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 640:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 641:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_WritePacket : Writes a packet into the Tx FIFO associated 
 642:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
 643:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 644:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  src :  pointer to source buffer
 645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ch_ep_num : endpoint or host channel number
 646:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to write
 647:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 648:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 649:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_WritePacket(USB_OTG_GlobalTypeDef *USBx, uint8_t *src, uint8_t ch_ep_num, uin
 650:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 651:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count32b = 0 , index = 0;
 652:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 653:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 654:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 655:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   count32b =  (len + 3) / 4;
 656:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < count32b; index++, src += 4)
 657:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 658:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DFIFO(ch_ep_num) = *((__packed uint32_t *)src);
 659:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 660:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
ARM GAS  /tmp/ccxRhxZv.s 			page 13


 661:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 662:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 663:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 664:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadPacket : read a packet from the Tx FIFO associated 
 665:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
 666:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 667:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  dest : destination pointer
 668:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to read
 669:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval pointer to destination buffer
 670:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 671:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void *USB_ReadPacket(USB_OTG_GlobalTypeDef *USBx, uint8_t *dest, uint16_t len)
 672:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 673:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 674:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count32b = (len + 3) / 4;
 675:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 676:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 677:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 678:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for ( index = 0; index < count32b; index++, dest += 4 )
 679:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 680:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     *(__packed uint32_t *)dest = USBx_DFIFO(0);
 681:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
 682:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 683:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((void *)dest);
 684:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 685:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 686:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 687:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPSetStall : set a stall condition over an EP
 688:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 689:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure   
 690:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 691:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 692:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPSetStall(USB_OTG_GlobalTypeDef *USBx , USB_OTG_EPTypeDef *ep)
 693:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 694:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 695:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 696:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 697:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 698:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 699:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_INEP(ep->num)->DIEPCTL) & USB_OTG_DIEPCTL_EPENA) == 0)
 700:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 701:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_INEP(ep->num)->DIEPCTL &= ~(USB_OTG_DIEPCTL_EPDIS);
 702:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     } 
 703:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_STALL;
 704:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 705:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 706:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 707:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (((USBx_OUTEP(ep->num)->DOEPCTL) & USB_OTG_DOEPCTL_EPENA) == 0)
 708:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 709:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPCTL &= ~(USB_OTG_DOEPCTL_EPDIS);
 710:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     } 
 711:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_STALL;
 712:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 713:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 714:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 715:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 716:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 717:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPClearStall : Clear a stall condition over an EP
ARM GAS  /tmp/ccxRhxZv.s 			page 14


 718:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 719:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
 720:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 721:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 722:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPClearStall(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 723:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 724:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 725:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 726:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 727:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 728:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 729:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(ep->num)->DIEPCTL &= ~USB_OTG_DIEPCTL_STALL;
 730:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_INTR || ep->type == EP_TYPE_BULK)
 731:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 732:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****        USBx_INEP(ep->num)->DIEPCTL |= USB_OTG_DIEPCTL_SD0PID_SEVNFRM; /* DATA0 */
 733:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 734:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 735:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
 736:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 737:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(ep->num)->DOEPCTL &= ~USB_OTG_DOEPCTL_STALL;
 738:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->type == EP_TYPE_INTR || ep->type == EP_TYPE_BULK)
 739:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
 740:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_OUTEP(ep->num)->DOEPCTL |= USB_OTG_DOEPCTL_SD0PID_SEVNFRM; /* DATA0 */
 741:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
 742:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 743:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 744:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 745:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 747:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_StopDevice : Stop the usb device mode
 748:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 749:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 750:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 751:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_StopDevice(USB_OTG_GlobalTypeDef *USBx)
 752:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 753:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 754:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 755:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear Pending interrupt */
 756:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < 15 ; index++)
 757:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 758:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(index)->DIEPINT  = 0xFF;
 759:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_OUTEP(index)->DOEPINT  = 0xFF;
 760:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 761:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINT = 0xFFFFFFFF;
 762:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 763:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear interrupt masks */
 764:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK  = 0;
 765:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DOEPMSK  = 0;
 766:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DAINTMSK = 0;
 767:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 768:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Flush the FIFO */
 769:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
 770:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx ,  0x10 );
 771:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 772:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 773:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 774:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
ARM GAS  /tmp/ccxRhxZv.s 			page 15


 775:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 776:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetDevAddress : Stop the usb device mode
 777:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 778:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  address : new device address to be assigned
 779:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
 780:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 781:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 782:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_SetDevAddress (USB_OTG_GlobalTypeDef *USBx, uint8_t address)
 783:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 784:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 785:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(address);
 787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG &= ~ (USB_OTG_DCFG_DAD);
 788:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCFG |= (address << 4) & USB_OTG_DCFG_DAD;
 789:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 790:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 791:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 792:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 793:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 794:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevConnect : Connect the USB device by enabling the pull-up/pull-down
 795:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 796:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 797:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 798:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevConnect (USB_OTG_GlobalTypeDef *USBx)
 799:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 800:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 801:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 802:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 803:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCTL &= ~USB_OTG_DCTL_SDIS ;
 804:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(3);
 805:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 806:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 807:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 808:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 809:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 810:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevDisconnect : Disconnect the USB device by disabling the pull-up/pull-down
 811:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 812:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 813:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 814:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevDisconnect (USB_OTG_GlobalTypeDef *USBx)
 815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 816:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 817:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 818:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 819:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCTL |= USB_OTG_DCTL_SDIS;
 820:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(3);
 821:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 822:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 823:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 824:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 825:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 826:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadInterrupts: return the global USB interrupt status
 827:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 828:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 829:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 830:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t  USB_ReadInterrupts (USB_OTG_GlobalTypeDef *USBx)
 831:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
ARM GAS  /tmp/ccxRhxZv.s 			page 16


 832:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 833:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 834:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx->GINTSTS;
 835:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx->GINTMSK;
 836:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 837:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 838:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 839:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 840:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllOutEpInterrupt: return the USB device OUT endpoints interrupt status
 841:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 842:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 843:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 844:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllOutEpInterrupt (USB_OTG_GlobalTypeDef *USBx)
 845:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 846:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 847:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 848:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 849:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 850:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg  = USBx_DEVICE->DAINT;
 851:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DAINTMSK;
 852:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((tmpreg & 0xffff0000) >> 16);
 853:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 854:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 855:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 856:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllInEpInterrupt: return the USB device IN endpoints interrupt status
 857:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 858:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 859:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 860:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllInEpInterrupt (USB_OTG_GlobalTypeDef *USBx)
 861:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 862:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 863:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 864:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 865:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 866:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg  = USBx_DEVICE->DAINT;
 867:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DAINTMSK;
 868:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((tmpreg & 0xFFFF));
 869:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 870:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 871:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 872:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device OUT EP Interrupt register
 873:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 874:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
 875:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
 876:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device OUT EP Interrupt register
 877:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 878:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevOutEPInterrupt (USB_OTG_GlobalTypeDef *USBx , uint8_t epnum)
 879:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 880:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 881:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 882:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 883:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 884:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg  = USBx_OUTEP(epnum)->DOEPINT;
 885:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DOEPMSK;
 886:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 887:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 888:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
ARM GAS  /tmp/ccxRhxZv.s 			page 17


 889:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 890:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device IN EP Interrupt register
 891:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 892:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
 893:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
 894:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device IN EP Interrupt register
 895:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 896:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevInEPInterrupt (USB_OTG_GlobalTypeDef *USBx , uint8_t epnum)
 897:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 898:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0, msk = 0, emp = 0;
 899:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 900:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 901:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 902:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   msk = USBx_DEVICE->DIEPMSK;
 903:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   emp = USBx_DEVICE->DIEPEMPMSK;
 904:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   msk |= ((emp >> epnum) & 0x1) << 7;
 905:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx_INEP(epnum)->DIEPINT & msk;
 906:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 907:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 908:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 909:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 910:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ClearInterrupts: clear a USB interrupt
 911:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 912:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  interrupt : interrupt flag
 913:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
 914:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 915:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void  USB_ClearInterrupts (USB_OTG_GlobalTypeDef *USBx, uint32_t interrupt)
 916:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 917:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS |= interrupt;
 918:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 919:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 920:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 921:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns USB core mode
 922:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 923:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval return core mode : Host or Device
 924:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
 925:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           0 : Host 
 926:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           1 : Device
 927:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 928:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_GetMode(USB_OTG_GlobalTypeDef *USBx)
 929:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 930:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 931:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 932:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 933:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((USBx->GINTSTS ) & 0x1);
 934:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 935:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 936:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 937:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Activate EP0 for Setup transactions
 938:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 939:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 940:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 941:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_ActivateSetup (USB_OTG_GlobalTypeDef *USBx)
 942:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 943:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 944:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 945:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set the MPS of the IN EP based on the enumeration speed */
ARM GAS  /tmp/ccxRhxZv.s 			page 18


 946:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_INEP(0)->DIEPCTL &= ~USB_OTG_DIEPCTL_MPSIZ;
 947:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 948:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD) == DSTS_ENUMSPD_LS_PHY_6MHZ)
 949:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 950:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_INEP(0)->DIEPCTL |= 3;
 951:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
 952:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_DEVICE->DCTL |= USB_OTG_DCTL_CGINAK;
 953:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 954:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 955:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 956:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 957:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 958:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Prepare the EP0 to start the first control setup
 959:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 960:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  psetup : pointer to setup packet
 961:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 962:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 963:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0_OutStart(USB_OTG_GlobalTypeDef *USBx, uint8_t *psetup)
 964:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 965:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
 966:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
 967:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(psetup);
 968:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ = 0;
 969:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1 << 19));
 970:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ |= (3 * 8);
 971:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_OUTEP(0)->DOEPTSIZ |=  USB_OTG_DOEPTSIZ_STUPCNT;
 972:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 973:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 974:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 975:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
 976:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
 977:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_HostInit : Initializes the USB OTG controller registers 
 978:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         for Host mode 
 979:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
 980:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_OTG_CfgTypeDef structure that contains
 981:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 982:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
 983:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
 984:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HostInit (USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 985:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 986:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 987:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 988:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Restart the Phy Clock */
 989:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_PCGCCTL = 0;
 990:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 991:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* no VBUS sensing*/
 992:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG &=~ (USB_OTG_GCCFG_VBUSASEN);
 993:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GCCFG &=~ (USB_OTG_GCCFG_VBUSBSEN);
 994:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
 995:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Disable the FS/LS support mode only */
 996:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((cfg.speed == USB_OTG_SPEED_FULL)&&
 997:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      (USBx != USB_OTG_FS))
 998:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 999:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HCFG |= USB_OTG_HCFG_FSLSS; 
1000:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1001:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1002:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
ARM GAS  /tmp/ccxRhxZv.s 			page 19


1003:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HCFG &= ~(USB_OTG_HCFG_FSLSS);  
1004:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1005:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1006:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Make sure the FIFOs are flushed. */
1007:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx, 0x10 ); /* all Tx FIFOs */
1008:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
1009:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1010:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear all pending HC Interrupts */
1011:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index < cfg.Host_channels; index++)
1012:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1013:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCINT = 0xFFFFFFFF;
1014:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCINTMSK = 0;
1015:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1016:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1017:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable VBUS driving */
1018:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_DriveVbus(USBx, 1);
1019:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1020:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay(200);
1021:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1022:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Disable all interrupts. */
1023:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK = 0;
1024:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1025:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear any pending interrupts */
1026:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS = 0xFFFFFFFF;
1027:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1028:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if(USBx == USB_OTG_FS)
1029:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1030:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* set Rx FIFO size */
1031:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->GRXFSIZ  = (uint32_t )0x80; 
1032:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->DIEPTXF0_HNPTXFSIZ = (uint32_t )(((0x60 << 16)& USB_OTG_NPTXFD) | 0x80);
1033:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx->HPTXFSIZ = (uint32_t )(((0x40 << 16)& USB_OTG_HPTXFSIZ_PTXFD) | 0xE0);
1034:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1035:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1036:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable the common interrupts */
1037:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_RXFLVLM;
1038:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1039:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable interrupts matching to the Host mode ONLY */
1040:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= (USB_OTG_GINTMSK_PRTIM            | USB_OTG_GINTMSK_HCIM |\
1041:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_SOFM             |USB_OTG_GINTSTS_DISCINT|\
1042:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                     USB_OTG_GINTMSK_PXFRM_IISOOXFRM  | USB_OTG_GINTMSK_WUIM);
1043:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1044:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1045:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1046:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1047:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1048:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_InitFSLSPClkSel : Initializes the FSLSPClkSel field of the 
1049:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         HCFG register on the PHY type and set the right frame interval
1050:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1051:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  freq : clock frequency
1052:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1053:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           HCFG_48_MHZ : Full Speed 48 MHz Clock 
1054:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           HCFG_6_MHZ : Low Speed 6 MHz Clock 
1055:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1056:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1057:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_InitFSLSPClkSel(USB_OTG_GlobalTypeDef *USBx , uint8_t freq)
1058:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1059:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
ARM GAS  /tmp/ccxRhxZv.s 			page 20


1060:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1061:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1062:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HCFG &= ~(USB_OTG_HCFG_FSLSPCS);
1063:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HCFG |= (freq & USB_OTG_HCFG_FSLSPCS);
1064:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1065:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (freq ==  HCFG_48_MHZ)
1066:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1067:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HFIR = (uint32_t)48000;
1068:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1069:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else if (freq ==  HCFG_6_MHZ)
1070:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1071:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HOST->HFIR = (uint32_t)6000;
1072:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1073:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1074:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1075:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1076:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1077:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** * @brief  USB_OTG_ResetPort : Reset Host Port
1078:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1079:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1080:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @note : (1)The application must wait at least 10 ms
1081:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *   before clearing the reset bit.
1082:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1083:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ResetPort(USB_OTG_GlobalTypeDef *USBx)
1084:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1085:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   __IO uint32_t hprt0 = 0;
1086:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1087:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1088:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1089:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1090:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1091:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 &= ~(USB_OTG_HPRT_PENA    | USB_OTG_HPRT_PCDET |\
1092:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB_OTG_HPRT_PENCHNG | USB_OTG_HPRT_POCCHNG );
1093:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1094:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HPRT0 = (USB_OTG_HPRT_PRST | hprt0);  
1095:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   HAL_Delay (10);                                /* See Note #1 */
1096:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HPRT0 = ((~USB_OTG_HPRT_PRST) & hprt0); 
1097:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1098:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1099:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1100:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1101:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DriveVbus : activate or de-activate vbus
1102:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  state : VBUS state
1103:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1104:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           0 : VBUS Active 
1105:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *           1 : VBUS Inactive
1106:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
1108:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DriveVbus (USB_OTG_GlobalTypeDef *USBx, uint8_t state)
1109:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1110:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   __IO uint32_t hprt0 = 0;
1111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1112:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1113:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1114:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1115:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 &= ~(USB_OTG_HPRT_PENA    | USB_OTG_HPRT_PCDET |\
1116:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****           USB_OTG_HPRT_PENCHNG | USB_OTG_HPRT_POCCHNG );
ARM GAS  /tmp/ccxRhxZv.s 			page 21


1117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1118:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((hprt0 & USB_OTG_HPRT_PPWR) == 0 ) && (state == 1 ))
1119:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1120:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HPRT0 = (USB_OTG_HPRT_PPWR | hprt0);
1121:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1122:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((hprt0 & USB_OTG_HPRT_PPWR) == USB_OTG_HPRT_PPWR) && (state == 0 ))
1123:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1124:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HPRT0 = ((~USB_OTG_HPRT_PPWR) & hprt0);
1125:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1126:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1127:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1128:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1129:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1130:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Return Host Core speed
1131:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1132:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval speed : Host speed
1133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1134:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
1135:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
1136:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_GetHostSpeed (USB_OTG_GlobalTypeDef *USBx)
1138:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1139:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   __IO uint32_t hprt0 = 0;
1140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1141:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1142:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1143:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1144:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((hprt0 & USB_OTG_HPRT_PSPD) >> 17);
1145:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1146:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1147:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1148:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Return Host Current Frame number
1149:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1150:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval current frame number
1151:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
1152:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_GetCurrentFrame (USB_OTG_GlobalTypeDef *USBx)
1153:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1154:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1155:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1156:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1157:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (USBx_HOST->HFNUM & USB_OTG_HFNUM_FRNUM);
1158:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1159:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1160:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1161:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initialize a host channel
1162:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1163:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ch_num : Channel number
1164:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1165:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : Endpoint number
1166:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 1 to 15
1167:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  dev_address : Current device address
1168:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
1169:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  speed : Current device speed
1170:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1171:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
1172:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
1173:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep_type : Endpoint Type
ARM GAS  /tmp/ccxRhxZv.s 			page 22


1174:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1175:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_CTRL: Control type
1176:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_ISOC: Isochronous type
1177:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_BULK: Bulk type
1178:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg EP_TYPE_INTR: Interrupt type
1179:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  mps : Max Packet Size
1180:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to32K
1181:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1182:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1183:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_Init(USB_OTG_GlobalTypeDef *USBx,  
1184:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t ch_num,
1185:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t epnum,
1186:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t dev_address,
1187:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t speed,
1188:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint8_t ep_type,
1189:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                               uint16_t mps)
1190:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1191:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear old interrupt conditions for this host channel. */
1192:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCINT = 0xFFFFFFFF;
1193:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1194:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable channel interrupts required for this transfer. */
1195:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   switch (ep_type) 
1196:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1197:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_CTRL:
1198:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_BULK:
1199:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |\
1200:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_STALLM |\
1201:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_TXERRM |\
1202:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_DTERRM |\
1203:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_AHBERR |\
1204:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_NAKM ;
1205:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1206:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (epnum & 0x80) 
1207:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1208:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(ch_num)->HCINTMSK |= USB_OTG_HCINTMSK_BBERRM;
1209:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1210:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1211:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1212:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_INTR:
1213:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |\
1214:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_STALLM |\
1215:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_TXERRM |\
1216:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_DTERRM |\
1217:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_NAKM   |\
1218:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_AHBERR |\
1219:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_FRMORM ;
1220:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1221:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (epnum & 0x80) 
1222:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1223:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(ch_num)->HCINTMSK |= USB_OTG_HCINTMSK_BBERRM;
1224:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1225:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1226:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1227:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1228:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_ISOC:
1229:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |\
1230:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_ACKM   |\
ARM GAS  /tmp/ccxRhxZv.s 			page 23


1231:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_AHBERR |\
1232:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCINTMSK_FRMORM ;
1233:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1234:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (epnum & 0x80) 
1235:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1236:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(ch_num)->HCINTMSK |= (USB_OTG_HCINTMSK_TXERRM | USB_OTG_HCINTMSK_BBERRM);
1237:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1238:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
1239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1240:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1241:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable the top level host channel interrupt. */
1242:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HAINTMSK |= (1 << ch_num);
1243:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1244:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Make sure host channel interrupts are enabled. */
1245:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_HCIM;
1246:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1247:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Program the HCCHAR register */
1248:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR = (((dev_address << 22) & USB_OTG_HCCHAR_DAD)  |\
1249:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              (((epnum & 0x7F)<< 11) & USB_OTG_HCCHAR_EPNUM)|\
1250:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              ((((epnum & 0x80) == 0x80)<< 15) & USB_OTG_HCCHAR_EPDIR)|\
1251:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              (((speed == HPRT0_PRTSPD_LOW_SPEED)<< 17) & USB_OTG_HCCHAR_LSDEV)|\
1252:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              ((ep_type << 18) & USB_OTG_HCCHAR_EPTYP)|\
1253:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                              (mps & USB_OTG_HCCHAR_MPSIZ));
1254:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1255:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep_type == EP_TYPE_INTR)
1256:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1257:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(ch_num)->HCCHAR |= USB_OTG_HCCHAR_ODDFRM ;
1258:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1259:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1260:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1261:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1262:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1263:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1264:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Start a transfer over a host channel
1265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1266:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  hc : pointer to host channel structure
1267:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1268:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1269:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined   (__CC_ARM) /*!< ARM Compiler */
1270:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #pragma O0
1271:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #elif defined (__GNUC__) /*!< GNU Compiler */
1272:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #pragma GCC optimize ("O0")
1273:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #endif /* __CC_ARM */
1274:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_StartXfer(USB_OTG_GlobalTypeDef *USBx, USB_OTG_HCTypeDef *hc)
1275:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1276:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t  is_oddframe = 0;
1277:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t len_words = 0;
1278:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t num_packets = 0;
1279:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t max_hc_pkt_count = 256;
1280:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
1281:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1282:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Compute the expected number of packets associated to the transfer */
1283:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (hc->xfer_len > 0)
1284:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1285:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     num_packets = (hc->xfer_len + hc->max_packet - 1) / hc->max_packet;
1286:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1287:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (num_packets > max_hc_pkt_count)
ARM GAS  /tmp/ccxRhxZv.s 			page 24


1288:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1289:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       num_packets = max_hc_pkt_count;
1290:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       hc->xfer_len = num_packets * hc->max_packet;
1291:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1292:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1293:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1294:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1295:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     num_packets = 1;
1296:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1297:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (hc->ep_is_in)
1298:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1299:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     hc->xfer_len = num_packets * hc->max_packet;
1300:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1301:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1302:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Initialize the HCTSIZn register */
1303:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCTSIZ = (((hc->xfer_len) & USB_OTG_HCTSIZ_XFRSIZ)) |\
1304:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     ((num_packets << 19) & USB_OTG_HCTSIZ_PKTCNT) |\
1305:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       (((hc->data_pid) << 29) & USB_OTG_HCTSIZ_DPID);
1306:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1307:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   is_oddframe = (USBx_HOST->HFNUM & 0x01) ? 0 : 1;
1308:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCCHAR &= ~USB_OTG_HCCHAR_ODDFRM;
1309:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCCHAR |= (is_oddframe << 29);
1310:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1311:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set host channel enable */
1312:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx_HC(hc->ch_num)->HCCHAR;
1313:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= ~USB_OTG_HCCHAR_CHDIS;
1314:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg |= USB_OTG_HCCHAR_CHENA;
1315:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(hc->ch_num)->HCCHAR = tmpreg;
1316:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1317:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((hc->ep_is_in == 0) && (hc->xfer_len > 0))
1318:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1319:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     switch(hc->ep_type) 
1320:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1321:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Non periodic transfer */
1322:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_CTRL:
1323:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_BULK:
1324:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len_words = (hc->xfer_len + 3) / 4;
1325:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1326:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* check if there is enough space in FIFO space */
1327:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if(len_words > (USBx->HNPTXSTS & 0xFFFF))
1328:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1329:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* need to process data in nptxfempty interrupt */
1330:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx->GINTMSK |= USB_OTG_GINTMSK_NPTXFEM;
1331:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1332:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
1333:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1334:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Periodic transfer */
1335:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_INTR:
1336:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     case EP_TYPE_ISOC:
1337:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len_words = (hc->xfer_len + 3) / 4;
1338:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* check if there is enough space in FIFO space */
1339:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if(len_words > (USBx_HOST->HPTXSTS & 0xFFFF)) /* split the transfer */
1340:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1341:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* need to process data in ptxfempty interrupt */
1342:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         USBx->GINTMSK |= USB_OTG_GINTMSK_PTXFEM;          
1343:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1344:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
ARM GAS  /tmp/ccxRhxZv.s 			page 25


1345:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1346:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     default:
1347:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
1348:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1349:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1350:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Write packet into the Tx FIFO. */
1351:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB_WritePacket(USBx, hc->xfer_buff, hc->ch_num, hc->xfer_len);
1352:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1353:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1354:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1355:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1356:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1357:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1358:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief Read all host channel interrupts status
1359:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1360:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1361:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1362:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_HC_ReadInterrupt (USB_OTG_GlobalTypeDef *USBx)
1363:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1364:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1365:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1366:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1367:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((USBx_HOST->HAINT) & 0xFFFF);
1368:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1369:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1370:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1371:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Halt a host channel
1372:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1373:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  hc_num : Host Channel number
1374:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1375:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1376:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1377:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_Halt(USB_OTG_GlobalTypeDef *USBx , uint8_t hc_num)
1378:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1379:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
1380:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1381:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1382:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1383:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Check for space in the request queue to issue the halt. */
1384:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (((((USBx_HC(hc_num)->HCCHAR) & USB_OTG_HCCHAR_EPTYP) >> 18) == HCCHAR_CTRL) ||
1385:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      (((((USBx_HC(hc_num)->HCCHAR) & USB_OTG_HCCHAR_EPTYP) >> 18) == HCCHAR_BULK)))
1386:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1387:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHDIS;
1388:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1389:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx->HNPTXSTS & 0xFFFF) == 0)
1390:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1391:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_CHENA;
1392:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1393:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_EPDIR;
1394:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       do
1395:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1396:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         if (++count > 1000)
1397:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         {
1398:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****           break;
1399:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         }
1400:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       } 
1401:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       while ((USBx_HC(hc_num)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
ARM GAS  /tmp/ccxRhxZv.s 			page 26


1402:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1403:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1404:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1405:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1406:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1407:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1408:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1409:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1410:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHDIS;
1411:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1412:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if ((USBx_HOST->HPTXSTS & 0xFFFF) == 0)
1413:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1414:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_CHENA;
1415:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1416:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USBx_HC(hc_num)->HCCHAR &= ~USB_OTG_HCCHAR_EPDIR;
1417:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       do
1418:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1419:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         if (++count > 1000)
1420:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         {
1421:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****           break;
1422:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         }
1423:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       } 
1424:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       while ((USBx_HC(hc_num)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1425:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1426:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1427:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1428:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****        USBx_HC(hc_num)->HCCHAR |= USB_OTG_HCCHAR_CHENA; 
1429:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1430:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1431:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1432:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1433:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1434:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1435:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1436:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initiate Do Ping protocol
1437:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1438:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  hc_num : Host Channel number
1439:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1440:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1441:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1442:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DoPing(USB_OTG_GlobalTypeDef *USBx , uint8_t ch_num)
1443:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1444:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t  num_packets = 1;
1445:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
1446:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1447:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1448:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1449:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCTSIZ = ((num_packets << 19) & USB_OTG_HCTSIZ_PKTCNT) |\
1450:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****                                 USB_OTG_HCTSIZ_DOPING;
1451:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1452:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set host channel enable */
1453:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx_HC(ch_num)->HCCHAR;
1454:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg &= ~USB_OTG_HCCHAR_CHDIS;
1455:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg |= USB_OTG_HCCHAR_CHENA;
1456:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR = tmpreg;
1457:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1458:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;  
ARM GAS  /tmp/ccxRhxZv.s 			page 27


1459:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1460:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1461:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1462:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Stop Host Core
1463:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1464:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL state
1465:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1466:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_StopHost(USB_OTG_GlobalTypeDef *USBx)
1467:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1468:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint8_t index;
1469:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t count = 0;
1470:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t value = 0;
1471:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1472:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_DisableGlobalInt(USBx);
1473:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1474:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Flush FIFO */
1475:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushTxFifo(USBx, 0x10);
1476:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_FlushRxFifo(USBx);
1477:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1478:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Flush out any leftover queued requests. */
1479:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index <= 15; index++)
1480:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1481:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value = USBx_HC(index)->HCCHAR;
1482:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value |=  USB_OTG_HCCHAR_CHDIS;
1483:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_CHENA;
1484:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_EPDIR;
1485:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCCHAR = value;
1486:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1487:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1488:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Halt all channels to put them into a known state. */
1489:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = 0; index <= 15; index++)
1490:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1491:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value = USBx_HC(index)->HCCHAR ;
1492:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value |= USB_OTG_HCCHAR_CHDIS;
1493:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value |= USB_OTG_HCCHAR_CHENA;
1494:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_EPDIR;
1495:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_HC(index)->HCCHAR = value;
1496:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1497:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     do
1498:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1499:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (++count > 1000)
1500:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1501:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         break;
1502:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1503:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1504:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     while ((USBx_HC(index)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1505:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1506:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1507:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear any pending Host interrupts */
1508:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx_HOST->HAINT = 0xFFFFFFFF;
1509:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->GINTSTS = 0xFFFFFFFF;
1510:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_EnableGlobalInt(USBx);
1511:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1512:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1513:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1514:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1515:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
ARM GAS  /tmp/ccxRhxZv.s 			page 28


1516:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ActivateRemoteWakeup : active remote wakeup signalling
1517:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1518:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1519:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1520:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateRemoteWakeup(USB_OTG_GlobalTypeDef *USBx)
1521:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1522:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1523:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1524:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if((USBx_DEVICE->DSTS & USB_OTG_DSTS_SUSPSTS) == USB_OTG_DSTS_SUSPSTS)
1525:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1526:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* active Remote wakeup signalling */
1527:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USBx_DEVICE->DCTL |= USB_OTG_DCTL_RWUSIG;
1528:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1529:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1530:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1531:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1532:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1533:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DeActivateRemoteWakeup : de-active remote wakeup signalling
1534:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1535:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1536:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1537:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeActivateRemoteWakeup(USB_OTG_GlobalTypeDef *USBx)
1538:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
1539:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1540:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1541:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* active Remote wakeup signalling */
1542:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    USBx_DEVICE->DCTL &= ~(USB_OTG_DCTL_RWUSIG);
1543:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
1544:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
1545:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1546:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #endif /* USB_OTG_FS */
1547:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1548:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /*==============================================================================
1549:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     USB Device FS peripheral available on STM32F102xx and STM32F103xx devices 
1550:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** ==============================================================================*/
1551:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** #if defined (USB)
1552:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1553:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Initializes the USB Core
1554:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx: USB Instance
1555:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg : pointer to a USB_CfgTypeDef structure that contains
1556:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1557:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1558:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1559:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_CoreInit(USB_TypeDef *USBx, USB_CfgTypeDef cfg)
1560:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
  26              		.loc 1 1560 0
  27              		.cfi_startproc
  28              		@ args = 36, pretend = 16, frame = 8
  29              		@ frame_needed = 1, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31 0000 84B0     		sub	sp, sp, #16
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34 0002 80B4     		push	{r7}
  35              	.LCFI1:
  36              		.cfi_def_cfa_offset 20
  37              		.cfi_offset 7, -20
ARM GAS  /tmp/ccxRhxZv.s 			page 29


  38 0004 83B0     		sub	sp, sp, #12
  39              	.LCFI2:
  40              		.cfi_def_cfa_offset 32
  41 0006 00AF     		add	r7, sp, #0
  42              	.LCFI3:
  43              		.cfi_def_cfa_register 7
  44 0008 7860     		str	r0, [r7, #4]
  45 000a 07F11400 		add	r0, r7, #20
  46 000e 80E80E00 		stm	r0, {r1, r2, r3}
1561:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1562:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1563:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(cfg);
1564:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1565:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1566:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1567:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1568:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
  47              		.loc 1 1568 0
  48 0012 0023     		movs	r3, #0
1569:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
  49              		.loc 1 1569 0
  50 0014 1846     		mov	r0, r3
  51 0016 0C37     		adds	r7, r7, #12
  52              	.LCFI4:
  53              		.cfi_def_cfa_offset 20
  54 0018 BD46     		mov	sp, r7
  55              	.LCFI5:
  56              		.cfi_def_cfa_register 13
  57              		@ sp needed
  58 001a 80BC     		pop	{r7}
  59              	.LCFI6:
  60              		.cfi_restore 7
  61              		.cfi_def_cfa_offset 16
  62 001c 04B0     		add	sp, sp, #16
  63              	.LCFI7:
  64              		.cfi_def_cfa_offset 0
  65 001e 7047     		bx	lr
  66              		.cfi_endproc
  67              	.LFE66:
  69              		.section	.text.USB_EnableGlobalInt,"ax",%progbits
  70              		.align	1
  71              		.global	USB_EnableGlobalInt
  72              		.syntax unified
  73              		.thumb
  74              		.thumb_func
  75              		.fpu softvfp
  77              	USB_EnableGlobalInt:
  78              	.LFB67:
1570:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1571:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1572:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EnableGlobalInt
1573:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Enables the controller's Global Int in the AHB Config reg
1574:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1575:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1576:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1577:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EnableGlobalInt(USB_TypeDef *USBx)
1578:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
ARM GAS  /tmp/ccxRhxZv.s 			page 30


  79              		.loc 1 1578 0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 16
  82              		@ frame_needed = 1, uses_anonymous_args = 0
  83              		@ link register save eliminated.
  84 0000 80B4     		push	{r7}
  85              	.LCFI8:
  86              		.cfi_def_cfa_offset 4
  87              		.cfi_offset 7, -4
  88 0002 85B0     		sub	sp, sp, #20
  89              	.LCFI9:
  90              		.cfi_def_cfa_offset 24
  91 0004 00AF     		add	r7, sp, #0
  92              	.LCFI10:
  93              		.cfi_def_cfa_register 7
  94 0006 7860     		str	r0, [r7, #4]
1579:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t winterruptmask = 0;
  95              		.loc 1 1579 0
  96 0008 0023     		movs	r3, #0
  97 000a FB60     		str	r3, [r7, #12]
1580:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1581:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set winterruptmask variable */
1582:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   winterruptmask = USB_CNTR_CTRM  | USB_CNTR_WKUPM | USB_CNTR_SUSPM | USB_CNTR_ERRM \
  98              		.loc 1 1582 0
  99 000c 4FF43F43 		mov	r3, #48896
 100 0010 FB60     		str	r3, [r7, #12]
1583:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****      | USB_CNTR_SOFM | USB_CNTR_ESOFM | USB_CNTR_RESETM;
1584:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1585:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set interrupt mask */
1586:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR |= winterruptmask;
 101              		.loc 1 1586 0
 102 0012 7B68     		ldr	r3, [r7, #4]
 103 0014 B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 104 0018 9AB2     		uxth	r2, r3
 105 001a FB68     		ldr	r3, [r7, #12]
 106 001c 9BB2     		uxth	r3, r3
 107 001e 1343     		orrs	r3, r3, r2
 108 0020 9AB2     		uxth	r2, r3
 109 0022 7B68     		ldr	r3, [r7, #4]
 110 0024 A3F84020 		strh	r2, [r3, #64]	@ movhi
1587:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1588:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 111              		.loc 1 1588 0
 112 0028 0023     		movs	r3, #0
1589:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 113              		.loc 1 1589 0
 114 002a 1846     		mov	r0, r3
 115 002c 1437     		adds	r7, r7, #20
 116              	.LCFI11:
 117              		.cfi_def_cfa_offset 4
 118 002e BD46     		mov	sp, r7
 119              	.LCFI12:
 120              		.cfi_def_cfa_register 13
 121              		@ sp needed
 122 0030 80BC     		pop	{r7}
 123              	.LCFI13:
 124              		.cfi_restore 7
ARM GAS  /tmp/ccxRhxZv.s 			page 31


 125              		.cfi_def_cfa_offset 0
 126 0032 7047     		bx	lr
 127              		.cfi_endproc
 128              	.LFE67:
 130              		.section	.text.USB_DisableGlobalInt,"ax",%progbits
 131              		.align	1
 132              		.global	USB_DisableGlobalInt
 133              		.syntax unified
 134              		.thumb
 135              		.thumb_func
 136              		.fpu softvfp
 138              	USB_DisableGlobalInt:
 139              	.LFB68:
1590:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1591:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1592:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DisableGlobalInt
1593:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         Disable the controller's Global Int in the AHB Config reg
1594:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1595:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1596:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** */
1597:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DisableGlobalInt(USB_TypeDef *USBx)
1598:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 140              		.loc 1 1598 0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 16
 143              		@ frame_needed = 1, uses_anonymous_args = 0
 144              		@ link register save eliminated.
 145 0000 80B4     		push	{r7}
 146              	.LCFI14:
 147              		.cfi_def_cfa_offset 4
 148              		.cfi_offset 7, -4
 149 0002 85B0     		sub	sp, sp, #20
 150              	.LCFI15:
 151              		.cfi_def_cfa_offset 24
 152 0004 00AF     		add	r7, sp, #0
 153              	.LCFI16:
 154              		.cfi_def_cfa_register 7
 155 0006 7860     		str	r0, [r7, #4]
1599:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t winterruptmask = 0;
 156              		.loc 1 1599 0
 157 0008 0023     		movs	r3, #0
 158 000a FB60     		str	r3, [r7, #12]
1600:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1601:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Set winterruptmask variable */
1602:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   winterruptmask = USB_CNTR_CTRM  | USB_CNTR_WKUPM | USB_CNTR_SUSPM | USB_CNTR_ERRM \
 159              		.loc 1 1602 0
 160 000c 4FF43D43 		mov	r3, #48384
 161 0010 FB60     		str	r3, [r7, #12]
1603:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     | USB_CNTR_ESOFM | USB_CNTR_RESETM;
1604:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1605:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Clear interrupt mask */
1606:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR &= ~winterruptmask;
 162              		.loc 1 1606 0
 163 0012 7B68     		ldr	r3, [r7, #4]
 164 0014 B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 165 0018 9AB2     		uxth	r2, r3
 166 001a FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccxRhxZv.s 			page 32


 167 001c 9BB2     		uxth	r3, r3
 168 001e DB43     		mvns	r3, r3
 169 0020 9BB2     		uxth	r3, r3
 170 0022 1340     		ands	r3, r3, r2
 171 0024 9AB2     		uxth	r2, r3
 172 0026 7B68     		ldr	r3, [r7, #4]
 173 0028 A3F84020 		strh	r2, [r3, #64]	@ movhi
1607:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1608:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 174              		.loc 1 1608 0
 175 002c 0023     		movs	r3, #0
1609:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 176              		.loc 1 1609 0
 177 002e 1846     		mov	r0, r3
 178 0030 1437     		adds	r7, r7, #20
 179              	.LCFI17:
 180              		.cfi_def_cfa_offset 4
 181 0032 BD46     		mov	sp, r7
 182              	.LCFI18:
 183              		.cfi_def_cfa_register 13
 184              		@ sp needed
 185 0034 80BC     		pop	{r7}
 186              	.LCFI19:
 187              		.cfi_restore 7
 188              		.cfi_def_cfa_offset 0
 189 0036 7047     		bx	lr
 190              		.cfi_endproc
 191              	.LFE68:
 193              		.section	.text.USB_SetCurrentMode,"ax",%progbits
 194              		.align	1
 195              		.global	USB_SetCurrentMode
 196              		.syntax unified
 197              		.thumb
 198              		.thumb_func
 199              		.fpu softvfp
 201              	USB_SetCurrentMode:
 202              	.LFB69:
1610:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1611:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1612:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetCurrentMode : Set functional mode
1613:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1614:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  mode :  current core mode
1615:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be one of the these values:
1616:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *            @arg USB_DEVICE_MODE: Peripheral mode mode
1617:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1618:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1619:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_SetCurrentMode(USB_TypeDef *USBx , USB_ModeTypeDef mode)
1620:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 203              		.loc 1 1620 0
 204              		.cfi_startproc
 205              		@ args = 0, pretend = 0, frame = 8
 206              		@ frame_needed = 1, uses_anonymous_args = 0
 207              		@ link register save eliminated.
 208 0000 80B4     		push	{r7}
 209              	.LCFI20:
 210              		.cfi_def_cfa_offset 4
 211              		.cfi_offset 7, -4
ARM GAS  /tmp/ccxRhxZv.s 			page 33


 212 0002 83B0     		sub	sp, sp, #12
 213              	.LCFI21:
 214              		.cfi_def_cfa_offset 16
 215 0004 00AF     		add	r7, sp, #0
 216              	.LCFI22:
 217              		.cfi_def_cfa_register 7
 218 0006 7860     		str	r0, [r7, #4]
 219 0008 0B46     		mov	r3, r1
 220 000a FB70     		strb	r3, [r7, #3]
1621:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1622:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1623:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(mode);
1624:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1625:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1626:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1627:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1628:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 221              		.loc 1 1628 0
 222 000c 0023     		movs	r3, #0
1629:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 223              		.loc 1 1629 0
 224 000e 1846     		mov	r0, r3
 225 0010 0C37     		adds	r7, r7, #12
 226              	.LCFI23:
 227              		.cfi_def_cfa_offset 4
 228 0012 BD46     		mov	sp, r7
 229              	.LCFI24:
 230              		.cfi_def_cfa_register 13
 231              		@ sp needed
 232 0014 80BC     		pop	{r7}
 233              	.LCFI25:
 234              		.cfi_restore 7
 235              		.cfi_def_cfa_offset 0
 236 0016 7047     		bx	lr
 237              		.cfi_endproc
 238              	.LFE69:
 240              		.section	.text.USB_DevInit,"ax",%progbits
 241              		.align	1
 242              		.global	USB_DevInit
 243              		.syntax unified
 244              		.thumb
 245              		.thumb_func
 246              		.fpu softvfp
 248              	USB_DevInit:
 249              	.LFB70:
1630:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1631:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1632:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevInit : Initializes the USB controller registers 
1633:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         for device mode
1634:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1635:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_CfgTypeDef structure that contains
1636:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1637:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1638:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1639:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DevInit (USB_TypeDef *USBx, USB_CfgTypeDef cfg)
1640:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 250              		.loc 1 1640 0
ARM GAS  /tmp/ccxRhxZv.s 			page 34


 251              		.cfi_startproc
 252              		@ args = 36, pretend = 16, frame = 8
 253              		@ frame_needed = 1, uses_anonymous_args = 0
 254 0000 84B0     		sub	sp, sp, #16
 255              	.LCFI26:
 256              		.cfi_def_cfa_offset 16
 257 0002 80B5     		push	{r7, lr}
 258              	.LCFI27:
 259              		.cfi_def_cfa_offset 24
 260              		.cfi_offset 7, -24
 261              		.cfi_offset 14, -20
 262 0004 82B0     		sub	sp, sp, #8
 263              	.LCFI28:
 264              		.cfi_def_cfa_offset 32
 265 0006 00AF     		add	r7, sp, #0
 266              	.LCFI29:
 267              		.cfi_def_cfa_register 7
 268 0008 7860     		str	r0, [r7, #4]
 269 000a 07F11400 		add	r0, r7, #20
 270 000e 80E80E00 		stm	r0, {r1, r2, r3}
1641:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1642:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(cfg);
1643:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1644:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Init Device */
1645:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*CNTR_FRES = 1*/
1646:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = USB_CNTR_FRES;
 271              		.loc 1 1646 0
 272 0012 7B68     		ldr	r3, [r7, #4]
 273 0014 0122     		movs	r2, #1
 274 0016 A3F84020 		strh	r2, [r3, #64]	@ movhi
1647:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1648:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*CNTR_FRES = 0*/
1649:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = 0;
 275              		.loc 1 1649 0
 276 001a 7B68     		ldr	r3, [r7, #4]
 277 001c 0022     		movs	r2, #0
 278 001e A3F84020 		strh	r2, [r3, #64]	@ movhi
1650:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****  
1651:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Clear pending interrupts*/
1652:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->ISTR = 0;
 279              		.loc 1 1652 0
 280 0022 7B68     		ldr	r3, [r7, #4]
 281 0024 0022     		movs	r2, #0
 282 0026 A3F84420 		strh	r2, [r3, #68]	@ movhi
1653:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1654:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Set Btable Address*/
1655:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->BTABLE = BTABLE_ADDRESS;
 283              		.loc 1 1655 0
 284 002a 7B68     		ldr	r3, [r7, #4]
 285 002c 0022     		movs	r2, #0
 286 002e A3F85020 		strh	r2, [r3, #80]	@ movhi
1656:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1657:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Enable USB Device Interrupt mask */
1658:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USB_EnableGlobalInt(USBx);
 287              		.loc 1 1658 0
 288 0032 7868     		ldr	r0, [r7, #4]
 289 0034 FFF7FEFF 		bl	USB_EnableGlobalInt
ARM GAS  /tmp/ccxRhxZv.s 			page 35


1659:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1660:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 290              		.loc 1 1660 0
 291 0038 0023     		movs	r3, #0
1661:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 292              		.loc 1 1661 0
 293 003a 1846     		mov	r0, r3
 294 003c 0837     		adds	r7, r7, #8
 295              	.LCFI30:
 296              		.cfi_def_cfa_offset 24
 297 003e BD46     		mov	sp, r7
 298              	.LCFI31:
 299              		.cfi_def_cfa_register 13
 300              		@ sp needed
 301 0040 BDE88040 		pop	{r7, lr}
 302              	.LCFI32:
 303              		.cfi_restore 14
 304              		.cfi_restore 7
 305              		.cfi_def_cfa_offset 16
 306 0044 04B0     		add	sp, sp, #16
 307              	.LCFI33:
 308              		.cfi_def_cfa_offset 0
 309 0046 7047     		bx	lr
 310              		.cfi_endproc
 311              	.LFE70:
 313              		.section	.text.USB_FlushTxFifo,"ax",%progbits
 314              		.align	1
 315              		.global	USB_FlushTxFifo
 316              		.syntax unified
 317              		.thumb
 318              		.thumb_func
 319              		.fpu softvfp
 321              	USB_FlushTxFifo:
 322              	.LFB71:
1662:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1663:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1664:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_FlushTxFifo : Flush a Tx FIFO
1665:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1666:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  num : FIFO number
1667:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1668:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             15 means Flush all Tx FIFOs
1669:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1670:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1671:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushTxFifo (USB_TypeDef *USBx, uint32_t num)
1672:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 323              		.loc 1 1672 0
 324              		.cfi_startproc
 325              		@ args = 0, pretend = 0, frame = 8
 326              		@ frame_needed = 1, uses_anonymous_args = 0
 327              		@ link register save eliminated.
 328 0000 80B4     		push	{r7}
 329              	.LCFI34:
 330              		.cfi_def_cfa_offset 4
 331              		.cfi_offset 7, -4
 332 0002 83B0     		sub	sp, sp, #12
 333              	.LCFI35:
 334              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccxRhxZv.s 			page 36


 335 0004 00AF     		add	r7, sp, #0
 336              	.LCFI36:
 337              		.cfi_def_cfa_register 7
 338 0006 7860     		str	r0, [r7, #4]
 339 0008 3960     		str	r1, [r7]
1673:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1674:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1675:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(num);
1676:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1677:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1678:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1679:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1680:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 340              		.loc 1 1680 0
 341 000a 0023     		movs	r3, #0
1681:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 342              		.loc 1 1681 0
 343 000c 1846     		mov	r0, r3
 344 000e 0C37     		adds	r7, r7, #12
 345              	.LCFI37:
 346              		.cfi_def_cfa_offset 4
 347 0010 BD46     		mov	sp, r7
 348              	.LCFI38:
 349              		.cfi_def_cfa_register 13
 350              		@ sp needed
 351 0012 80BC     		pop	{r7}
 352              	.LCFI39:
 353              		.cfi_restore 7
 354              		.cfi_def_cfa_offset 0
 355 0014 7047     		bx	lr
 356              		.cfi_endproc
 357              	.LFE71:
 359              		.section	.text.USB_FlushRxFifo,"ax",%progbits
 360              		.align	1
 361              		.global	USB_FlushRxFifo
 362              		.syntax unified
 363              		.thumb
 364              		.thumb_func
 365              		.fpu softvfp
 367              	USB_FlushRxFifo:
 368              	.LFB72:
1682:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1683:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1684:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_FlushRxFifo : Flush Rx FIFO
1685:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1686:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1687:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1688:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushRxFifo(USB_TypeDef *USBx)
1689:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 369              		.loc 1 1689 0
 370              		.cfi_startproc
 371              		@ args = 0, pretend = 0, frame = 8
 372              		@ frame_needed = 1, uses_anonymous_args = 0
 373              		@ link register save eliminated.
 374 0000 80B4     		push	{r7}
 375              	.LCFI40:
 376              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccxRhxZv.s 			page 37


 377              		.cfi_offset 7, -4
 378 0002 83B0     		sub	sp, sp, #12
 379              	.LCFI41:
 380              		.cfi_def_cfa_offset 16
 381 0004 00AF     		add	r7, sp, #0
 382              	.LCFI42:
 383              		.cfi_def_cfa_register 7
 384 0006 7860     		str	r0, [r7, #4]
1690:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1691:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1692:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1693:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1694:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1695:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1696:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 385              		.loc 1 1696 0
 386 0008 0023     		movs	r3, #0
1697:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 387              		.loc 1 1697 0
 388 000a 1846     		mov	r0, r3
 389 000c 0C37     		adds	r7, r7, #12
 390              	.LCFI43:
 391              		.cfi_def_cfa_offset 4
 392 000e BD46     		mov	sp, r7
 393              	.LCFI44:
 394              		.cfi_def_cfa_register 13
 395              		@ sp needed
 396 0010 80BC     		pop	{r7}
 397              	.LCFI45:
 398              		.cfi_restore 7
 399              		.cfi_def_cfa_offset 0
 400 0012 7047     		bx	lr
 401              		.cfi_endproc
 402              	.LFE72:
 404              		.section	.text.USB_ActivateEndpoint,"ax",%progbits
 405              		.align	1
 406              		.global	USB_ActivateEndpoint
 407              		.syntax unified
 408              		.thumb
 409              		.thumb_func
 410              		.fpu softvfp
 412              	USB_ActivateEndpoint:
 413              	.LFB73:
1698:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1699:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1700:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Activate and configure an endpoint
1701:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1702:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1703:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1704:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1705:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateEndpoint(USB_TypeDef *USBx, USB_EPTypeDef *ep)
1706:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 414              		.loc 1 1706 0
 415              		.cfi_startproc
 416              		@ args = 0, pretend = 0, frame = 16
 417              		@ frame_needed = 1, uses_anonymous_args = 0
 418              		@ link register save eliminated.
ARM GAS  /tmp/ccxRhxZv.s 			page 38


 419 0000 90B4     		push	{r4, r7}
 420              	.LCFI46:
 421              		.cfi_def_cfa_offset 8
 422              		.cfi_offset 4, -8
 423              		.cfi_offset 7, -4
 424 0002 84B0     		sub	sp, sp, #16
 425              	.LCFI47:
 426              		.cfi_def_cfa_offset 24
 427 0004 00AF     		add	r7, sp, #0
 428              	.LCFI48:
 429              		.cfi_def_cfa_register 7
 430 0006 7860     		str	r0, [r7, #4]
 431 0008 3960     		str	r1, [r7]
1707:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* initialize Endpoint */
1708:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   switch (ep->type)
 432              		.loc 1 1708 0
 433 000a 3B68     		ldr	r3, [r7]
 434 000c DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 435 000e 032B     		cmp	r3, #3
 436 0010 5FD8     		bhi	.L39
 437 0012 01A2     		adr	r2, .L18
 438 0014 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 439              		.p2align 2
 440              	.L18:
 441 0018 29000000 		.word	.L17+1
 442 001c A7000000 		.word	.L19+1
 443 0020 55000000 		.word	.L20+1
 444 0024 7B000000 		.word	.L21+1
 445              		.p2align 1
 446              	.L17:
1709:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1710:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_CTRL:
1711:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_CONTROL);
 447              		.loc 1 1711 0
 448 0028 7A68     		ldr	r2, [r7, #4]
 449 002a 3B68     		ldr	r3, [r7]
 450 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 451 002e 9B00     		lsls	r3, r3, #2
 452 0030 1344     		add	r3, r3, r2
 453 0032 1B88     		ldrh	r3, [r3]	@ movhi
 454 0034 9BB2     		uxth	r3, r3
 455 0036 23F4EC43 		bic	r3, r3, #30208
 456 003a 23F07003 		bic	r3, r3, #112
 457 003e 9AB2     		uxth	r2, r3
 458 0040 7968     		ldr	r1, [r7, #4]
 459 0042 3B68     		ldr	r3, [r7]
 460 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 461 0046 9B00     		lsls	r3, r3, #2
 462 0048 0B44     		add	r3, r3, r1
 463 004a 42F40072 		orr	r2, r2, #512
 464 004e 92B2     		uxth	r2, r2
 465 0050 1A80     		strh	r2, [r3]	@ movhi
1712:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 466              		.loc 1 1712 0
 467 0052 3FE0     		b	.L22
 468              	.L20:
1713:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_BULK:
ARM GAS  /tmp/ccxRhxZv.s 			page 39


1714:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_BULK);
 469              		.loc 1 1714 0
 470 0054 7A68     		ldr	r2, [r7, #4]
 471 0056 3B68     		ldr	r3, [r7]
 472 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 473 005a 9B00     		lsls	r3, r3, #2
 474 005c 1344     		add	r3, r3, r2
 475 005e 1B88     		ldrh	r3, [r3]	@ movhi
 476 0060 9BB2     		uxth	r3, r3
 477 0062 7968     		ldr	r1, [r7, #4]
 478 0064 3A68     		ldr	r2, [r7]
 479 0066 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 480 0068 9200     		lsls	r2, r2, #2
 481 006a 0A44     		add	r2, r2, r1
 482 006c 23F4EC43 		bic	r3, r3, #30208
 483 0070 23F07003 		bic	r3, r3, #112
 484 0074 9BB2     		uxth	r3, r3
 485 0076 1380     		strh	r3, [r2]	@ movhi
1715:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 486              		.loc 1 1715 0
 487 0078 2CE0     		b	.L22
 488              	.L21:
1716:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_INTR:
1717:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_INTERRUPT);
 489              		.loc 1 1717 0
 490 007a 7A68     		ldr	r2, [r7, #4]
 491 007c 3B68     		ldr	r3, [r7]
 492 007e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 493 0080 9B00     		lsls	r3, r3, #2
 494 0082 1344     		add	r3, r3, r2
 495 0084 1B88     		ldrh	r3, [r3]	@ movhi
 496 0086 9BB2     		uxth	r3, r3
 497 0088 23F4EC43 		bic	r3, r3, #30208
 498 008c 23F07003 		bic	r3, r3, #112
 499 0090 9AB2     		uxth	r2, r3
 500 0092 7968     		ldr	r1, [r7, #4]
 501 0094 3B68     		ldr	r3, [r7]
 502 0096 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 503 0098 9B00     		lsls	r3, r3, #2
 504 009a 0B44     		add	r3, r3, r1
 505 009c 42F4C062 		orr	r2, r2, #1536
 506 00a0 92B2     		uxth	r2, r2
 507 00a2 1A80     		strh	r2, [r3]	@ movhi
1718:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 508              		.loc 1 1718 0
 509 00a4 16E0     		b	.L22
 510              	.L19:
1719:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   case EP_TYPE_ISOC:
1720:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EPTYPE(USBx, ep->num, USB_EP_ISOCHRONOUS);
 511              		.loc 1 1720 0
 512 00a6 7A68     		ldr	r2, [r7, #4]
 513 00a8 3B68     		ldr	r3, [r7]
 514 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 515 00ac 9B00     		lsls	r3, r3, #2
 516 00ae 1344     		add	r3, r3, r2
 517 00b0 1B88     		ldrh	r3, [r3]	@ movhi
 518 00b2 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccxRhxZv.s 			page 40


 519 00b4 23F4EC43 		bic	r3, r3, #30208
 520 00b8 23F07003 		bic	r3, r3, #112
 521 00bc 9AB2     		uxth	r2, r3
 522 00be 7968     		ldr	r1, [r7, #4]
 523 00c0 3B68     		ldr	r3, [r7]
 524 00c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 525 00c4 9B00     		lsls	r3, r3, #2
 526 00c6 0B44     		add	r3, r3, r1
 527 00c8 42F48062 		orr	r2, r2, #1024
 528 00cc 92B2     		uxth	r2, r2
 529 00ce 1A80     		strh	r2, [r3]	@ movhi
1721:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     break;
 530              		.loc 1 1721 0
 531 00d0 00E0     		b	.L22
 532              	.L39:
1722:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   default:
1723:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       break;
 533              		.loc 1 1723 0
 534 00d2 00BF     		nop
 535              	.L22:
1724:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   } 
1725:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1726:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   PCD_SET_EP_ADDRESS(USBx, ep->num, ep->num);
 536              		.loc 1 1726 0
 537 00d4 7A68     		ldr	r2, [r7, #4]
 538 00d6 3B68     		ldr	r3, [r7]
 539 00d8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 540 00da 9B00     		lsls	r3, r3, #2
 541 00dc 1344     		add	r3, r3, r2
 542 00de 1B88     		ldrh	r3, [r3]	@ movhi
 543 00e0 9AB2     		uxth	r2, r3
 544 00e2 40F60F73 		movw	r3, #3855
 545 00e6 1340     		ands	r3, r3, r2
 546 00e8 9AB2     		uxth	r2, r3
 547 00ea 3B68     		ldr	r3, [r7]
 548 00ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 549 00ee 9BB2     		uxth	r3, r3
 550 00f0 1343     		orrs	r3, r3, r2
 551 00f2 99B2     		uxth	r1, r3
 552 00f4 7A68     		ldr	r2, [r7, #4]
 553 00f6 3B68     		ldr	r3, [r7]
 554 00f8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 555 00fa 9B00     		lsls	r3, r3, #2
 556 00fc 1A44     		add	r2, r2, r3
 557 00fe 754B     		ldr	r3, .L40
 558 0100 0B43     		orrs	r3, r3, r1
 559 0102 9BB2     		uxth	r3, r3
 560 0104 1380     		strh	r3, [r2]	@ movhi
1727:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1728:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->doublebuffer == 0) 
 561              		.loc 1 1728 0
 562 0106 3B68     		ldr	r3, [r7]
 563 0108 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 564 010a 002B     		cmp	r3, #0
 565 010c 40F0E880 		bne	.L23
1729:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1730:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in)
ARM GAS  /tmp/ccxRhxZv.s 			page 41


 566              		.loc 1 1730 0
 567 0110 3B68     		ldr	r3, [r7]
 568 0112 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 569 0114 002B     		cmp	r3, #0
 570 0116 4CD0     		beq	.L24
1731:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1732:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Transmit buffer address */
1733:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_ADDRESS(USBx, ep->num, ep->pmaadress);
 571              		.loc 1 1733 0
 572 0118 3B68     		ldr	r3, [r7]
 573 011a 9B88     		ldrh	r3, [r3, #4]
 574 011c 5B08     		lsrs	r3, r3, #1
 575 011e 9BB2     		uxth	r3, r3
 576 0120 5900     		lsls	r1, r3, #1
 577 0122 7B68     		ldr	r3, [r7, #4]
 578 0124 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 579 0128 9BB2     		uxth	r3, r3
 580 012a 1A46     		mov	r2, r3
 581 012c 3B68     		ldr	r3, [r7]
 582 012e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 583 0130 DB00     		lsls	r3, r3, #3
 584 0132 1344     		add	r3, r3, r2
 585 0134 5A00     		lsls	r2, r3, #1
 586 0136 7B68     		ldr	r3, [r7, #4]
 587 0138 1344     		add	r3, r3, r2
 588 013a 03F58063 		add	r3, r3, #1024
 589 013e 0A46     		mov	r2, r1
 590 0140 1A60     		str	r2, [r3]
1734:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 591              		.loc 1 1734 0
 592 0142 7A68     		ldr	r2, [r7, #4]
 593 0144 3B68     		ldr	r3, [r7]
 594 0146 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 595 0148 9B00     		lsls	r3, r3, #2
 596 014a 1344     		add	r3, r3, r2
 597 014c 1B88     		ldrh	r3, [r3]	@ movhi
 598 014e 9BB2     		uxth	r3, r3
 599 0150 03F04003 		and	r3, r3, #64
 600 0154 002B     		cmp	r3, #0
 601 0156 13D0     		beq	.L25
 602              		.loc 1 1734 0 is_stmt 0 discriminator 1
 603 0158 7A68     		ldr	r2, [r7, #4]
 604 015a 3B68     		ldr	r3, [r7]
 605 015c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 606 015e 9B00     		lsls	r3, r3, #2
 607 0160 1344     		add	r3, r3, r2
 608 0162 1B88     		ldrh	r3, [r3]	@ movhi
 609 0164 9AB2     		uxth	r2, r3
 610 0166 40F60F73 		movw	r3, #3855
 611 016a 1340     		ands	r3, r3, r2
 612 016c 99B2     		uxth	r1, r3
 613 016e 7A68     		ldr	r2, [r7, #4]
 614 0170 3B68     		ldr	r3, [r7]
 615 0172 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 616 0174 9B00     		lsls	r3, r3, #2
 617 0176 1A44     		add	r2, r2, r3
 618 0178 574B     		ldr	r3, .L40+4
ARM GAS  /tmp/ccxRhxZv.s 			page 42


 619 017a 0B43     		orrs	r3, r3, r1
 620 017c 9BB2     		uxth	r3, r3
 621 017e 1380     		strh	r3, [r2]	@ movhi
 622              	.L25:
 623              	.LBB2:
1735:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure NAK status for the Endpoint*/
1736:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_NAK); 
 624              		.loc 1 1736 0 is_stmt 1
 625 0180 7A68     		ldr	r2, [r7, #4]
 626 0182 3B68     		ldr	r3, [r7]
 627 0184 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 628 0186 9B00     		lsls	r3, r3, #2
 629 0188 1344     		add	r3, r3, r2
 630 018a 1B88     		ldrh	r3, [r3]	@ movhi
 631 018c 9BB2     		uxth	r3, r3
 632 018e 23F4E043 		bic	r3, r3, #28672
 633 0192 23F04003 		bic	r3, r3, #64
 634 0196 9CB2     		uxth	r4, r3
 635 0198 84F02003 		eor	r3, r4, #32
 636 019c 9CB2     		uxth	r4, r3
 637 019e 7A68     		ldr	r2, [r7, #4]
 638 01a0 3B68     		ldr	r3, [r7]
 639 01a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 640 01a4 9B00     		lsls	r3, r3, #2
 641 01a6 1A44     		add	r2, r2, r3
 642 01a8 4A4B     		ldr	r3, .L40
 643 01aa 2343     		orrs	r3, r3, r4
 644 01ac 9BB2     		uxth	r3, r3
 645 01ae 1380     		strh	r3, [r2]	@ movhi
 646              	.LBE2:
 647 01b0 D9E1     		b	.L32
 648              	.L24:
1737:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1738:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1739:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1740:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Receive buffer address */
1741:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_ADDRESS(USBx, ep->num, ep->pmaadress);
 649              		.loc 1 1741 0
 650 01b2 3B68     		ldr	r3, [r7]
 651 01b4 9B88     		ldrh	r3, [r3, #4]
 652 01b6 5B08     		lsrs	r3, r3, #1
 653 01b8 9BB2     		uxth	r3, r3
 654 01ba 5900     		lsls	r1, r3, #1
 655 01bc 7B68     		ldr	r3, [r7, #4]
 656 01be B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 657 01c2 9BB2     		uxth	r3, r3
 658 01c4 1A46     		mov	r2, r3
 659 01c6 3B68     		ldr	r3, [r7]
 660 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 661 01ca DB00     		lsls	r3, r3, #3
 662 01cc 1344     		add	r3, r3, r2
 663 01ce 0433     		adds	r3, r3, #4
 664 01d0 5A00     		lsls	r2, r3, #1
 665 01d2 7B68     		ldr	r3, [r7, #4]
 666 01d4 1344     		add	r3, r3, r2
 667 01d6 03F58063 		add	r3, r3, #1024
 668 01da 0A46     		mov	r2, r1
ARM GAS  /tmp/ccxRhxZv.s 			page 43


 669 01dc 1A60     		str	r2, [r3]
 670              	.LBB3:
1742:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the endpoint Receive buffer counter*/
1743:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_CNT(USBx, ep->num, ep->maxpacket);
 671              		.loc 1 1743 0
 672 01de 7B68     		ldr	r3, [r7, #4]
 673 01e0 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 674 01e4 9BB2     		uxth	r3, r3
 675 01e6 1A46     		mov	r2, r3
 676 01e8 3B68     		ldr	r3, [r7]
 677 01ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 678 01ec DB00     		lsls	r3, r3, #3
 679 01ee 1344     		add	r3, r3, r2
 680 01f0 0633     		adds	r3, r3, #6
 681 01f2 5A00     		lsls	r2, r3, #1
 682 01f4 7B68     		ldr	r3, [r7, #4]
 683 01f6 1344     		add	r3, r3, r2
 684 01f8 03F58063 		add	r3, r3, #1024
 685 01fc BB60     		str	r3, [r7, #8]
 686              	.LBB4:
 687 01fe 3B68     		ldr	r3, [r7]
 688 0200 1B69     		ldr	r3, [r3, #16]
 689 0202 3E2B     		cmp	r3, #62
 690 0204 18D9     		bls	.L27
 691              		.loc 1 1743 0 is_stmt 0 discriminator 1
 692 0206 3B68     		ldr	r3, [r7]
 693 0208 1B69     		ldr	r3, [r3, #16]
 694 020a 5B09     		lsrs	r3, r3, #5
 695 020c FB81     		strh	r3, [r7, #14]	@ movhi
 696 020e 3B68     		ldr	r3, [r7]
 697 0210 1B69     		ldr	r3, [r3, #16]
 698 0212 03F01F03 		and	r3, r3, #31
 699 0216 002B     		cmp	r3, #0
 700 0218 02D1     		bne	.L28
 701              		.loc 1 1743 0 discriminator 3
 702 021a FB89     		ldrh	r3, [r7, #14]
 703 021c 013B     		subs	r3, r3, #1
 704 021e FB81     		strh	r3, [r7, #14]	@ movhi
 705              	.L28:
 706              		.loc 1 1743 0 discriminator 5
 707 0220 FB89     		ldrh	r3, [r7, #14]	@ movhi
 708 0222 9B02     		lsls	r3, r3, #10
 709 0224 9BB2     		uxth	r3, r3
 710 0226 6FEA4343 		mvn	r3, r3, lsl #17
 711 022a 6FEA5343 		mvn	r3, r3, lsr #17
 712 022e 9BB2     		uxth	r3, r3
 713 0230 1A46     		mov	r2, r3
 714 0232 BB68     		ldr	r3, [r7, #8]
 715 0234 1A60     		str	r2, [r3]
 716 0236 12E0     		b	.L29
 717              	.L27:
 718              		.loc 1 1743 0 discriminator 2
 719 0238 3B68     		ldr	r3, [r7]
 720 023a 1B69     		ldr	r3, [r3, #16]
 721 023c 5B08     		lsrs	r3, r3, #1
 722 023e FB81     		strh	r3, [r7, #14]	@ movhi
 723 0240 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccxRhxZv.s 			page 44


 724 0242 1B69     		ldr	r3, [r3, #16]
 725 0244 03F00103 		and	r3, r3, #1
 726 0248 002B     		cmp	r3, #0
 727 024a 02D0     		beq	.L30
 728              		.loc 1 1743 0 discriminator 6
 729 024c FB89     		ldrh	r3, [r7, #14]
 730 024e 0133     		adds	r3, r3, #1
 731 0250 FB81     		strh	r3, [r7, #14]	@ movhi
 732              	.L30:
 733              		.loc 1 1743 0 discriminator 8
 734 0252 FB89     		ldrh	r3, [r7, #14]	@ movhi
 735 0254 9B02     		lsls	r3, r3, #10
 736 0256 9BB2     		uxth	r3, r3
 737 0258 1A46     		mov	r2, r3
 738 025a BB68     		ldr	r3, [r7, #8]
 739 025c 1A60     		str	r2, [r3]
 740              	.L29:
 741              	.LBE4:
 742              	.LBE3:
1744:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 743              		.loc 1 1744 0 is_stmt 1
 744 025e 7A68     		ldr	r2, [r7, #4]
 745 0260 3B68     		ldr	r3, [r7]
 746 0262 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 747 0264 9B00     		lsls	r3, r3, #2
 748 0266 1344     		add	r3, r3, r2
 749 0268 1B88     		ldrh	r3, [r3]	@ movhi
 750 026a 9BB2     		uxth	r3, r3
 751 026c 03F48043 		and	r3, r3, #16384
 752 0270 002B     		cmp	r3, #0
 753 0272 13D0     		beq	.L31
 754              		.loc 1 1744 0 is_stmt 0 discriminator 1
 755 0274 7A68     		ldr	r2, [r7, #4]
 756 0276 3B68     		ldr	r3, [r7]
 757 0278 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 758 027a 9B00     		lsls	r3, r3, #2
 759 027c 1344     		add	r3, r3, r2
 760 027e 1B88     		ldrh	r3, [r3]	@ movhi
 761 0280 9AB2     		uxth	r2, r3
 762 0282 40F60F73 		movw	r3, #3855
 763 0286 1340     		ands	r3, r3, r2
 764 0288 99B2     		uxth	r1, r3
 765 028a 7A68     		ldr	r2, [r7, #4]
 766 028c 3B68     		ldr	r3, [r7]
 767 028e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 768 0290 9B00     		lsls	r3, r3, #2
 769 0292 1A44     		add	r2, r2, r3
 770 0294 114B     		ldr	r3, .L40+8
 771 0296 0B43     		orrs	r3, r3, r1
 772 0298 9BB2     		uxth	r3, r3
 773 029a 1380     		strh	r3, [r2]	@ movhi
 774              	.L31:
 775              	.LBB5:
1745:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure VALID status for the Endpoint*/
1746:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 776              		.loc 1 1746 0 is_stmt 1
 777 029c 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/ccxRhxZv.s 			page 45


 778 029e 3B68     		ldr	r3, [r7]
 779 02a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 780 02a2 9B00     		lsls	r3, r3, #2
 781 02a4 1344     		add	r3, r3, r2
 782 02a6 1B88     		ldrh	r3, [r3]	@ movhi
 783 02a8 9BB2     		uxth	r3, r3
 784 02aa 23F48043 		bic	r3, r3, #16384
 785 02ae 23F07003 		bic	r3, r3, #112
 786 02b2 9CB2     		uxth	r4, r3
 787 02b4 84F48053 		eor	r3, r4, #4096
 788 02b8 9CB2     		uxth	r4, r3
 789 02ba 84F40053 		eor	r3, r4, #8192
 790 02be 9CB2     		uxth	r4, r3
 791 02c0 7A68     		ldr	r2, [r7, #4]
 792 02c2 3B68     		ldr	r3, [r7]
 793 02c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 794 02c6 9B00     		lsls	r3, r3, #2
 795 02c8 1A44     		add	r2, r2, r3
 796 02ca 024B     		ldr	r3, .L40
 797 02cc 2343     		orrs	r3, r3, r4
 798 02ce 9BB2     		uxth	r3, r3
 799 02d0 1380     		strh	r3, [r2]	@ movhi
 800 02d2 48E1     		b	.L32
 801              	.L41:
 802              		.align	2
 803              	.L40:
 804 02d4 8080FFFF 		.word	-32640
 805 02d8 C080FFFF 		.word	-32576
 806 02dc 80C0FFFF 		.word	-16256
 807              	.L23:
 808              	.LBE5:
1747:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1748:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1749:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Double Buffer*/
1750:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1751:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1752:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Set the endpoint as double buffered*/
1753:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_DBUF(USBx, ep->num);
 809              		.loc 1 1753 0
 810 02e0 7A68     		ldr	r2, [r7, #4]
 811 02e2 3B68     		ldr	r3, [r7]
 812 02e4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 813 02e6 9B00     		lsls	r3, r3, #2
 814 02e8 1344     		add	r3, r3, r2
 815 02ea 1B88     		ldrh	r3, [r3]	@ movhi
 816 02ec 9AB2     		uxth	r2, r3
 817 02ee 40F60F63 		movw	r3, #3599
 818 02f2 1340     		ands	r3, r3, r2
 819 02f4 99B2     		uxth	r1, r3
 820 02f6 7A68     		ldr	r2, [r7, #4]
 821 02f8 3B68     		ldr	r3, [r7]
 822 02fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 823 02fc 9B00     		lsls	r3, r3, #2
 824 02fe 1A44     		add	r2, r2, r3
 825 0300 9C4B     		ldr	r3, .L42
 826 0302 0B43     		orrs	r3, r3, r1
 827 0304 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccxRhxZv.s 			page 46


 828 0306 1380     		strh	r3, [r2]	@ movhi
1754:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Set buffer address for double buffered mode*/
1755:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_DBUF_ADDR(USBx, ep->num,ep->pmaaddr0, ep->pmaaddr1);
 829              		.loc 1 1755 0
 830 0308 3B68     		ldr	r3, [r7]
 831 030a DB88     		ldrh	r3, [r3, #6]
 832 030c 5B08     		lsrs	r3, r3, #1
 833 030e 9BB2     		uxth	r3, r3
 834 0310 5900     		lsls	r1, r3, #1
 835 0312 7B68     		ldr	r3, [r7, #4]
 836 0314 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 837 0318 9BB2     		uxth	r3, r3
 838 031a 1A46     		mov	r2, r3
 839 031c 3B68     		ldr	r3, [r7]
 840 031e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 841 0320 DB00     		lsls	r3, r3, #3
 842 0322 1344     		add	r3, r3, r2
 843 0324 5A00     		lsls	r2, r3, #1
 844 0326 7B68     		ldr	r3, [r7, #4]
 845 0328 1344     		add	r3, r3, r2
 846 032a 03F58063 		add	r3, r3, #1024
 847 032e 0A46     		mov	r2, r1
 848 0330 1A60     		str	r2, [r3]
 849 0332 3B68     		ldr	r3, [r7]
 850 0334 1B89     		ldrh	r3, [r3, #8]
 851 0336 5B08     		lsrs	r3, r3, #1
 852 0338 9BB2     		uxth	r3, r3
 853 033a 5900     		lsls	r1, r3, #1
 854 033c 7B68     		ldr	r3, [r7, #4]
 855 033e B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 856 0342 9BB2     		uxth	r3, r3
 857 0344 1A46     		mov	r2, r3
 858 0346 3B68     		ldr	r3, [r7]
 859 0348 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 860 034a DB00     		lsls	r3, r3, #3
 861 034c 1344     		add	r3, r3, r2
 862 034e 0433     		adds	r3, r3, #4
 863 0350 5A00     		lsls	r2, r3, #1
 864 0352 7B68     		ldr	r3, [r7, #4]
 865 0354 1344     		add	r3, r3, r2
 866 0356 03F58063 		add	r3, r3, #1024
 867 035a 0A46     		mov	r2, r1
 868 035c 1A60     		str	r2, [r3]
1756:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1757:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in==0)
 869              		.loc 1 1757 0
 870 035e 3B68     		ldr	r3, [r7]
 871 0360 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 872 0362 002B     		cmp	r3, #0
 873 0364 40F08380 		bne	.L33
1758:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1759:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1760:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 874              		.loc 1 1760 0
 875 0368 7A68     		ldr	r2, [r7, #4]
 876 036a 3B68     		ldr	r3, [r7]
 877 036c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxRhxZv.s 			page 47


 878 036e 9B00     		lsls	r3, r3, #2
 879 0370 1344     		add	r3, r3, r2
 880 0372 1B88     		ldrh	r3, [r3]	@ movhi
 881 0374 9BB2     		uxth	r3, r3
 882 0376 03F48043 		and	r3, r3, #16384
 883 037a 002B     		cmp	r3, #0
 884 037c 13D0     		beq	.L34
 885              		.loc 1 1760 0 is_stmt 0 discriminator 1
 886 037e 7A68     		ldr	r2, [r7, #4]
 887 0380 3B68     		ldr	r3, [r7]
 888 0382 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 889 0384 9B00     		lsls	r3, r3, #2
 890 0386 1344     		add	r3, r3, r2
 891 0388 1B88     		ldrh	r3, [r3]	@ movhi
 892 038a 9AB2     		uxth	r2, r3
 893 038c 40F60F73 		movw	r3, #3855
 894 0390 1340     		ands	r3, r3, r2
 895 0392 99B2     		uxth	r1, r3
 896 0394 7A68     		ldr	r2, [r7, #4]
 897 0396 3B68     		ldr	r3, [r7]
 898 0398 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 899 039a 9B00     		lsls	r3, r3, #2
 900 039c 1A44     		add	r2, r2, r3
 901 039e 764B     		ldr	r3, .L42+4
 902 03a0 0B43     		orrs	r3, r3, r1
 903 03a2 9BB2     		uxth	r3, r3
 904 03a4 1380     		strh	r3, [r2]	@ movhi
 905              	.L34:
1761:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 906              		.loc 1 1761 0 is_stmt 1
 907 03a6 7A68     		ldr	r2, [r7, #4]
 908 03a8 3B68     		ldr	r3, [r7]
 909 03aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 910 03ac 9B00     		lsls	r3, r3, #2
 911 03ae 1344     		add	r3, r3, r2
 912 03b0 1B88     		ldrh	r3, [r3]	@ movhi
 913 03b2 9BB2     		uxth	r3, r3
 914 03b4 03F04003 		and	r3, r3, #64
 915 03b8 002B     		cmp	r3, #0
 916 03ba 13D0     		beq	.L35
 917              		.loc 1 1761 0 is_stmt 0 discriminator 1
 918 03bc 7A68     		ldr	r2, [r7, #4]
 919 03be 3B68     		ldr	r3, [r7]
 920 03c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 921 03c2 9B00     		lsls	r3, r3, #2
 922 03c4 1344     		add	r3, r3, r2
 923 03c6 1B88     		ldrh	r3, [r3]	@ movhi
 924 03c8 9AB2     		uxth	r2, r3
 925 03ca 40F60F73 		movw	r3, #3855
 926 03ce 1340     		ands	r3, r3, r2
 927 03d0 99B2     		uxth	r1, r3
 928 03d2 7A68     		ldr	r2, [r7, #4]
 929 03d4 3B68     		ldr	r3, [r7]
 930 03d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 931 03d8 9B00     		lsls	r3, r3, #2
 932 03da 1A44     		add	r2, r2, r3
 933 03dc 674B     		ldr	r3, .L42+8
ARM GAS  /tmp/ccxRhxZv.s 			page 48


 934 03de 0B43     		orrs	r3, r3, r1
 935 03e0 9BB2     		uxth	r3, r3
 936 03e2 1380     		strh	r3, [r2]	@ movhi
 937              	.L35:
1762:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1763:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Reset value of the data toggle bits for the endpoint out*/
1764:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_TX_DTOG(USBx, ep->num);
 938              		.loc 1 1764 0 is_stmt 1
 939 03e4 7A68     		ldr	r2, [r7, #4]
 940 03e6 3B68     		ldr	r3, [r7]
 941 03e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 942 03ea 9B00     		lsls	r3, r3, #2
 943 03ec 1344     		add	r3, r3, r2
 944 03ee 1B88     		ldrh	r3, [r3]	@ movhi
 945 03f0 9AB2     		uxth	r2, r3
 946 03f2 40F60F73 		movw	r3, #3855
 947 03f6 1340     		ands	r3, r3, r2
 948 03f8 99B2     		uxth	r1, r3
 949 03fa 7A68     		ldr	r2, [r7, #4]
 950 03fc 3B68     		ldr	r3, [r7]
 951 03fe 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 952 0400 9B00     		lsls	r3, r3, #2
 953 0402 1A44     		add	r2, r2, r3
 954 0404 5D4B     		ldr	r3, .L42+8
 955 0406 0B43     		orrs	r3, r3, r1
 956 0408 9BB2     		uxth	r3, r3
 957 040a 1380     		strh	r3, [r2]	@ movhi
 958              	.LBB6:
1765:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1766:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 959              		.loc 1 1766 0
 960 040c 7A68     		ldr	r2, [r7, #4]
 961 040e 3B68     		ldr	r3, [r7]
 962 0410 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 963 0412 9B00     		lsls	r3, r3, #2
 964 0414 1344     		add	r3, r3, r2
 965 0416 1B88     		ldrh	r3, [r3]	@ movhi
 966 0418 9BB2     		uxth	r3, r3
 967 041a 23F48043 		bic	r3, r3, #16384
 968 041e 23F07003 		bic	r3, r3, #112
 969 0422 9CB2     		uxth	r4, r3
 970 0424 84F48053 		eor	r3, r4, #4096
 971 0428 9CB2     		uxth	r4, r3
 972 042a 84F40053 		eor	r3, r4, #8192
 973 042e 9CB2     		uxth	r4, r3
 974 0430 7A68     		ldr	r2, [r7, #4]
 975 0432 3B68     		ldr	r3, [r7]
 976 0434 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 977 0436 9B00     		lsls	r3, r3, #2
 978 0438 1A44     		add	r2, r2, r3
 979 043a 514B     		ldr	r3, .L42+12
 980 043c 2343     		orrs	r3, r3, r4
 981 043e 9BB2     		uxth	r3, r3
 982 0440 1380     		strh	r3, [r2]	@ movhi
 983              	.LBE6:
 984              	.LBB7:
1767:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
ARM GAS  /tmp/ccxRhxZv.s 			page 49


 985              		.loc 1 1767 0
 986 0442 7A68     		ldr	r2, [r7, #4]
 987 0444 3B68     		ldr	r3, [r7]
 988 0446 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 989 0448 9B00     		lsls	r3, r3, #2
 990 044a 1344     		add	r3, r3, r2
 991 044c 1B88     		ldrh	r3, [r3]	@ movhi
 992 044e 9BB2     		uxth	r3, r3
 993 0450 23F4E043 		bic	r3, r3, #28672
 994 0454 23F04003 		bic	r3, r3, #64
 995 0458 9CB2     		uxth	r4, r3
 996 045a 7A68     		ldr	r2, [r7, #4]
 997 045c 3B68     		ldr	r3, [r7]
 998 045e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 999 0460 9B00     		lsls	r3, r3, #2
 1000 0462 1A44     		add	r2, r2, r3
 1001 0464 464B     		ldr	r3, .L42+12
 1002 0466 2343     		orrs	r3, r3, r4
 1003 0468 9BB2     		uxth	r3, r3
 1004 046a 1380     		strh	r3, [r2]	@ movhi
 1005              	.LBE7:
 1006 046c 7BE0     		b	.L32
 1007              	.L33:
1768:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1769:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1770:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1771:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1772:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1008              		.loc 1 1772 0
 1009 046e 7A68     		ldr	r2, [r7, #4]
 1010 0470 3B68     		ldr	r3, [r7]
 1011 0472 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1012 0474 9B00     		lsls	r3, r3, #2
 1013 0476 1344     		add	r3, r3, r2
 1014 0478 1B88     		ldrh	r3, [r3]	@ movhi
 1015 047a 9BB2     		uxth	r3, r3
 1016 047c 03F48043 		and	r3, r3, #16384
 1017 0480 002B     		cmp	r3, #0
 1018 0482 13D0     		beq	.L36
 1019              		.loc 1 1772 0 is_stmt 0 discriminator 1
 1020 0484 7A68     		ldr	r2, [r7, #4]
 1021 0486 3B68     		ldr	r3, [r7]
 1022 0488 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1023 048a 9B00     		lsls	r3, r3, #2
 1024 048c 1344     		add	r3, r3, r2
 1025 048e 1B88     		ldrh	r3, [r3]	@ movhi
 1026 0490 9AB2     		uxth	r2, r3
 1027 0492 40F60F73 		movw	r3, #3855
 1028 0496 1340     		ands	r3, r3, r2
 1029 0498 99B2     		uxth	r1, r3
 1030 049a 7A68     		ldr	r2, [r7, #4]
 1031 049c 3B68     		ldr	r3, [r7]
 1032 049e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1033 04a0 9B00     		lsls	r3, r3, #2
 1034 04a2 1A44     		add	r2, r2, r3
 1035 04a4 344B     		ldr	r3, .L42+4
 1036 04a6 0B43     		orrs	r3, r3, r1
ARM GAS  /tmp/ccxRhxZv.s 			page 50


 1037 04a8 9BB2     		uxth	r3, r3
 1038 04aa 1380     		strh	r3, [r2]	@ movhi
 1039              	.L36:
1773:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1040              		.loc 1 1773 0 is_stmt 1
 1041 04ac 7A68     		ldr	r2, [r7, #4]
 1042 04ae 3B68     		ldr	r3, [r7]
 1043 04b0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1044 04b2 9B00     		lsls	r3, r3, #2
 1045 04b4 1344     		add	r3, r3, r2
 1046 04b6 1B88     		ldrh	r3, [r3]	@ movhi
 1047 04b8 9BB2     		uxth	r3, r3
 1048 04ba 03F04003 		and	r3, r3, #64
 1049 04be 002B     		cmp	r3, #0
 1050 04c0 13D0     		beq	.L37
 1051              		.loc 1 1773 0 is_stmt 0 discriminator 1
 1052 04c2 7A68     		ldr	r2, [r7, #4]
 1053 04c4 3B68     		ldr	r3, [r7]
 1054 04c6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1055 04c8 9B00     		lsls	r3, r3, #2
 1056 04ca 1344     		add	r3, r3, r2
 1057 04cc 1B88     		ldrh	r3, [r3]	@ movhi
 1058 04ce 9AB2     		uxth	r2, r3
 1059 04d0 40F60F73 		movw	r3, #3855
 1060 04d4 1340     		ands	r3, r3, r2
 1061 04d6 99B2     		uxth	r1, r3
 1062 04d8 7A68     		ldr	r2, [r7, #4]
 1063 04da 3B68     		ldr	r3, [r7]
 1064 04dc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1065 04de 9B00     		lsls	r3, r3, #2
 1066 04e0 1A44     		add	r2, r2, r3
 1067 04e2 264B     		ldr	r3, .L42+8
 1068 04e4 0B43     		orrs	r3, r3, r1
 1069 04e6 9BB2     		uxth	r3, r3
 1070 04e8 1380     		strh	r3, [r2]	@ movhi
 1071              	.L37:
1774:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 1072              		.loc 1 1774 0 is_stmt 1
 1073 04ea 7A68     		ldr	r2, [r7, #4]
 1074 04ec 3B68     		ldr	r3, [r7]
 1075 04ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1076 04f0 9B00     		lsls	r3, r3, #2
 1077 04f2 1344     		add	r3, r3, r2
 1078 04f4 1B88     		ldrh	r3, [r3]	@ movhi
 1079 04f6 9AB2     		uxth	r2, r3
 1080 04f8 40F60F73 		movw	r3, #3855
 1081 04fc 1340     		ands	r3, r3, r2
 1082 04fe 99B2     		uxth	r1, r3
 1083 0500 7A68     		ldr	r2, [r7, #4]
 1084 0502 3B68     		ldr	r3, [r7]
 1085 0504 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1086 0506 9B00     		lsls	r3, r3, #2
 1087 0508 1A44     		add	r2, r2, r3
 1088 050a 1B4B     		ldr	r3, .L42+4
 1089 050c 0B43     		orrs	r3, r3, r1
 1090 050e 9BB2     		uxth	r3, r3
 1091 0510 1380     		strh	r3, [r2]	@ movhi
ARM GAS  /tmp/ccxRhxZv.s 			page 51


 1092              	.LBB8:
1775:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1776:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1093              		.loc 1 1776 0
 1094 0512 7A68     		ldr	r2, [r7, #4]
 1095 0514 3B68     		ldr	r3, [r7]
 1096 0516 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1097 0518 9B00     		lsls	r3, r3, #2
 1098 051a 1344     		add	r3, r3, r2
 1099 051c 1B88     		ldrh	r3, [r3]	@ movhi
 1100 051e 9BB2     		uxth	r3, r3
 1101 0520 23F4E043 		bic	r3, r3, #28672
 1102 0524 23F04003 		bic	r3, r3, #64
 1103 0528 9CB2     		uxth	r4, r3
 1104 052a 7A68     		ldr	r2, [r7, #4]
 1105 052c 3B68     		ldr	r3, [r7]
 1106 052e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1107 0530 9B00     		lsls	r3, r3, #2
 1108 0532 1A44     		add	r2, r2, r3
 1109 0534 124B     		ldr	r3, .L42+12
 1110 0536 2343     		orrs	r3, r3, r4
 1111 0538 9BB2     		uxth	r3, r3
 1112 053a 1380     		strh	r3, [r2]	@ movhi
 1113              	.LBE8:
 1114              	.LBB9:
1777:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1115              		.loc 1 1777 0
 1116 053c 7A68     		ldr	r2, [r7, #4]
 1117 053e 3B68     		ldr	r3, [r7]
 1118 0540 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1119 0542 9B00     		lsls	r3, r3, #2
 1120 0544 1344     		add	r3, r3, r2
 1121 0546 1B88     		ldrh	r3, [r3]	@ movhi
 1122 0548 9BB2     		uxth	r3, r3
 1123 054a 23F48043 		bic	r3, r3, #16384
 1124 054e 23F07003 		bic	r3, r3, #112
 1125 0552 9CB2     		uxth	r4, r3
 1126 0554 7A68     		ldr	r2, [r7, #4]
 1127 0556 3B68     		ldr	r3, [r7]
 1128 0558 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1129 055a 9B00     		lsls	r3, r3, #2
 1130 055c 1A44     		add	r2, r2, r3
 1131 055e 084B     		ldr	r3, .L42+12
 1132 0560 2343     		orrs	r3, r3, r4
 1133 0562 9BB2     		uxth	r3, r3
 1134 0564 1380     		strh	r3, [r2]	@ movhi
 1135              	.L32:
 1136              	.LBE9:
1778:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1779:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1780:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1781:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 1137              		.loc 1 1781 0
 1138 0566 0023     		movs	r3, #0
1782:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1139              		.loc 1 1782 0
 1140 0568 1846     		mov	r0, r3
ARM GAS  /tmp/ccxRhxZv.s 			page 52


 1141 056a 1037     		adds	r7, r7, #16
 1142              	.LCFI49:
 1143              		.cfi_def_cfa_offset 8
 1144 056c BD46     		mov	sp, r7
 1145              	.LCFI50:
 1146              		.cfi_def_cfa_register 13
 1147              		@ sp needed
 1148 056e 90BC     		pop	{r4, r7}
 1149              	.LCFI51:
 1150              		.cfi_restore 7
 1151              		.cfi_restore 4
 1152              		.cfi_def_cfa_offset 0
 1153 0570 7047     		bx	lr
 1154              	.L43:
 1155 0572 00BF     		.align	2
 1156              	.L42:
 1157 0574 8081FFFF 		.word	-32384
 1158 0578 80C0FFFF 		.word	-16256
 1159 057c C080FFFF 		.word	-32576
 1160 0580 8080FFFF 		.word	-32640
 1161              		.cfi_endproc
 1162              	.LFE73:
 1164              		.section	.text.USB_DeactivateEndpoint,"ax",%progbits
 1165              		.align	1
 1166              		.global	USB_DeactivateEndpoint
 1167              		.syntax unified
 1168              		.thumb
 1169              		.thumb_func
 1170              		.fpu softvfp
 1172              	USB_DeactivateEndpoint:
 1173              	.LFB74:
1783:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1784:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1785:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  De-activate and de-initialize an endpoint
1786:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1787:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1788:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1789:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1790:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateEndpoint(USB_TypeDef *USBx, USB_EPTypeDef *ep)
1791:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1174              		.loc 1 1791 0
 1175              		.cfi_startproc
 1176              		@ args = 0, pretend = 0, frame = 8
 1177              		@ frame_needed = 1, uses_anonymous_args = 0
 1178              		@ link register save eliminated.
 1179 0000 90B4     		push	{r4, r7}
 1180              	.LCFI52:
 1181              		.cfi_def_cfa_offset 8
 1182              		.cfi_offset 4, -8
 1183              		.cfi_offset 7, -4
 1184 0002 82B0     		sub	sp, sp, #8
 1185              	.LCFI53:
 1186              		.cfi_def_cfa_offset 16
 1187 0004 00AF     		add	r7, sp, #0
 1188              	.LCFI54:
 1189              		.cfi_def_cfa_register 7
 1190 0006 7860     		str	r0, [r7, #4]
ARM GAS  /tmp/ccxRhxZv.s 			page 53


 1191 0008 3960     		str	r1, [r7]
1792:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->doublebuffer == 0) 
 1192              		.loc 1 1792 0
 1193 000a 3B68     		ldr	r3, [r7]
 1194 000c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 1195 000e 002B     		cmp	r3, #0
 1196 0010 6DD1     		bne	.L45
1793:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1794:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in)
 1197              		.loc 1 1794 0
 1198 0012 3B68     		ldr	r3, [r7]
 1199 0014 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1200 0016 002B     		cmp	r3, #0
 1201 0018 34D0     		beq	.L46
1795:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1796:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1202              		.loc 1 1796 0
 1203 001a 7A68     		ldr	r2, [r7, #4]
 1204 001c 3B68     		ldr	r3, [r7]
 1205 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1206 0020 9B00     		lsls	r3, r3, #2
 1207 0022 1344     		add	r3, r3, r2
 1208 0024 1B88     		ldrh	r3, [r3]	@ movhi
 1209 0026 9BB2     		uxth	r3, r3
 1210 0028 03F04003 		and	r3, r3, #64
 1211 002c 002B     		cmp	r3, #0
 1212 002e 13D0     		beq	.L47
 1213              		.loc 1 1796 0 is_stmt 0 discriminator 1
 1214 0030 7A68     		ldr	r2, [r7, #4]
 1215 0032 3B68     		ldr	r3, [r7]
 1216 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1217 0036 9B00     		lsls	r3, r3, #2
 1218 0038 1344     		add	r3, r3, r2
 1219 003a 1B88     		ldrh	r3, [r3]	@ movhi
 1220 003c 9AB2     		uxth	r2, r3
 1221 003e 40F60F73 		movw	r3, #3855
 1222 0042 1340     		ands	r3, r3, r2
 1223 0044 99B2     		uxth	r1, r3
 1224 0046 7A68     		ldr	r2, [r7, #4]
 1225 0048 3B68     		ldr	r3, [r7]
 1226 004a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1227 004c 9B00     		lsls	r3, r3, #2
 1228 004e 1A44     		add	r2, r2, r3
 1229 0050 684B     		ldr	r3, .L57
 1230 0052 0B43     		orrs	r3, r3, r1
 1231 0054 9BB2     		uxth	r3, r3
 1232 0056 1380     		strh	r3, [r2]	@ movhi
 1233              	.L47:
 1234              	.LBB10:
1797:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1798:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS); 
 1235              		.loc 1 1798 0 is_stmt 1
 1236 0058 7A68     		ldr	r2, [r7, #4]
 1237 005a 3B68     		ldr	r3, [r7]
 1238 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1239 005e 9B00     		lsls	r3, r3, #2
 1240 0060 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccxRhxZv.s 			page 54


 1241 0062 1B88     		ldrh	r3, [r3]	@ movhi
 1242 0064 9BB2     		uxth	r3, r3
 1243 0066 23F4E043 		bic	r3, r3, #28672
 1244 006a 23F04003 		bic	r3, r3, #64
 1245 006e 9CB2     		uxth	r4, r3
 1246 0070 7A68     		ldr	r2, [r7, #4]
 1247 0072 3B68     		ldr	r3, [r7]
 1248 0074 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1249 0076 9B00     		lsls	r3, r3, #2
 1250 0078 1A44     		add	r2, r2, r3
 1251 007a 5F4B     		ldr	r3, .L57+4
 1252 007c 2343     		orrs	r3, r3, r4
 1253 007e 9BB2     		uxth	r3, r3
 1254 0080 1380     		strh	r3, [r2]	@ movhi
 1255              	.LBE10:
 1256 0082 39E1     		b	.L50
 1257              	.L46:
1799:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1800:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1801:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1802:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1258              		.loc 1 1802 0
 1259 0084 7A68     		ldr	r2, [r7, #4]
 1260 0086 3B68     		ldr	r3, [r7]
 1261 0088 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1262 008a 9B00     		lsls	r3, r3, #2
 1263 008c 1344     		add	r3, r3, r2
 1264 008e 1B88     		ldrh	r3, [r3]	@ movhi
 1265 0090 9BB2     		uxth	r3, r3
 1266 0092 03F48043 		and	r3, r3, #16384
 1267 0096 002B     		cmp	r3, #0
 1268 0098 13D0     		beq	.L49
 1269              		.loc 1 1802 0 is_stmt 0 discriminator 1
 1270 009a 7A68     		ldr	r2, [r7, #4]
 1271 009c 3B68     		ldr	r3, [r7]
 1272 009e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1273 00a0 9B00     		lsls	r3, r3, #2
 1274 00a2 1344     		add	r3, r3, r2
 1275 00a4 1B88     		ldrh	r3, [r3]	@ movhi
 1276 00a6 9AB2     		uxth	r2, r3
 1277 00a8 40F60F73 		movw	r3, #3855
 1278 00ac 1340     		ands	r3, r3, r2
 1279 00ae 99B2     		uxth	r1, r3
 1280 00b0 7A68     		ldr	r2, [r7, #4]
 1281 00b2 3B68     		ldr	r3, [r7]
 1282 00b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1283 00b6 9B00     		lsls	r3, r3, #2
 1284 00b8 1A44     		add	r2, r2, r3
 1285 00ba 504B     		ldr	r3, .L57+8
 1286 00bc 0B43     		orrs	r3, r3, r1
 1287 00be 9BB2     		uxth	r3, r3
 1288 00c0 1380     		strh	r3, [r2]	@ movhi
 1289              	.L49:
 1290              	.LBB11:
1803:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1804:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1291              		.loc 1 1804 0 is_stmt 1
ARM GAS  /tmp/ccxRhxZv.s 			page 55


 1292 00c2 7A68     		ldr	r2, [r7, #4]
 1293 00c4 3B68     		ldr	r3, [r7]
 1294 00c6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1295 00c8 9B00     		lsls	r3, r3, #2
 1296 00ca 1344     		add	r3, r3, r2
 1297 00cc 1B88     		ldrh	r3, [r3]	@ movhi
 1298 00ce 9BB2     		uxth	r3, r3
 1299 00d0 23F48043 		bic	r3, r3, #16384
 1300 00d4 23F07003 		bic	r3, r3, #112
 1301 00d8 9CB2     		uxth	r4, r3
 1302 00da 7A68     		ldr	r2, [r7, #4]
 1303 00dc 3B68     		ldr	r3, [r7]
 1304 00de 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1305 00e0 9B00     		lsls	r3, r3, #2
 1306 00e2 1A44     		add	r2, r2, r3
 1307 00e4 444B     		ldr	r3, .L57+4
 1308 00e6 2343     		orrs	r3, r3, r4
 1309 00e8 9BB2     		uxth	r3, r3
 1310 00ea 1380     		strh	r3, [r2]	@ movhi
 1311 00ec 04E1     		b	.L50
 1312              	.L45:
 1313              	.LBE11:
1805:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1806:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1807:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /*Double Buffer*/
1808:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1809:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   { 
1810:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in==0)
 1314              		.loc 1 1810 0
 1315 00ee 3B68     		ldr	r3, [r7]
 1316 00f0 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1317 00f2 002B     		cmp	r3, #0
 1318 00f4 40F08480 		bne	.L51
1811:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1812:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1813:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1319              		.loc 1 1813 0
 1320 00f8 7A68     		ldr	r2, [r7, #4]
 1321 00fa 3B68     		ldr	r3, [r7]
 1322 00fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1323 00fe 9B00     		lsls	r3, r3, #2
 1324 0100 1344     		add	r3, r3, r2
 1325 0102 1B88     		ldrh	r3, [r3]	@ movhi
 1326 0104 9BB2     		uxth	r3, r3
 1327 0106 03F48043 		and	r3, r3, #16384
 1328 010a 002B     		cmp	r3, #0
 1329 010c 13D0     		beq	.L52
 1330              		.loc 1 1813 0 is_stmt 0 discriminator 1
 1331 010e 7A68     		ldr	r2, [r7, #4]
 1332 0110 3B68     		ldr	r3, [r7]
 1333 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1334 0114 9B00     		lsls	r3, r3, #2
 1335 0116 1344     		add	r3, r3, r2
 1336 0118 1B88     		ldrh	r3, [r3]	@ movhi
 1337 011a 9AB2     		uxth	r2, r3
 1338 011c 40F60F73 		movw	r3, #3855
 1339 0120 1340     		ands	r3, r3, r2
ARM GAS  /tmp/ccxRhxZv.s 			page 56


 1340 0122 99B2     		uxth	r1, r3
 1341 0124 7A68     		ldr	r2, [r7, #4]
 1342 0126 3B68     		ldr	r3, [r7]
 1343 0128 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1344 012a 9B00     		lsls	r3, r3, #2
 1345 012c 1A44     		add	r2, r2, r3
 1346 012e 334B     		ldr	r3, .L57+8
 1347 0130 0B43     		orrs	r3, r3, r1
 1348 0132 9BB2     		uxth	r3, r3
 1349 0134 1380     		strh	r3, [r2]	@ movhi
 1350              	.L52:
1814:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1351              		.loc 1 1814 0 is_stmt 1
 1352 0136 7A68     		ldr	r2, [r7, #4]
 1353 0138 3B68     		ldr	r3, [r7]
 1354 013a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1355 013c 9B00     		lsls	r3, r3, #2
 1356 013e 1344     		add	r3, r3, r2
 1357 0140 1B88     		ldrh	r3, [r3]	@ movhi
 1358 0142 9BB2     		uxth	r3, r3
 1359 0144 03F04003 		and	r3, r3, #64
 1360 0148 002B     		cmp	r3, #0
 1361 014a 13D0     		beq	.L53
 1362              		.loc 1 1814 0 is_stmt 0 discriminator 1
 1363 014c 7A68     		ldr	r2, [r7, #4]
 1364 014e 3B68     		ldr	r3, [r7]
 1365 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1366 0152 9B00     		lsls	r3, r3, #2
 1367 0154 1344     		add	r3, r3, r2
 1368 0156 1B88     		ldrh	r3, [r3]	@ movhi
 1369 0158 9AB2     		uxth	r2, r3
 1370 015a 40F60F73 		movw	r3, #3855
 1371 015e 1340     		ands	r3, r3, r2
 1372 0160 99B2     		uxth	r1, r3
 1373 0162 7A68     		ldr	r2, [r7, #4]
 1374 0164 3B68     		ldr	r3, [r7]
 1375 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1376 0168 9B00     		lsls	r3, r3, #2
 1377 016a 1A44     		add	r2, r2, r3
 1378 016c 214B     		ldr	r3, .L57
 1379 016e 0B43     		orrs	r3, r3, r1
 1380 0170 9BB2     		uxth	r3, r3
 1381 0172 1380     		strh	r3, [r2]	@ movhi
 1382              	.L53:
1815:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1816:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Reset value of the data toggle bits for the endpoint out*/
1817:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_TX_DTOG(USBx, ep->num);
 1383              		.loc 1 1817 0 is_stmt 1
 1384 0174 7A68     		ldr	r2, [r7, #4]
 1385 0176 3B68     		ldr	r3, [r7]
 1386 0178 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1387 017a 9B00     		lsls	r3, r3, #2
 1388 017c 1344     		add	r3, r3, r2
 1389 017e 1B88     		ldrh	r3, [r3]	@ movhi
 1390 0180 9AB2     		uxth	r2, r3
 1391 0182 40F60F73 		movw	r3, #3855
 1392 0186 1340     		ands	r3, r3, r2
ARM GAS  /tmp/ccxRhxZv.s 			page 57


 1393 0188 99B2     		uxth	r1, r3
 1394 018a 7A68     		ldr	r2, [r7, #4]
 1395 018c 3B68     		ldr	r3, [r7]
 1396 018e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1397 0190 9B00     		lsls	r3, r3, #2
 1398 0192 1A44     		add	r2, r2, r3
 1399 0194 174B     		ldr	r3, .L57
 1400 0196 0B43     		orrs	r3, r3, r1
 1401 0198 9BB2     		uxth	r3, r3
 1402 019a 1380     		strh	r3, [r2]	@ movhi
 1403              	.LBB12:
1818:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       
1819:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1404              		.loc 1 1819 0
 1405 019c 7A68     		ldr	r2, [r7, #4]
 1406 019e 3B68     		ldr	r3, [r7]
 1407 01a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1408 01a2 9B00     		lsls	r3, r3, #2
 1409 01a4 1344     		add	r3, r3, r2
 1410 01a6 1B88     		ldrh	r3, [r3]	@ movhi
 1411 01a8 9BB2     		uxth	r3, r3
 1412 01aa 23F48043 		bic	r3, r3, #16384
 1413 01ae 23F07003 		bic	r3, r3, #112
 1414 01b2 9CB2     		uxth	r4, r3
 1415 01b4 7A68     		ldr	r2, [r7, #4]
 1416 01b6 3B68     		ldr	r3, [r7]
 1417 01b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1418 01ba 9B00     		lsls	r3, r3, #2
 1419 01bc 1A44     		add	r2, r2, r3
 1420 01be 0E4B     		ldr	r3, .L57+4
 1421 01c0 2343     		orrs	r3, r3, r4
 1422 01c2 9BB2     		uxth	r3, r3
 1423 01c4 1380     		strh	r3, [r2]	@ movhi
 1424              	.LBE12:
 1425              	.LBB13:
1820:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1426              		.loc 1 1820 0
 1427 01c6 7A68     		ldr	r2, [r7, #4]
 1428 01c8 3B68     		ldr	r3, [r7]
 1429 01ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1430 01cc 9B00     		lsls	r3, r3, #2
 1431 01ce 1344     		add	r3, r3, r2
 1432 01d0 1B88     		ldrh	r3, [r3]	@ movhi
 1433 01d2 9BB2     		uxth	r3, r3
 1434 01d4 23F4E043 		bic	r3, r3, #28672
 1435 01d8 23F04003 		bic	r3, r3, #64
 1436 01dc 9CB2     		uxth	r4, r3
 1437 01de 7A68     		ldr	r2, [r7, #4]
 1438 01e0 3B68     		ldr	r3, [r7]
 1439 01e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1440 01e4 9B00     		lsls	r3, r3, #2
 1441 01e6 1A44     		add	r2, r2, r3
 1442 01e8 034B     		ldr	r3, .L57+4
 1443 01ea 2343     		orrs	r3, r3, r4
 1444 01ec 9BB2     		uxth	r3, r3
 1445 01ee 1380     		strh	r3, [r2]	@ movhi
 1446              	.LBE13:
ARM GAS  /tmp/ccxRhxZv.s 			page 58


 1447 01f0 82E0     		b	.L50
 1448              	.L58:
 1449 01f2 00BF     		.align	2
 1450              	.L57:
 1451 01f4 C080FFFF 		.word	-32576
 1452 01f8 8080FFFF 		.word	-32640
 1453 01fc 80C0FFFF 		.word	-16256
 1454              	.L51:
1821:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1822:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1823:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1824:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
1825:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1455              		.loc 1 1825 0
 1456 0200 7A68     		ldr	r2, [r7, #4]
 1457 0202 3B68     		ldr	r3, [r7]
 1458 0204 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1459 0206 9B00     		lsls	r3, r3, #2
 1460 0208 1344     		add	r3, r3, r2
 1461 020a 1B88     		ldrh	r3, [r3]	@ movhi
 1462 020c 9BB2     		uxth	r3, r3
 1463 020e 03F48043 		and	r3, r3, #16384
 1464 0212 002B     		cmp	r3, #0
 1465 0214 13D0     		beq	.L54
 1466              		.loc 1 1825 0 is_stmt 0 discriminator 1
 1467 0216 7A68     		ldr	r2, [r7, #4]
 1468 0218 3B68     		ldr	r3, [r7]
 1469 021a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1470 021c 9B00     		lsls	r3, r3, #2
 1471 021e 1344     		add	r3, r3, r2
 1472 0220 1B88     		ldrh	r3, [r3]	@ movhi
 1473 0222 9AB2     		uxth	r2, r3
 1474 0224 40F60F73 		movw	r3, #3855
 1475 0228 1340     		ands	r3, r3, r2
 1476 022a 99B2     		uxth	r1, r3
 1477 022c 7A68     		ldr	r2, [r7, #4]
 1478 022e 3B68     		ldr	r3, [r7]
 1479 0230 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1480 0232 9B00     		lsls	r3, r3, #2
 1481 0234 1A44     		add	r2, r2, r3
 1482 0236 334B     		ldr	r3, .L59
 1483 0238 0B43     		orrs	r3, r3, r1
 1484 023a 9BB2     		uxth	r3, r3
 1485 023c 1380     		strh	r3, [r2]	@ movhi
 1486              	.L54:
1826:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1487              		.loc 1 1826 0 is_stmt 1
 1488 023e 7A68     		ldr	r2, [r7, #4]
 1489 0240 3B68     		ldr	r3, [r7]
 1490 0242 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1491 0244 9B00     		lsls	r3, r3, #2
 1492 0246 1344     		add	r3, r3, r2
 1493 0248 1B88     		ldrh	r3, [r3]	@ movhi
 1494 024a 9BB2     		uxth	r3, r3
 1495 024c 03F04003 		and	r3, r3, #64
 1496 0250 002B     		cmp	r3, #0
 1497 0252 13D0     		beq	.L55
ARM GAS  /tmp/ccxRhxZv.s 			page 59


 1498              		.loc 1 1826 0 is_stmt 0 discriminator 1
 1499 0254 7A68     		ldr	r2, [r7, #4]
 1500 0256 3B68     		ldr	r3, [r7]
 1501 0258 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1502 025a 9B00     		lsls	r3, r3, #2
 1503 025c 1344     		add	r3, r3, r2
 1504 025e 1B88     		ldrh	r3, [r3]	@ movhi
 1505 0260 9AB2     		uxth	r2, r3
 1506 0262 40F60F73 		movw	r3, #3855
 1507 0266 1340     		ands	r3, r3, r2
 1508 0268 99B2     		uxth	r1, r3
 1509 026a 7A68     		ldr	r2, [r7, #4]
 1510 026c 3B68     		ldr	r3, [r7]
 1511 026e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1512 0270 9B00     		lsls	r3, r3, #2
 1513 0272 1A44     		add	r2, r2, r3
 1514 0274 244B     		ldr	r3, .L59+4
 1515 0276 0B43     		orrs	r3, r3, r1
 1516 0278 9BB2     		uxth	r3, r3
 1517 027a 1380     		strh	r3, [r2]	@ movhi
 1518              	.L55:
1827:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 1519              		.loc 1 1827 0 is_stmt 1
 1520 027c 7A68     		ldr	r2, [r7, #4]
 1521 027e 3B68     		ldr	r3, [r7]
 1522 0280 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1523 0282 9B00     		lsls	r3, r3, #2
 1524 0284 1344     		add	r3, r3, r2
 1525 0286 1B88     		ldrh	r3, [r3]	@ movhi
 1526 0288 9AB2     		uxth	r2, r3
 1527 028a 40F60F73 		movw	r3, #3855
 1528 028e 1340     		ands	r3, r3, r2
 1529 0290 99B2     		uxth	r1, r3
 1530 0292 7A68     		ldr	r2, [r7, #4]
 1531 0294 3B68     		ldr	r3, [r7]
 1532 0296 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1533 0298 9B00     		lsls	r3, r3, #2
 1534 029a 1A44     		add	r2, r2, r3
 1535 029c 194B     		ldr	r3, .L59
 1536 029e 0B43     		orrs	r3, r3, r1
 1537 02a0 9BB2     		uxth	r3, r3
 1538 02a2 1380     		strh	r3, [r2]	@ movhi
 1539              	.LBB14:
1828:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
1829:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1540              		.loc 1 1829 0
 1541 02a4 7A68     		ldr	r2, [r7, #4]
 1542 02a6 3B68     		ldr	r3, [r7]
 1543 02a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1544 02aa 9B00     		lsls	r3, r3, #2
 1545 02ac 1344     		add	r3, r3, r2
 1546 02ae 1B88     		ldrh	r3, [r3]	@ movhi
 1547 02b0 9BB2     		uxth	r3, r3
 1548 02b2 23F4E043 		bic	r3, r3, #28672
 1549 02b6 23F04003 		bic	r3, r3, #64
 1550 02ba 9CB2     		uxth	r4, r3
 1551 02bc 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/ccxRhxZv.s 			page 60


 1552 02be 3B68     		ldr	r3, [r7]
 1553 02c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1554 02c2 9B00     		lsls	r3, r3, #2
 1555 02c4 1A44     		add	r2, r2, r3
 1556 02c6 114B     		ldr	r3, .L59+8
 1557 02c8 2343     		orrs	r3, r3, r4
 1558 02ca 9BB2     		uxth	r3, r3
 1559 02cc 1380     		strh	r3, [r2]	@ movhi
 1560              	.LBE14:
 1561              	.LBB15:
1830:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1562              		.loc 1 1830 0
 1563 02ce 7A68     		ldr	r2, [r7, #4]
 1564 02d0 3B68     		ldr	r3, [r7]
 1565 02d2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1566 02d4 9B00     		lsls	r3, r3, #2
 1567 02d6 1344     		add	r3, r3, r2
 1568 02d8 1B88     		ldrh	r3, [r3]	@ movhi
 1569 02da 9BB2     		uxth	r3, r3
 1570 02dc 23F48043 		bic	r3, r3, #16384
 1571 02e0 23F07003 		bic	r3, r3, #112
 1572 02e4 9CB2     		uxth	r4, r3
 1573 02e6 7A68     		ldr	r2, [r7, #4]
 1574 02e8 3B68     		ldr	r3, [r7]
 1575 02ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1576 02ec 9B00     		lsls	r3, r3, #2
 1577 02ee 1A44     		add	r2, r2, r3
 1578 02f0 064B     		ldr	r3, .L59+8
 1579 02f2 2343     		orrs	r3, r3, r4
 1580 02f4 9BB2     		uxth	r3, r3
 1581 02f6 1380     		strh	r3, [r2]	@ movhi
 1582              	.L50:
 1583              	.LBE15:
1831:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1832:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1833:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1834:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 1584              		.loc 1 1834 0
 1585 02f8 0023     		movs	r3, #0
1835:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 1586              		.loc 1 1835 0
 1587 02fa 1846     		mov	r0, r3
 1588 02fc 0837     		adds	r7, r7, #8
 1589              	.LCFI55:
 1590              		.cfi_def_cfa_offset 8
 1591 02fe BD46     		mov	sp, r7
 1592              	.LCFI56:
 1593              		.cfi_def_cfa_register 13
 1594              		@ sp needed
 1595 0300 90BC     		pop	{r4, r7}
 1596              	.LCFI57:
 1597              		.cfi_restore 7
 1598              		.cfi_restore 4
 1599              		.cfi_def_cfa_offset 0
 1600 0302 7047     		bx	lr
 1601              	.L60:
 1602              		.align	2
ARM GAS  /tmp/ccxRhxZv.s 			page 61


 1603              	.L59:
 1604 0304 80C0FFFF 		.word	-16256
 1605 0308 C080FFFF 		.word	-32576
 1606 030c 8080FFFF 		.word	-32640
 1607              		.cfi_endproc
 1608              	.LFE74:
 1610              		.section	.text.USB_EPStartXfer,"ax",%progbits
 1611              		.align	1
 1612              		.global	USB_EPStartXfer
 1613              		.syntax unified
 1614              		.thumb
 1615              		.thumb_func
 1616              		.fpu softvfp
 1618              	USB_EPStartXfer:
 1619              	.LFB75:
1836:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1837:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1838:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPStartXfer : setup and starts a transfer over an EP
1839:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1840:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1841:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1842:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1843:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPStartXfer(USB_TypeDef *USBx , USB_EPTypeDef *ep)
1844:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 1620              		.loc 1 1844 0
 1621              		.cfi_startproc
 1622              		@ args = 0, pretend = 0, frame = 48
 1623              		@ frame_needed = 1, uses_anonymous_args = 0
 1624 0000 90B5     		push	{r4, r7, lr}
 1625              	.LCFI58:
 1626              		.cfi_def_cfa_offset 12
 1627              		.cfi_offset 4, -12
 1628              		.cfi_offset 7, -8
 1629              		.cfi_offset 14, -4
 1630 0002 8DB0     		sub	sp, sp, #52
 1631              	.LCFI59:
 1632              		.cfi_def_cfa_offset 64
 1633 0004 00AF     		add	r7, sp, #0
 1634              	.LCFI60:
 1635              		.cfi_def_cfa_register 7
 1636 0006 7860     		str	r0, [r7, #4]
 1637 0008 3960     		str	r1, [r7]
1845:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t pmabuffer = 0;
 1638              		.loc 1 1845 0
 1639 000a 0023     		movs	r3, #0
 1640 000c FB85     		strh	r3, [r7, #46]	@ movhi
1846:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t len = ep->xfer_len;
 1641              		.loc 1 1846 0
 1642 000e 3B68     		ldr	r3, [r7]
 1643 0010 9B69     		ldr	r3, [r3, #24]
 1644 0012 BB62     		str	r3, [r7, #40]
1847:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1848:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* IN endpoint */
1849:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in == 1)
 1645              		.loc 1 1849 0
 1646 0014 3B68     		ldr	r3, [r7]
 1647 0016 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
ARM GAS  /tmp/ccxRhxZv.s 			page 62


 1648 0018 012B     		cmp	r3, #1
 1649 001a 40F04981 		bne	.L62
1850:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1851:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /*Multi packet transfer*/
1852:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > ep->maxpacket)
 1650              		.loc 1 1852 0
 1651 001e 3B68     		ldr	r3, [r7]
 1652 0020 9A69     		ldr	r2, [r3, #24]
 1653 0022 3B68     		ldr	r3, [r7]
 1654 0024 1B69     		ldr	r3, [r3, #16]
 1655 0026 9A42     		cmp	r2, r3
 1656 0028 09D9     		bls	.L63
1853:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1854:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->maxpacket;
 1657              		.loc 1 1854 0
 1658 002a 3B68     		ldr	r3, [r7]
 1659 002c 1B69     		ldr	r3, [r3, #16]
 1660 002e BB62     		str	r3, [r7, #40]
1855:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len-=len; 
 1661              		.loc 1 1855 0
 1662 0030 3B68     		ldr	r3, [r7]
 1663 0032 9A69     		ldr	r2, [r3, #24]
 1664 0034 BB6A     		ldr	r3, [r7, #40]
 1665 0036 D21A     		subs	r2, r2, r3
 1666 0038 3B68     		ldr	r3, [r7]
 1667 003a 9A61     		str	r2, [r3, #24]
 1668 003c 05E0     		b	.L64
 1669              	.L63:
1856:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1857:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1858:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {  
1859:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->xfer_len;
 1670              		.loc 1 1859 0
 1671 003e 3B68     		ldr	r3, [r7]
 1672 0040 9B69     		ldr	r3, [r3, #24]
 1673 0042 BB62     		str	r3, [r7, #40]
1860:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len =0;
 1674              		.loc 1 1860 0
 1675 0044 3B68     		ldr	r3, [r7]
 1676 0046 0022     		movs	r2, #0
 1677 0048 9A61     		str	r2, [r3, #24]
 1678              	.L64:
1861:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1862:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1863:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* configure and validate Tx endpoint */
1864:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->doublebuffer == 0) 
 1679              		.loc 1 1864 0
 1680 004a 3B68     		ldr	r3, [r7]
 1681 004c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 1682 004e 002B     		cmp	r3, #0
 1683 0050 1BD1     		bne	.L65
1865:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1866:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USB_WritePMA(USBx, ep->xfer_buff, ep->pmaadress, len);
 1684              		.loc 1 1866 0
 1685 0052 3B68     		ldr	r3, [r7]
 1686 0054 5969     		ldr	r1, [r3, #20]
 1687 0056 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccxRhxZv.s 			page 63


 1688 0058 9A88     		ldrh	r2, [r3, #4]
 1689 005a BB6A     		ldr	r3, [r7, #40]
 1690 005c 9BB2     		uxth	r3, r3
 1691 005e 7868     		ldr	r0, [r7, #4]
 1692 0060 FFF7FEFF 		bl	USB_WritePMA
1867:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_CNT(USBx, ep->num, len);
 1693              		.loc 1 1867 0
 1694 0064 7B68     		ldr	r3, [r7, #4]
 1695 0066 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1696 006a 9BB2     		uxth	r3, r3
 1697 006c 1A46     		mov	r2, r3
 1698 006e 3B68     		ldr	r3, [r7]
 1699 0070 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1700 0072 DB00     		lsls	r3, r3, #3
 1701 0074 1344     		add	r3, r3, r2
 1702 0076 0233     		adds	r3, r3, #2
 1703 0078 5A00     		lsls	r2, r3, #1
 1704 007a 7B68     		ldr	r3, [r7, #4]
 1705 007c 1344     		add	r3, r3, r2
 1706 007e 03F58063 		add	r3, r3, #1024
 1707 0082 1A46     		mov	r2, r3
 1708 0084 BB6A     		ldr	r3, [r7, #40]
 1709 0086 1360     		str	r3, [r2]
 1710 0088 F6E0     		b	.L66
 1711              	.L65:
1868:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1869:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1870:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1871:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /* Write the data to the USB endpoint */
1872:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       if (PCD_GET_ENDPOINT(USBx, ep->num)& USB_EP_DTOG_TX)
 1712              		.loc 1 1872 0
 1713 008a 7A68     		ldr	r2, [r7, #4]
 1714 008c 3B68     		ldr	r3, [r7]
 1715 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1716 0090 9B00     		lsls	r3, r3, #2
 1717 0092 1344     		add	r3, r3, r2
 1718 0094 1B88     		ldrh	r3, [r3]	@ movhi
 1719 0096 9BB2     		uxth	r3, r3
 1720 0098 03F04003 		and	r3, r3, #64
 1721 009c 002B     		cmp	r3, #0
 1722 009e 59D0     		beq	.L67
1873:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1874:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* Set the Double buffer counter for pmabuffer1 */
1875:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         PCD_SET_EP_DBUF1_CNT(USBx, ep->num, ep->is_in, len);
 1723              		.loc 1 1875 0
 1724 00a0 3B68     		ldr	r3, [r7]
 1725 00a2 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1726 00a4 002B     		cmp	r3, #0
 1727 00a6 3BD1     		bne	.L68
 1728              	.LBB16:
 1729              		.loc 1 1875 0 is_stmt 0 discriminator 1
 1730 00a8 7B68     		ldr	r3, [r7, #4]
 1731 00aa B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1732 00ae 9BB2     		uxth	r3, r3
 1733 00b0 1A46     		mov	r2, r3
 1734 00b2 3B68     		ldr	r3, [r7]
 1735 00b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxRhxZv.s 			page 64


 1736 00b6 DB00     		lsls	r3, r3, #3
 1737 00b8 1344     		add	r3, r3, r2
 1738 00ba 0633     		adds	r3, r3, #6
 1739 00bc 5A00     		lsls	r2, r3, #1
 1740 00be 7B68     		ldr	r3, [r7, #4]
 1741 00c0 1344     		add	r3, r3, r2
 1742 00c2 03F58063 		add	r3, r3, #1024
 1743 00c6 BB60     		str	r3, [r7, #8]
 1744              	.LBB17:
 1745 00c8 BB6A     		ldr	r3, [r7, #40]
 1746 00ca 3E2B     		cmp	r3, #62
 1747 00cc 16D9     		bls	.L69
 1748              		.loc 1 1875 0 discriminator 3
 1749 00ce BB6A     		ldr	r3, [r7, #40]
 1750 00d0 5B09     		lsrs	r3, r3, #5
 1751 00d2 FB84     		strh	r3, [r7, #38]	@ movhi
 1752 00d4 BB6A     		ldr	r3, [r7, #40]
 1753 00d6 03F01F03 		and	r3, r3, #31
 1754 00da 002B     		cmp	r3, #0
 1755 00dc 02D1     		bne	.L70
 1756              		.loc 1 1875 0 discriminator 5
 1757 00de FB8C     		ldrh	r3, [r7, #38]
 1758 00e0 013B     		subs	r3, r3, #1
 1759 00e2 FB84     		strh	r3, [r7, #38]	@ movhi
 1760              	.L70:
 1761              		.loc 1 1875 0 discriminator 7
 1762 00e4 FB8C     		ldrh	r3, [r7, #38]	@ movhi
 1763 00e6 9B02     		lsls	r3, r3, #10
 1764 00e8 9BB2     		uxth	r3, r3
 1765 00ea 6FEA4343 		mvn	r3, r3, lsl #17
 1766 00ee 6FEA5343 		mvn	r3, r3, lsr #17
 1767 00f2 9BB2     		uxth	r3, r3
 1768 00f4 1A46     		mov	r2, r3
 1769 00f6 BB68     		ldr	r3, [r7, #8]
 1770 00f8 1A60     		str	r2, [r3]
 1771 00fa 27E0     		b	.L73
 1772              	.L69:
 1773              		.loc 1 1875 0 discriminator 4
 1774 00fc BB6A     		ldr	r3, [r7, #40]
 1775 00fe 5B08     		lsrs	r3, r3, #1
 1776 0100 FB84     		strh	r3, [r7, #38]	@ movhi
 1777 0102 BB6A     		ldr	r3, [r7, #40]
 1778 0104 03F00103 		and	r3, r3, #1
 1779 0108 002B     		cmp	r3, #0
 1780 010a 02D0     		beq	.L72
 1781              		.loc 1 1875 0 discriminator 8
 1782 010c FB8C     		ldrh	r3, [r7, #38]
 1783 010e 0133     		adds	r3, r3, #1
 1784 0110 FB84     		strh	r3, [r7, #38]	@ movhi
 1785              	.L72:
 1786              		.loc 1 1875 0 discriminator 10
 1787 0112 FB8C     		ldrh	r3, [r7, #38]	@ movhi
 1788 0114 9B02     		lsls	r3, r3, #10
 1789 0116 9BB2     		uxth	r3, r3
 1790 0118 1A46     		mov	r2, r3
 1791 011a BB68     		ldr	r3, [r7, #8]
 1792 011c 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccxRhxZv.s 			page 65


 1793 011e 15E0     		b	.L73
 1794              	.L68:
 1795              	.LBE17:
 1796              	.LBE16:
 1797              		.loc 1 1875 0 discriminator 2
 1798 0120 3B68     		ldr	r3, [r7]
 1799 0122 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1800 0124 012B     		cmp	r3, #1
 1801 0126 11D1     		bne	.L73
 1802              		.loc 1 1875 0 discriminator 11
 1803 0128 7B68     		ldr	r3, [r7, #4]
 1804 012a B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1805 012e 9BB2     		uxth	r3, r3
 1806 0130 1A46     		mov	r2, r3
 1807 0132 3B68     		ldr	r3, [r7]
 1808 0134 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1809 0136 DB00     		lsls	r3, r3, #3
 1810 0138 1344     		add	r3, r3, r2
 1811 013a 0233     		adds	r3, r3, #2
 1812 013c 5A00     		lsls	r2, r3, #1
 1813 013e 7B68     		ldr	r3, [r7, #4]
 1814 0140 1344     		add	r3, r3, r2
 1815 0142 03F58063 		add	r3, r3, #1024
 1816 0146 1A46     		mov	r2, r3
 1817 0148 BB6A     		ldr	r3, [r7, #40]
 1818 014a 1360     		str	r3, [r2]
 1819              	.L73:
1876:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         pmabuffer = ep->pmaaddr1;
 1820              		.loc 1 1876 0 is_stmt 1
 1821 014c 3B68     		ldr	r3, [r7]
 1822 014e 1B89     		ldrh	r3, [r3, #8]	@ movhi
 1823 0150 FB85     		strh	r3, [r7, #46]	@ movhi
 1824 0152 58E0     		b	.L74
 1825              	.L67:
1877:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1878:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       else
1879:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       {
1880:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         /* Set the Double buffer counter for pmabuffer0 */
1881:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         PCD_SET_EP_DBUF0_CNT(USBx, ep->num, ep->is_in, len);
 1826              		.loc 1 1881 0
 1827 0154 3B68     		ldr	r3, [r7]
 1828 0156 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1829 0158 002B     		cmp	r3, #0
 1830 015a 3BD1     		bne	.L75
 1831              	.LBB18:
 1832              		.loc 1 1881 0 is_stmt 0 discriminator 1
 1833 015c 7B68     		ldr	r3, [r7, #4]
 1834 015e B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1835 0162 9BB2     		uxth	r3, r3
 1836 0164 1A46     		mov	r2, r3
 1837 0166 3B68     		ldr	r3, [r7]
 1838 0168 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1839 016a DB00     		lsls	r3, r3, #3
 1840 016c 1344     		add	r3, r3, r2
 1841 016e 0233     		adds	r3, r3, #2
 1842 0170 5A00     		lsls	r2, r3, #1
 1843 0172 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccxRhxZv.s 			page 66


 1844 0174 1344     		add	r3, r3, r2
 1845 0176 03F58063 		add	r3, r3, #1024
 1846 017a FB60     		str	r3, [r7, #12]
 1847              	.LBB19:
 1848 017c BB6A     		ldr	r3, [r7, #40]
 1849 017e 3E2B     		cmp	r3, #62
 1850 0180 16D9     		bls	.L76
 1851              		.loc 1 1881 0 discriminator 3
 1852 0182 BB6A     		ldr	r3, [r7, #40]
 1853 0184 5B09     		lsrs	r3, r3, #5
 1854 0186 BB84     		strh	r3, [r7, #36]	@ movhi
 1855 0188 BB6A     		ldr	r3, [r7, #40]
 1856 018a 03F01F03 		and	r3, r3, #31
 1857 018e 002B     		cmp	r3, #0
 1858 0190 02D1     		bne	.L77
 1859              		.loc 1 1881 0 discriminator 5
 1860 0192 BB8C     		ldrh	r3, [r7, #36]
 1861 0194 013B     		subs	r3, r3, #1
 1862 0196 BB84     		strh	r3, [r7, #36]	@ movhi
 1863              	.L77:
 1864              		.loc 1 1881 0 discriminator 7
 1865 0198 BB8C     		ldrh	r3, [r7, #36]	@ movhi
 1866 019a 9B02     		lsls	r3, r3, #10
 1867 019c 9BB2     		uxth	r3, r3
 1868 019e 6FEA4343 		mvn	r3, r3, lsl #17
 1869 01a2 6FEA5343 		mvn	r3, r3, lsr #17
 1870 01a6 9BB2     		uxth	r3, r3
 1871 01a8 1A46     		mov	r2, r3
 1872 01aa FB68     		ldr	r3, [r7, #12]
 1873 01ac 1A60     		str	r2, [r3]
 1874 01ae 27E0     		b	.L80
 1875              	.L76:
 1876              		.loc 1 1881 0 discriminator 4
 1877 01b0 BB6A     		ldr	r3, [r7, #40]
 1878 01b2 5B08     		lsrs	r3, r3, #1
 1879 01b4 BB84     		strh	r3, [r7, #36]	@ movhi
 1880 01b6 BB6A     		ldr	r3, [r7, #40]
 1881 01b8 03F00103 		and	r3, r3, #1
 1882 01bc 002B     		cmp	r3, #0
 1883 01be 02D0     		beq	.L79
 1884              		.loc 1 1881 0 discriminator 8
 1885 01c0 BB8C     		ldrh	r3, [r7, #36]
 1886 01c2 0133     		adds	r3, r3, #1
 1887 01c4 BB84     		strh	r3, [r7, #36]	@ movhi
 1888              	.L79:
 1889              		.loc 1 1881 0 discriminator 10
 1890 01c6 BB8C     		ldrh	r3, [r7, #36]	@ movhi
 1891 01c8 9B02     		lsls	r3, r3, #10
 1892 01ca 9BB2     		uxth	r3, r3
 1893 01cc 1A46     		mov	r2, r3
 1894 01ce FB68     		ldr	r3, [r7, #12]
 1895 01d0 1A60     		str	r2, [r3]
 1896 01d2 15E0     		b	.L80
 1897              	.L75:
 1898              	.LBE19:
 1899              	.LBE18:
 1900              		.loc 1 1881 0 discriminator 2
ARM GAS  /tmp/ccxRhxZv.s 			page 67


 1901 01d4 3B68     		ldr	r3, [r7]
 1902 01d6 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1903 01d8 012B     		cmp	r3, #1
 1904 01da 11D1     		bne	.L80
 1905              		.loc 1 1881 0 discriminator 11
 1906 01dc 7B68     		ldr	r3, [r7, #4]
 1907 01de B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1908 01e2 9BB2     		uxth	r3, r3
 1909 01e4 1A46     		mov	r2, r3
 1910 01e6 3B68     		ldr	r3, [r7]
 1911 01e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1912 01ea DB00     		lsls	r3, r3, #3
 1913 01ec 1344     		add	r3, r3, r2
 1914 01ee 0233     		adds	r3, r3, #2
 1915 01f0 5A00     		lsls	r2, r3, #1
 1916 01f2 7B68     		ldr	r3, [r7, #4]
 1917 01f4 1344     		add	r3, r3, r2
 1918 01f6 03F58063 		add	r3, r3, #1024
 1919 01fa 1A46     		mov	r2, r3
 1920 01fc BB6A     		ldr	r3, [r7, #40]
 1921 01fe 1360     		str	r3, [r2]
 1922              	.L80:
1882:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****         pmabuffer = ep->pmaaddr0;
 1923              		.loc 1 1882 0 is_stmt 1
 1924 0200 3B68     		ldr	r3, [r7]
 1925 0202 DB88     		ldrh	r3, [r3, #6]	@ movhi
 1926 0204 FB85     		strh	r3, [r7, #46]	@ movhi
 1927              	.L74:
1883:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       }
1884:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       USB_WritePMA(USBx, ep->xfer_buff, pmabuffer, len);
 1928              		.loc 1 1884 0
 1929 0206 3B68     		ldr	r3, [r7]
 1930 0208 5969     		ldr	r1, [r3, #20]
 1931 020a BB6A     		ldr	r3, [r7, #40]
 1932 020c 9BB2     		uxth	r3, r3
 1933 020e FA8D     		ldrh	r2, [r7, #46]
 1934 0210 7868     		ldr	r0, [r7, #4]
 1935 0212 FFF7FEFF 		bl	USB_WritePMA
1885:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_FreeUserBuffer(USBx, ep->num, ep->is_in);
 1936              		.loc 1 1885 0
 1937 0216 3B68     		ldr	r3, [r7]
 1938 0218 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1939 021a 002B     		cmp	r3, #0
 1940 021c 14D1     		bne	.L81
 1941              		.loc 1 1885 0 is_stmt 0 discriminator 1
 1942 021e 7A68     		ldr	r2, [r7, #4]
 1943 0220 3B68     		ldr	r3, [r7]
 1944 0222 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1945 0224 9B00     		lsls	r3, r3, #2
 1946 0226 1344     		add	r3, r3, r2
 1947 0228 1B88     		ldrh	r3, [r3]	@ movhi
 1948 022a 9AB2     		uxth	r2, r3
 1949 022c 40F60F73 		movw	r3, #3855
 1950 0230 1340     		ands	r3, r3, r2
 1951 0232 99B2     		uxth	r1, r3
 1952 0234 7A68     		ldr	r2, [r7, #4]
 1953 0236 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccxRhxZv.s 			page 68


 1954 0238 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1955 023a 9B00     		lsls	r3, r3, #2
 1956 023c 1A44     		add	r2, r2, r3
 1957 023e 924B     		ldr	r3, .L103
 1958 0240 0B43     		orrs	r3, r3, r1
 1959 0242 9BB2     		uxth	r3, r3
 1960 0244 1380     		strh	r3, [r2]	@ movhi
 1961 0246 17E0     		b	.L66
 1962              	.L81:
 1963              		.loc 1 1885 0 discriminator 2
 1964 0248 3B68     		ldr	r3, [r7]
 1965 024a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1966 024c 012B     		cmp	r3, #1
 1967 024e 13D1     		bne	.L66
 1968              		.loc 1 1885 0 discriminator 3
 1969 0250 7A68     		ldr	r2, [r7, #4]
 1970 0252 3B68     		ldr	r3, [r7]
 1971 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1972 0256 9B00     		lsls	r3, r3, #2
 1973 0258 1344     		add	r3, r3, r2
 1974 025a 1B88     		ldrh	r3, [r3]	@ movhi
 1975 025c 9AB2     		uxth	r2, r3
 1976 025e 40F60F73 		movw	r3, #3855
 1977 0262 1340     		ands	r3, r3, r2
 1978 0264 99B2     		uxth	r1, r3
 1979 0266 7A68     		ldr	r2, [r7, #4]
 1980 0268 3B68     		ldr	r3, [r7]
 1981 026a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1982 026c 9B00     		lsls	r3, r3, #2
 1983 026e 1A44     		add	r2, r2, r3
 1984 0270 864B     		ldr	r3, .L103+4
 1985 0272 0B43     		orrs	r3, r3, r1
 1986 0274 9BB2     		uxth	r3, r3
 1987 0276 1380     		strh	r3, [r2]	@ movhi
 1988              	.L66:
 1989              	.LBB20:
1886:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1887:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1888:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_VALID);
 1990              		.loc 1 1888 0 is_stmt 1
 1991 0278 7A68     		ldr	r2, [r7, #4]
 1992 027a 3B68     		ldr	r3, [r7]
 1993 027c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1994 027e 9B00     		lsls	r3, r3, #2
 1995 0280 1344     		add	r3, r3, r2
 1996 0282 1B88     		ldrh	r3, [r3]	@ movhi
 1997 0284 9BB2     		uxth	r3, r3
 1998 0286 23F4E043 		bic	r3, r3, #28672
 1999 028a 23F04003 		bic	r3, r3, #64
 2000 028e 9CB2     		uxth	r4, r3
 2001 0290 84F01003 		eor	r3, r4, #16
 2002 0294 9CB2     		uxth	r4, r3
 2003 0296 84F02003 		eor	r3, r4, #32
 2004 029a 9CB2     		uxth	r4, r3
 2005 029c 7A68     		ldr	r2, [r7, #4]
 2006 029e 3B68     		ldr	r3, [r7]
 2007 02a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxRhxZv.s 			page 69


 2008 02a2 9B00     		lsls	r3, r3, #2
 2009 02a4 1A44     		add	r2, r2, r3
 2010 02a6 7A4B     		ldr	r3, .L103+8
 2011 02a8 2343     		orrs	r3, r3, r4
 2012 02aa 9BB2     		uxth	r3, r3
 2013 02ac 1380     		strh	r3, [r2]	@ movhi
 2014              	.LBE20:
 2015 02ae 22E1     		b	.L82
 2016              	.L62:
1889:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1890:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else /* OUT endpoint */
1891:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1892:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* Multi packet transfer*/
1893:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->xfer_len > ep->maxpacket)
 2017              		.loc 1 1893 0
 2018 02b0 3B68     		ldr	r3, [r7]
 2019 02b2 9A69     		ldr	r2, [r3, #24]
 2020 02b4 3B68     		ldr	r3, [r7]
 2021 02b6 1B69     		ldr	r3, [r3, #16]
 2022 02b8 9A42     		cmp	r2, r3
 2023 02ba 09D9     		bls	.L83
1894:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1895:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->maxpacket;
 2024              		.loc 1 1895 0
 2025 02bc 3B68     		ldr	r3, [r7]
 2026 02be 1B69     		ldr	r3, [r3, #16]
 2027 02c0 BB62     		str	r3, [r7, #40]
1896:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len-=len; 
 2028              		.loc 1 1896 0
 2029 02c2 3B68     		ldr	r3, [r7]
 2030 02c4 9A69     		ldr	r2, [r3, #24]
 2031 02c6 BB6A     		ldr	r3, [r7, #40]
 2032 02c8 D21A     		subs	r2, r2, r3
 2033 02ca 3B68     		ldr	r3, [r7]
 2034 02cc 9A61     		str	r2, [r3, #24]
 2035 02ce 05E0     		b	.L84
 2036              	.L83:
1897:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1898:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1899:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1900:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       len=ep->xfer_len;
 2037              		.loc 1 1900 0
 2038 02d0 3B68     		ldr	r3, [r7]
 2039 02d2 9B69     		ldr	r3, [r3, #24]
 2040 02d4 BB62     		str	r3, [r7, #40]
1901:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       ep->xfer_len =0;
 2041              		.loc 1 1901 0
 2042 02d6 3B68     		ldr	r3, [r7]
 2043 02d8 0022     		movs	r2, #0
 2044 02da 9A61     		str	r2, [r3, #24]
 2045              	.L84:
1902:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1903:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1904:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* configure and validate Rx endpoint */
1905:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->doublebuffer == 0) 
 2046              		.loc 1 1905 0
 2047 02dc 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccxRhxZv.s 			page 70


 2048 02de 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2049 02e0 002B     		cmp	r3, #0
 2050 02e2 3BD1     		bne	.L85
 2051              	.LBB21:
1906:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1907:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set RX buffer count*/
1908:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_CNT(USBx, ep->num, len);
 2052              		.loc 1 1908 0
 2053 02e4 7B68     		ldr	r3, [r7, #4]
 2054 02e6 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2055 02ea 9BB2     		uxth	r3, r3
 2056 02ec 1A46     		mov	r2, r3
 2057 02ee 3B68     		ldr	r3, [r7]
 2058 02f0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2059 02f2 DB00     		lsls	r3, r3, #3
 2060 02f4 1344     		add	r3, r3, r2
 2061 02f6 0633     		adds	r3, r3, #6
 2062 02f8 5A00     		lsls	r2, r3, #1
 2063 02fa 7B68     		ldr	r3, [r7, #4]
 2064 02fc 1344     		add	r3, r3, r2
 2065 02fe 03F58063 		add	r3, r3, #1024
 2066 0302 3B61     		str	r3, [r7, #16]
 2067              	.LBB22:
 2068 0304 BB6A     		ldr	r3, [r7, #40]
 2069 0306 3E2B     		cmp	r3, #62
 2070 0308 16D9     		bls	.L86
 2071              		.loc 1 1908 0 is_stmt 0 discriminator 1
 2072 030a BB6A     		ldr	r3, [r7, #40]
 2073 030c 5B09     		lsrs	r3, r3, #5
 2074 030e 7B84     		strh	r3, [r7, #34]	@ movhi
 2075 0310 BB6A     		ldr	r3, [r7, #40]
 2076 0312 03F01F03 		and	r3, r3, #31
 2077 0316 002B     		cmp	r3, #0
 2078 0318 02D1     		bne	.L87
 2079              		.loc 1 1908 0 discriminator 3
 2080 031a 7B8C     		ldrh	r3, [r7, #34]
 2081 031c 013B     		subs	r3, r3, #1
 2082 031e 7B84     		strh	r3, [r7, #34]	@ movhi
 2083              	.L87:
 2084              		.loc 1 1908 0 discriminator 5
 2085 0320 7B8C     		ldrh	r3, [r7, #34]	@ movhi
 2086 0322 9B02     		lsls	r3, r3, #10
 2087 0324 9BB2     		uxth	r3, r3
 2088 0326 6FEA4343 		mvn	r3, r3, lsl #17
 2089 032a 6FEA5343 		mvn	r3, r3, lsr #17
 2090 032e 9BB2     		uxth	r3, r3
 2091 0330 1A46     		mov	r2, r3
 2092 0332 3B69     		ldr	r3, [r7, #16]
 2093 0334 1A60     		str	r2, [r3]
 2094 0336 C3E0     		b	.L90
 2095              	.L86:
 2096              		.loc 1 1908 0 discriminator 2
 2097 0338 BB6A     		ldr	r3, [r7, #40]
 2098 033a 5B08     		lsrs	r3, r3, #1
 2099 033c 7B84     		strh	r3, [r7, #34]	@ movhi
 2100 033e BB6A     		ldr	r3, [r7, #40]
 2101 0340 03F00103 		and	r3, r3, #1
ARM GAS  /tmp/ccxRhxZv.s 			page 71


 2102 0344 002B     		cmp	r3, #0
 2103 0346 02D0     		beq	.L89
 2104              		.loc 1 1908 0 discriminator 6
 2105 0348 7B8C     		ldrh	r3, [r7, #34]
 2106 034a 0133     		adds	r3, r3, #1
 2107 034c 7B84     		strh	r3, [r7, #34]	@ movhi
 2108              	.L89:
 2109              		.loc 1 1908 0 discriminator 8
 2110 034e 7B8C     		ldrh	r3, [r7, #34]	@ movhi
 2111 0350 9B02     		lsls	r3, r3, #10
 2112 0352 9BB2     		uxth	r3, r3
 2113 0354 1A46     		mov	r2, r3
 2114 0356 3B69     		ldr	r3, [r7, #16]
 2115 0358 1A60     		str	r2, [r3]
 2116 035a B1E0     		b	.L90
 2117              	.L85:
 2118              	.LBE22:
 2119              	.LBE21:
1909:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1910:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1911:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1912:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       /*Set the Double buffer counter*/
1913:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_DBUF_CNT(USBx, ep->num, ep->is_in, len);
 2120              		.loc 1 1913 0 is_stmt 1
 2121 035c 3B68     		ldr	r3, [r7]
 2122 035e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2123 0360 002B     		cmp	r3, #0
 2124 0362 3BD1     		bne	.L91
 2125              	.LBB23:
 2126              		.loc 1 1913 0 is_stmt 0 discriminator 1
 2127 0364 7B68     		ldr	r3, [r7, #4]
 2128 0366 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2129 036a 9BB2     		uxth	r3, r3
 2130 036c 1A46     		mov	r2, r3
 2131 036e 3B68     		ldr	r3, [r7]
 2132 0370 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2133 0372 DB00     		lsls	r3, r3, #3
 2134 0374 1344     		add	r3, r3, r2
 2135 0376 0233     		adds	r3, r3, #2
 2136 0378 5A00     		lsls	r2, r3, #1
 2137 037a 7B68     		ldr	r3, [r7, #4]
 2138 037c 1344     		add	r3, r3, r2
 2139 037e 03F58063 		add	r3, r3, #1024
 2140 0382 BB61     		str	r3, [r7, #24]
 2141              	.LBB24:
 2142 0384 BB6A     		ldr	r3, [r7, #40]
 2143 0386 3E2B     		cmp	r3, #62
 2144 0388 16D9     		bls	.L92
 2145              		.loc 1 1913 0 discriminator 3
 2146 038a BB6A     		ldr	r3, [r7, #40]
 2147 038c 5B09     		lsrs	r3, r3, #5
 2148 038e 3B84     		strh	r3, [r7, #32]	@ movhi
 2149 0390 BB6A     		ldr	r3, [r7, #40]
 2150 0392 03F01F03 		and	r3, r3, #31
 2151 0396 002B     		cmp	r3, #0
 2152 0398 02D1     		bne	.L93
 2153              		.loc 1 1913 0 discriminator 5
ARM GAS  /tmp/ccxRhxZv.s 			page 72


 2154 039a 3B8C     		ldrh	r3, [r7, #32]
 2155 039c 013B     		subs	r3, r3, #1
 2156 039e 3B84     		strh	r3, [r7, #32]	@ movhi
 2157              	.L93:
 2158              		.loc 1 1913 0 discriminator 7
 2159 03a0 3B8C     		ldrh	r3, [r7, #32]	@ movhi
 2160 03a2 9B02     		lsls	r3, r3, #10
 2161 03a4 9BB2     		uxth	r3, r3
 2162 03a6 6FEA4343 		mvn	r3, r3, lsl #17
 2163 03aa 6FEA5343 		mvn	r3, r3, lsr #17
 2164 03ae 9BB2     		uxth	r3, r3
 2165 03b0 1A46     		mov	r2, r3
 2166 03b2 BB69     		ldr	r3, [r7, #24]
 2167 03b4 1A60     		str	r2, [r3]
 2168 03b6 27E0     		b	.L96
 2169              	.L92:
 2170              		.loc 1 1913 0 discriminator 4
 2171 03b8 BB6A     		ldr	r3, [r7, #40]
 2172 03ba 5B08     		lsrs	r3, r3, #1
 2173 03bc 3B84     		strh	r3, [r7, #32]	@ movhi
 2174 03be BB6A     		ldr	r3, [r7, #40]
 2175 03c0 03F00103 		and	r3, r3, #1
 2176 03c4 002B     		cmp	r3, #0
 2177 03c6 02D0     		beq	.L95
 2178              		.loc 1 1913 0 discriminator 8
 2179 03c8 3B8C     		ldrh	r3, [r7, #32]
 2180 03ca 0133     		adds	r3, r3, #1
 2181 03cc 3B84     		strh	r3, [r7, #32]	@ movhi
 2182              	.L95:
 2183              		.loc 1 1913 0 discriminator 10
 2184 03ce 3B8C     		ldrh	r3, [r7, #32]	@ movhi
 2185 03d0 9B02     		lsls	r3, r3, #10
 2186 03d2 9BB2     		uxth	r3, r3
 2187 03d4 1A46     		mov	r2, r3
 2188 03d6 BB69     		ldr	r3, [r7, #24]
 2189 03d8 1A60     		str	r2, [r3]
 2190 03da 15E0     		b	.L96
 2191              	.L91:
 2192              	.LBE24:
 2193              	.LBE23:
 2194              		.loc 1 1913 0 discriminator 2
 2195 03dc 3B68     		ldr	r3, [r7]
 2196 03de 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2197 03e0 012B     		cmp	r3, #1
 2198 03e2 11D1     		bne	.L96
 2199              		.loc 1 1913 0 discriminator 11
 2200 03e4 7B68     		ldr	r3, [r7, #4]
 2201 03e6 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2202 03ea 9BB2     		uxth	r3, r3
 2203 03ec 1A46     		mov	r2, r3
 2204 03ee 3B68     		ldr	r3, [r7]
 2205 03f0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2206 03f2 DB00     		lsls	r3, r3, #3
 2207 03f4 1344     		add	r3, r3, r2
 2208 03f6 0233     		adds	r3, r3, #2
 2209 03f8 5A00     		lsls	r2, r3, #1
 2210 03fa 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccxRhxZv.s 			page 73


 2211 03fc 1344     		add	r3, r3, r2
 2212 03fe 03F58063 		add	r3, r3, #1024
 2213 0402 1A46     		mov	r2, r3
 2214 0404 BB6A     		ldr	r3, [r7, #40]
 2215 0406 1360     		str	r3, [r2]
 2216              	.L96:
 2217              		.loc 1 1913 0 discriminator 13
 2218 0408 3B68     		ldr	r3, [r7]
 2219 040a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2220 040c 002B     		cmp	r3, #0
 2221 040e 41D1     		bne	.L97
 2222              	.LBB25:
 2223              		.loc 1 1913 0 discriminator 14
 2224 0410 7B68     		ldr	r3, [r7, #4]
 2225 0412 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2226 0416 9BB2     		uxth	r3, r3
 2227 0418 1A46     		mov	r2, r3
 2228 041a 3B68     		ldr	r3, [r7]
 2229 041c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2230 041e DB00     		lsls	r3, r3, #3
 2231 0420 1344     		add	r3, r3, r2
 2232 0422 0633     		adds	r3, r3, #6
 2233 0424 5A00     		lsls	r2, r3, #1
 2234 0426 7B68     		ldr	r3, [r7, #4]
 2235 0428 1344     		add	r3, r3, r2
 2236 042a 03F58063 		add	r3, r3, #1024
 2237 042e 7B61     		str	r3, [r7, #20]
 2238              	.LBB26:
 2239 0430 BB6A     		ldr	r3, [r7, #40]
 2240 0432 3E2B     		cmp	r3, #62
 2241 0434 16D9     		bls	.L98
 2242              		.loc 1 1913 0 discriminator 16
 2243 0436 BB6A     		ldr	r3, [r7, #40]
 2244 0438 5B09     		lsrs	r3, r3, #5
 2245 043a FB83     		strh	r3, [r7, #30]	@ movhi
 2246 043c BB6A     		ldr	r3, [r7, #40]
 2247 043e 03F01F03 		and	r3, r3, #31
 2248 0442 002B     		cmp	r3, #0
 2249 0444 02D1     		bne	.L99
 2250              		.loc 1 1913 0 discriminator 18
 2251 0446 FB8B     		ldrh	r3, [r7, #30]
 2252 0448 013B     		subs	r3, r3, #1
 2253 044a FB83     		strh	r3, [r7, #30]	@ movhi
 2254              	.L99:
 2255              		.loc 1 1913 0 discriminator 20
 2256 044c FB8B     		ldrh	r3, [r7, #30]	@ movhi
 2257 044e 9B02     		lsls	r3, r3, #10
 2258 0450 9BB2     		uxth	r3, r3
 2259 0452 6FEA4343 		mvn	r3, r3, lsl #17
 2260 0456 6FEA5343 		mvn	r3, r3, lsr #17
 2261 045a 9BB2     		uxth	r3, r3
 2262 045c 1A46     		mov	r2, r3
 2263 045e 7B69     		ldr	r3, [r7, #20]
 2264 0460 1A60     		str	r2, [r3]
 2265 0462 2DE0     		b	.L90
 2266              	.L98:
 2267              		.loc 1 1913 0 discriminator 17
ARM GAS  /tmp/ccxRhxZv.s 			page 74


 2268 0464 BB6A     		ldr	r3, [r7, #40]
 2269 0466 5B08     		lsrs	r3, r3, #1
 2270 0468 FB83     		strh	r3, [r7, #30]	@ movhi
 2271 046a BB6A     		ldr	r3, [r7, #40]
 2272 046c 03F00103 		and	r3, r3, #1
 2273 0470 002B     		cmp	r3, #0
 2274 0472 02D0     		beq	.L101
 2275              		.loc 1 1913 0 discriminator 21
 2276 0474 FB8B     		ldrh	r3, [r7, #30]
 2277 0476 0133     		adds	r3, r3, #1
 2278 0478 FB83     		strh	r3, [r7, #30]	@ movhi
 2279              	.L101:
 2280              		.loc 1 1913 0 discriminator 23
 2281 047a FB8B     		ldrh	r3, [r7, #30]	@ movhi
 2282 047c 9B02     		lsls	r3, r3, #10
 2283 047e 9BB2     		uxth	r3, r3
 2284 0480 1A46     		mov	r2, r3
 2285 0482 7B69     		ldr	r3, [r7, #20]
 2286 0484 1A60     		str	r2, [r3]
 2287 0486 1BE0     		b	.L90
 2288              	.L104:
 2289              		.align	2
 2290              	.L103:
 2291 0488 C080FFFF 		.word	-32576
 2292 048c 80C0FFFF 		.word	-16256
 2293 0490 8080FFFF 		.word	-32640
 2294              	.L97:
 2295              	.LBE26:
 2296              	.LBE25:
 2297              		.loc 1 1913 0 discriminator 15
 2298 0494 3B68     		ldr	r3, [r7]
 2299 0496 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2300 0498 012B     		cmp	r3, #1
 2301 049a 11D1     		bne	.L90
 2302              		.loc 1 1913 0 discriminator 24
 2303 049c 7B68     		ldr	r3, [r7, #4]
 2304 049e B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2305 04a2 9BB2     		uxth	r3, r3
 2306 04a4 1A46     		mov	r2, r3
 2307 04a6 3B68     		ldr	r3, [r7]
 2308 04a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2309 04aa DB00     		lsls	r3, r3, #3
 2310 04ac 1344     		add	r3, r3, r2
 2311 04ae 0233     		adds	r3, r3, #2
 2312 04b0 5A00     		lsls	r2, r3, #1
 2313 04b2 7B68     		ldr	r3, [r7, #4]
 2314 04b4 1344     		add	r3, r3, r2
 2315 04b6 03F58063 		add	r3, r3, #1024
 2316 04ba 1A46     		mov	r2, r3
 2317 04bc BB6A     		ldr	r3, [r7, #40]
 2318 04be 1360     		str	r3, [r2]
 2319              	.L90:
 2320              	.LBB27:
1914:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1915:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     
1916:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 2321              		.loc 1 1916 0 is_stmt 1
ARM GAS  /tmp/ccxRhxZv.s 			page 75


 2322 04c0 7A68     		ldr	r2, [r7, #4]
 2323 04c2 3B68     		ldr	r3, [r7]
 2324 04c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2325 04c6 9B00     		lsls	r3, r3, #2
 2326 04c8 1344     		add	r3, r3, r2
 2327 04ca 1B88     		ldrh	r3, [r3]	@ movhi
 2328 04cc 9BB2     		uxth	r3, r3
 2329 04ce 23F48043 		bic	r3, r3, #16384
 2330 04d2 23F07003 		bic	r3, r3, #112
 2331 04d6 9CB2     		uxth	r4, r3
 2332 04d8 84F48053 		eor	r3, r4, #4096
 2333 04dc 9CB2     		uxth	r4, r3
 2334 04de 84F40053 		eor	r3, r4, #8192
 2335 04e2 9CB2     		uxth	r4, r3
 2336 04e4 7A68     		ldr	r2, [r7, #4]
 2337 04e6 3B68     		ldr	r3, [r7]
 2338 04e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2339 04ea 9B00     		lsls	r3, r3, #2
 2340 04ec 1A44     		add	r2, r2, r3
 2341 04ee 044B     		ldr	r3, .L105
 2342 04f0 2343     		orrs	r3, r3, r4
 2343 04f2 9BB2     		uxth	r3, r3
 2344 04f4 1380     		strh	r3, [r2]	@ movhi
 2345              	.L82:
 2346              	.LBE27:
1917:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1918:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
1919:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2347              		.loc 1 1919 0
 2348 04f6 0023     		movs	r3, #0
1920:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2349              		.loc 1 1920 0
 2350 04f8 1846     		mov	r0, r3
 2351 04fa 3437     		adds	r7, r7, #52
 2352              	.LCFI61:
 2353              		.cfi_def_cfa_offset 12
 2354 04fc BD46     		mov	sp, r7
 2355              	.LCFI62:
 2356              		.cfi_def_cfa_register 13
 2357              		@ sp needed
 2358 04fe 90BD     		pop	{r4, r7, pc}
 2359              	.L106:
 2360              		.align	2
 2361              	.L105:
 2362 0500 8080FFFF 		.word	-32640
 2363              		.cfi_endproc
 2364              	.LFE75:
 2366              		.section	.text.USB_WritePacket,"ax",%progbits
 2367              		.align	1
 2368              		.global	USB_WritePacket
 2369              		.syntax unified
 2370              		.thumb
 2371              		.thumb_func
 2372              		.fpu softvfp
 2374              	USB_WritePacket:
 2375              	.LFB76:
1921:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
ARM GAS  /tmp/ccxRhxZv.s 			page 76


1922:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1923:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_WritePacket : Writes a packet into the Tx FIFO associated 
1924:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
1925:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1926:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  src :  pointer to source buffer
1927:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ch_ep_num : endpoint or host channel number
1928:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to write
1929:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1930:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1931:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_WritePacket(USB_TypeDef *USBx, uint8_t *src, uint8_t ch_ep_num, uint16_t len)
1932:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2376              		.loc 1 1932 0
 2377              		.cfi_startproc
 2378              		@ args = 0, pretend = 0, frame = 16
 2379              		@ frame_needed = 1, uses_anonymous_args = 0
 2380              		@ link register save eliminated.
 2381 0000 80B4     		push	{r7}
 2382              	.LCFI63:
 2383              		.cfi_def_cfa_offset 4
 2384              		.cfi_offset 7, -4
 2385 0002 85B0     		sub	sp, sp, #20
 2386              	.LCFI64:
 2387              		.cfi_def_cfa_offset 24
 2388 0004 00AF     		add	r7, sp, #0
 2389              	.LCFI65:
 2390              		.cfi_def_cfa_register 7
 2391 0006 F860     		str	r0, [r7, #12]
 2392 0008 B960     		str	r1, [r7, #8]
 2393 000a 1146     		mov	r1, r2
 2394 000c 1A46     		mov	r2, r3
 2395 000e 0B46     		mov	r3, r1
 2396 0010 FB71     		strb	r3, [r7, #7]
 2397 0012 1346     		mov	r3, r2	@ movhi
 2398 0014 BB80     		strh	r3, [r7, #4]	@ movhi
1933:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1934:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1935:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(src);
1936:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(ch_ep_num);
1937:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(len);
1938:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1939:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1940:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1941:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1942:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2399              		.loc 1 1942 0
 2400 0016 0023     		movs	r3, #0
1943:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2401              		.loc 1 1943 0
 2402 0018 1846     		mov	r0, r3
 2403 001a 1437     		adds	r7, r7, #20
 2404              	.LCFI66:
 2405              		.cfi_def_cfa_offset 4
 2406 001c BD46     		mov	sp, r7
 2407              	.LCFI67:
 2408              		.cfi_def_cfa_register 13
 2409              		@ sp needed
 2410 001e 80BC     		pop	{r7}
ARM GAS  /tmp/ccxRhxZv.s 			page 77


 2411              	.LCFI68:
 2412              		.cfi_restore 7
 2413              		.cfi_def_cfa_offset 0
 2414 0020 7047     		bx	lr
 2415              		.cfi_endproc
 2416              	.LFE76:
 2418              		.section	.text.USB_ReadPacket,"ax",%progbits
 2419              		.align	1
 2420              		.global	USB_ReadPacket
 2421              		.syntax unified
 2422              		.thumb
 2423              		.thumb_func
 2424              		.fpu softvfp
 2426              	USB_ReadPacket:
 2427              	.LFB77:
1944:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1945:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1946:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadPacket : read a packet from the Tx FIFO associated 
1947:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *         with the EP/channel
1948:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1949:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  dest : destination pointer
1950:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  len : Number of bytes to read
1951:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval pointer to destination buffer
1952:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1953:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void *USB_ReadPacket(USB_TypeDef *USBx, uint8_t *dest, uint16_t len)
1954:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2428              		.loc 1 1954 0
 2429              		.cfi_startproc
 2430              		@ args = 0, pretend = 0, frame = 16
 2431              		@ frame_needed = 1, uses_anonymous_args = 0
 2432              		@ link register save eliminated.
 2433 0000 80B4     		push	{r7}
 2434              	.LCFI69:
 2435              		.cfi_def_cfa_offset 4
 2436              		.cfi_offset 7, -4
 2437 0002 85B0     		sub	sp, sp, #20
 2438              	.LCFI70:
 2439              		.cfi_def_cfa_offset 24
 2440 0004 00AF     		add	r7, sp, #0
 2441              	.LCFI71:
 2442              		.cfi_def_cfa_register 7
 2443 0006 F860     		str	r0, [r7, #12]
 2444 0008 B960     		str	r1, [r7, #8]
 2445 000a 1346     		mov	r3, r2
 2446 000c FB80     		strh	r3, [r7, #6]	@ movhi
1955:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1956:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
1957:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(dest);
1958:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(len);
1959:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
1960:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
1961:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1962:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
1963:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return ((void *)NULL);
 2447              		.loc 1 1963 0
 2448 000e 0023     		movs	r3, #0
1964:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
ARM GAS  /tmp/ccxRhxZv.s 			page 78


 2449              		.loc 1 1964 0
 2450 0010 1846     		mov	r0, r3
 2451 0012 1437     		adds	r7, r7, #20
 2452              	.LCFI72:
 2453              		.cfi_def_cfa_offset 4
 2454 0014 BD46     		mov	sp, r7
 2455              	.LCFI73:
 2456              		.cfi_def_cfa_register 13
 2457              		@ sp needed
 2458 0016 80BC     		pop	{r7}
 2459              	.LCFI74:
 2460              		.cfi_restore 7
 2461              		.cfi_def_cfa_offset 0
 2462 0018 7047     		bx	lr
 2463              		.cfi_endproc
 2464              	.LFE77:
 2466              		.section	.text.USB_EPSetStall,"ax",%progbits
 2467              		.align	1
 2468              		.global	USB_EPSetStall
 2469              		.syntax unified
 2470              		.thumb
 2471              		.thumb_func
 2472              		.fpu softvfp
 2474              	USB_EPSetStall:
 2475              	.LFB78:
1965:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1966:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1967:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPSetStall : set a stall condition over an EP
1968:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1969:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure   
1970:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1971:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1972:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPSetStall(USB_TypeDef *USBx , USB_EPTypeDef *ep)
1973:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2476              		.loc 1 1973 0
 2477              		.cfi_startproc
 2478              		@ args = 0, pretend = 0, frame = 8
 2479              		@ frame_needed = 1, uses_anonymous_args = 0
 2480              		@ link register save eliminated.
 2481 0000 90B4     		push	{r4, r7}
 2482              	.LCFI75:
 2483              		.cfi_def_cfa_offset 8
 2484              		.cfi_offset 4, -8
 2485              		.cfi_offset 7, -4
 2486 0002 82B0     		sub	sp, sp, #8
 2487              	.LCFI76:
 2488              		.cfi_def_cfa_offset 16
 2489 0004 00AF     		add	r7, sp, #0
 2490              	.LCFI77:
 2491              		.cfi_def_cfa_register 7
 2492 0006 7860     		str	r0, [r7, #4]
 2493 0008 3960     		str	r1, [r7]
1974:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->num == 0)
 2494              		.loc 1 1974 0
 2495 000a 3B68     		ldr	r3, [r7]
 2496 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2497 000e 002B     		cmp	r3, #0
ARM GAS  /tmp/ccxRhxZv.s 			page 79


 2498 0010 18D1     		bne	.L112
 2499              	.LBB28:
1975:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1976:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     /* This macro sets STALL status for RX & TX*/ 
1977:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_TXRX_STATUS(USBx, ep->num, USB_EP_RX_STALL, USB_EP_TX_STALL); 
 2500              		.loc 1 1977 0
 2501 0012 7A68     		ldr	r2, [r7, #4]
 2502 0014 3B68     		ldr	r3, [r7]
 2503 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2504 0018 9B00     		lsls	r3, r3, #2
 2505 001a 1344     		add	r3, r3, r2
 2506 001c 1B88     		ldrh	r3, [r3]	@ movhi
 2507 001e 9BB2     		uxth	r3, r3
 2508 0020 4BF6BF74 		movw	r4, #49087
 2509 0024 1C40     		ands	r4, r4, r3
 2510 0026 84F48054 		eor	r4, r4, #4096
 2511 002a 84F01004 		eor	r4, r4, #16
 2512 002e A1B2     		uxth	r1, r4
 2513 0030 7A68     		ldr	r2, [r7, #4]
 2514 0032 3B68     		ldr	r3, [r7]
 2515 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2516 0036 9B00     		lsls	r3, r3, #2
 2517 0038 1A44     		add	r2, r2, r3
 2518 003a 204B     		ldr	r3, .L116
 2519 003c 0B43     		orrs	r3, r3, r1
 2520 003e 9BB2     		uxth	r3, r3
 2521 0040 1380     		strh	r3, [r2]	@ movhi
 2522              	.LBE28:
 2523 0042 34E0     		b	.L113
 2524              	.L112:
1978:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1979:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
1980:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
1981:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     if (ep->is_in)
 2525              		.loc 1 1981 0
 2526 0044 3B68     		ldr	r3, [r7]
 2527 0046 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2528 0048 002B     		cmp	r3, #0
 2529 004a 18D0     		beq	.L114
 2530              	.LBB29:
1982:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1983:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num , USB_EP_TX_STALL); 
 2531              		.loc 1 1983 0
 2532 004c 7A68     		ldr	r2, [r7, #4]
 2533 004e 3B68     		ldr	r3, [r7]
 2534 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2535 0052 9B00     		lsls	r3, r3, #2
 2536 0054 1344     		add	r3, r3, r2
 2537 0056 1B88     		ldrh	r3, [r3]	@ movhi
 2538 0058 9BB2     		uxth	r3, r3
 2539 005a 23F4E043 		bic	r3, r3, #28672
 2540 005e 23F04003 		bic	r3, r3, #64
 2541 0062 9CB2     		uxth	r4, r3
 2542 0064 84F01003 		eor	r3, r4, #16
 2543 0068 9CB2     		uxth	r4, r3
 2544 006a 7A68     		ldr	r2, [r7, #4]
 2545 006c 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccxRhxZv.s 			page 80


 2546 006e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2547 0070 9B00     		lsls	r3, r3, #2
 2548 0072 1A44     		add	r2, r2, r3
 2549 0074 114B     		ldr	r3, .L116
 2550 0076 2343     		orrs	r3, r3, r4
 2551 0078 9BB2     		uxth	r3, r3
 2552 007a 1380     		strh	r3, [r2]	@ movhi
 2553              	.LBE29:
 2554 007c 17E0     		b	.L113
 2555              	.L114:
 2556              	.LBB30:
1984:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1985:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     else
1986:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     {
1987:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num , USB_EP_RX_STALL);
 2557              		.loc 1 1987 0
 2558 007e 7A68     		ldr	r2, [r7, #4]
 2559 0080 3B68     		ldr	r3, [r7]
 2560 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2561 0084 9B00     		lsls	r3, r3, #2
 2562 0086 1344     		add	r3, r3, r2
 2563 0088 1B88     		ldrh	r3, [r3]	@ movhi
 2564 008a 9BB2     		uxth	r3, r3
 2565 008c 23F48043 		bic	r3, r3, #16384
 2566 0090 23F07003 		bic	r3, r3, #112
 2567 0094 9CB2     		uxth	r4, r3
 2568 0096 84F48053 		eor	r3, r4, #4096
 2569 009a 9CB2     		uxth	r4, r3
 2570 009c 7A68     		ldr	r2, [r7, #4]
 2571 009e 3B68     		ldr	r3, [r7]
 2572 00a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2573 00a2 9B00     		lsls	r3, r3, #2
 2574 00a4 1A44     		add	r2, r2, r3
 2575 00a6 054B     		ldr	r3, .L116
 2576 00a8 2343     		orrs	r3, r3, r4
 2577 00aa 9BB2     		uxth	r3, r3
 2578 00ac 1380     		strh	r3, [r2]	@ movhi
 2579              	.L113:
 2580              	.LBE30:
1988:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     }
1989:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
1990:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2581              		.loc 1 1990 0
 2582 00ae 0023     		movs	r3, #0
1991:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2583              		.loc 1 1991 0
 2584 00b0 1846     		mov	r0, r3
 2585 00b2 0837     		adds	r7, r7, #8
 2586              	.LCFI78:
 2587              		.cfi_def_cfa_offset 8
 2588 00b4 BD46     		mov	sp, r7
 2589              	.LCFI79:
 2590              		.cfi_def_cfa_register 13
 2591              		@ sp needed
 2592 00b6 90BC     		pop	{r4, r7}
 2593              	.LCFI80:
 2594              		.cfi_restore 7
ARM GAS  /tmp/ccxRhxZv.s 			page 81


 2595              		.cfi_restore 4
 2596              		.cfi_def_cfa_offset 0
 2597 00b8 7047     		bx	lr
 2598              	.L117:
 2599 00ba 00BF     		.align	2
 2600              	.L116:
 2601 00bc 8080FFFF 		.word	-32640
 2602              		.cfi_endproc
 2603              	.LFE78:
 2605              		.section	.text.USB_EPClearStall,"ax",%progbits
 2606              		.align	1
 2607              		.global	USB_EPClearStall
 2608              		.syntax unified
 2609              		.thumb
 2610              		.thumb_func
 2611              		.fpu softvfp
 2613              	USB_EPClearStall:
 2614              	.LFB79:
1992:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
1993:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
1994:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_EPClearStall : Clear a stall condition over an EP
1995:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
1996:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1997:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
1998:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
1999:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EPClearStall(USB_TypeDef *USBx, USB_EPTypeDef *ep)
2000:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2615              		.loc 1 2000 0
 2616              		.cfi_startproc
 2617              		@ args = 0, pretend = 0, frame = 8
 2618              		@ frame_needed = 1, uses_anonymous_args = 0
 2619              		@ link register save eliminated.
 2620 0000 90B4     		push	{r4, r7}
 2621              	.LCFI81:
 2622              		.cfi_def_cfa_offset 8
 2623              		.cfi_offset 4, -8
 2624              		.cfi_offset 7, -4
 2625 0002 82B0     		sub	sp, sp, #8
 2626              	.LCFI82:
 2627              		.cfi_def_cfa_offset 16
 2628 0004 00AF     		add	r7, sp, #0
 2629              	.LCFI83:
 2630              		.cfi_def_cfa_register 7
 2631 0006 7860     		str	r0, [r7, #4]
 2632 0008 3960     		str	r1, [r7]
2001:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if (ep->is_in)
 2633              		.loc 1 2001 0
 2634 000a 3B68     		ldr	r3, [r7]
 2635 000c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2636 000e 002B     		cmp	r3, #0
 2637 0010 3AD0     		beq	.L119
2002:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2003:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_CLEAR_TX_DTOG(USBx, ep->num);
 2638              		.loc 1 2003 0
 2639 0012 7A68     		ldr	r2, [r7, #4]
 2640 0014 3B68     		ldr	r3, [r7]
 2641 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxRhxZv.s 			page 82


 2642 0018 9B00     		lsls	r3, r3, #2
 2643 001a 1344     		add	r3, r3, r2
 2644 001c 1B88     		ldrh	r3, [r3]	@ movhi
 2645 001e 9BB2     		uxth	r3, r3
 2646 0020 03F04003 		and	r3, r3, #64
 2647 0024 002B     		cmp	r3, #0
 2648 0026 13D0     		beq	.L120
 2649              		.loc 1 2003 0 is_stmt 0 discriminator 1
 2650 0028 7A68     		ldr	r2, [r7, #4]
 2651 002a 3B68     		ldr	r3, [r7]
 2652 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2653 002e 9B00     		lsls	r3, r3, #2
 2654 0030 1344     		add	r3, r3, r2
 2655 0032 1B88     		ldrh	r3, [r3]	@ movhi
 2656 0034 9AB2     		uxth	r2, r3
 2657 0036 40F60F73 		movw	r3, #3855
 2658 003a 1340     		ands	r3, r3, r2
 2659 003c 99B2     		uxth	r1, r3
 2660 003e 7A68     		ldr	r2, [r7, #4]
 2661 0040 3B68     		ldr	r3, [r7]
 2662 0042 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2663 0044 9B00     		lsls	r3, r3, #2
 2664 0046 1A44     		add	r2, r2, r3
 2665 0048 2F4B     		ldr	r3, .L124
 2666 004a 0B43     		orrs	r3, r3, r1
 2667 004c 9BB2     		uxth	r3, r3
 2668 004e 1380     		strh	r3, [r2]	@ movhi
 2669              	.L120:
 2670              	.LBB31:
2004:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_VALID);
 2671              		.loc 1 2004 0 is_stmt 1
 2672 0050 7A68     		ldr	r2, [r7, #4]
 2673 0052 3B68     		ldr	r3, [r7]
 2674 0054 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2675 0056 9B00     		lsls	r3, r3, #2
 2676 0058 1344     		add	r3, r3, r2
 2677 005a 1B88     		ldrh	r3, [r3]	@ movhi
 2678 005c 9BB2     		uxth	r3, r3
 2679 005e 23F4E043 		bic	r3, r3, #28672
 2680 0062 23F04003 		bic	r3, r3, #64
 2681 0066 9CB2     		uxth	r4, r3
 2682 0068 84F01003 		eor	r3, r4, #16
 2683 006c 9CB2     		uxth	r4, r3
 2684 006e 84F02003 		eor	r3, r4, #32
 2685 0072 9CB2     		uxth	r4, r3
 2686 0074 7A68     		ldr	r2, [r7, #4]
 2687 0076 3B68     		ldr	r3, [r7]
 2688 0078 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2689 007a 9B00     		lsls	r3, r3, #2
 2690 007c 1A44     		add	r2, r2, r3
 2691 007e 234B     		ldr	r3, .L124+4
 2692 0080 2343     		orrs	r3, r3, r4
 2693 0082 9BB2     		uxth	r3, r3
 2694 0084 1380     		strh	r3, [r2]	@ movhi
 2695              	.LBE31:
 2696 0086 39E0     		b	.L121
 2697              	.L119:
ARM GAS  /tmp/ccxRhxZv.s 			page 83


2005:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2006:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   else
2007:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2008:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_CLEAR_RX_DTOG(USBx, ep->num);
 2698              		.loc 1 2008 0
 2699 0088 7A68     		ldr	r2, [r7, #4]
 2700 008a 3B68     		ldr	r3, [r7]
 2701 008c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2702 008e 9B00     		lsls	r3, r3, #2
 2703 0090 1344     		add	r3, r3, r2
 2704 0092 1B88     		ldrh	r3, [r3]	@ movhi
 2705 0094 9BB2     		uxth	r3, r3
 2706 0096 03F48043 		and	r3, r3, #16384
 2707 009a 002B     		cmp	r3, #0
 2708 009c 13D0     		beq	.L122
 2709              		.loc 1 2008 0 is_stmt 0 discriminator 1
 2710 009e 7A68     		ldr	r2, [r7, #4]
 2711 00a0 3B68     		ldr	r3, [r7]
 2712 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2713 00a4 9B00     		lsls	r3, r3, #2
 2714 00a6 1344     		add	r3, r3, r2
 2715 00a8 1B88     		ldrh	r3, [r3]	@ movhi
 2716 00aa 9AB2     		uxth	r2, r3
 2717 00ac 40F60F73 		movw	r3, #3855
 2718 00b0 1340     		ands	r3, r3, r2
 2719 00b2 99B2     		uxth	r1, r3
 2720 00b4 7A68     		ldr	r2, [r7, #4]
 2721 00b6 3B68     		ldr	r3, [r7]
 2722 00b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2723 00ba 9B00     		lsls	r3, r3, #2
 2724 00bc 1A44     		add	r2, r2, r3
 2725 00be 144B     		ldr	r3, .L124+8
 2726 00c0 0B43     		orrs	r3, r3, r1
 2727 00c2 9BB2     		uxth	r3, r3
 2728 00c4 1380     		strh	r3, [r2]	@ movhi
 2729              	.L122:
 2730              	.LBB32:
2009:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 2731              		.loc 1 2009 0 is_stmt 1
 2732 00c6 7A68     		ldr	r2, [r7, #4]
 2733 00c8 3B68     		ldr	r3, [r7]
 2734 00ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2735 00cc 9B00     		lsls	r3, r3, #2
 2736 00ce 1344     		add	r3, r3, r2
 2737 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 2738 00d2 9BB2     		uxth	r3, r3
 2739 00d4 23F48043 		bic	r3, r3, #16384
 2740 00d8 23F07003 		bic	r3, r3, #112
 2741 00dc 9CB2     		uxth	r4, r3
 2742 00de 84F48053 		eor	r3, r4, #4096
 2743 00e2 9CB2     		uxth	r4, r3
 2744 00e4 84F40053 		eor	r3, r4, #8192
 2745 00e8 9CB2     		uxth	r4, r3
 2746 00ea 7A68     		ldr	r2, [r7, #4]
 2747 00ec 3B68     		ldr	r3, [r7]
 2748 00ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2749 00f0 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/ccxRhxZv.s 			page 84


 2750 00f2 1A44     		add	r2, r2, r3
 2751 00f4 054B     		ldr	r3, .L124+4
 2752 00f6 2343     		orrs	r3, r3, r4
 2753 00f8 9BB2     		uxth	r3, r3
 2754 00fa 1380     		strh	r3, [r2]	@ movhi
 2755              	.L121:
 2756              	.LBE32:
2010:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2011:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2757              		.loc 1 2011 0
 2758 00fc 0023     		movs	r3, #0
2012:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2759              		.loc 1 2012 0
 2760 00fe 1846     		mov	r0, r3
 2761 0100 0837     		adds	r7, r7, #8
 2762              	.LCFI84:
 2763              		.cfi_def_cfa_offset 8
 2764 0102 BD46     		mov	sp, r7
 2765              	.LCFI85:
 2766              		.cfi_def_cfa_register 13
 2767              		@ sp needed
 2768 0104 90BC     		pop	{r4, r7}
 2769              	.LCFI86:
 2770              		.cfi_restore 7
 2771              		.cfi_restore 4
 2772              		.cfi_def_cfa_offset 0
 2773 0106 7047     		bx	lr
 2774              	.L125:
 2775              		.align	2
 2776              	.L124:
 2777 0108 C080FFFF 		.word	-32576
 2778 010c 8080FFFF 		.word	-32640
 2779 0110 80C0FFFF 		.word	-16256
 2780              		.cfi_endproc
 2781              	.LFE79:
 2783              		.section	.text.USB_StopDevice,"ax",%progbits
 2784              		.align	1
 2785              		.global	USB_StopDevice
 2786              		.syntax unified
 2787              		.thumb
 2788              		.thumb_func
 2789              		.fpu softvfp
 2791              	USB_StopDevice:
 2792              	.LFB80:
2013:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2014:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2015:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_StopDevice : Stop the usb device mode
2016:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2017:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2018:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2019:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_StopDevice(USB_TypeDef *USBx)
2020:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2793              		.loc 1 2020 0
 2794              		.cfi_startproc
 2795              		@ args = 0, pretend = 0, frame = 8
 2796              		@ frame_needed = 1, uses_anonymous_args = 0
 2797              		@ link register save eliminated.
ARM GAS  /tmp/ccxRhxZv.s 			page 85


 2798 0000 80B4     		push	{r7}
 2799              	.LCFI87:
 2800              		.cfi_def_cfa_offset 4
 2801              		.cfi_offset 7, -4
 2802 0002 83B0     		sub	sp, sp, #12
 2803              	.LCFI88:
 2804              		.cfi_def_cfa_offset 16
 2805 0004 00AF     		add	r7, sp, #0
 2806              	.LCFI89:
 2807              		.cfi_def_cfa_register 7
 2808 0006 7860     		str	r0, [r7, #4]
2021:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* disable all interrupts and force USB reset */
2022:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = USB_CNTR_FRES;
 2809              		.loc 1 2022 0
 2810 0008 7B68     		ldr	r3, [r7, #4]
 2811 000a 0122     		movs	r2, #1
 2812 000c A3F84020 		strh	r2, [r3, #64]	@ movhi
2023:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2024:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* clear interrupt status register */
2025:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->ISTR = 0;
 2813              		.loc 1 2025 0
 2814 0010 7B68     		ldr	r3, [r7, #4]
 2815 0012 0022     		movs	r2, #0
 2816 0014 A3F84420 		strh	r2, [r3, #68]	@ movhi
2026:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2027:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* switch-off device */
2028:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR = (USB_CNTR_FRES | USB_CNTR_PDWN);
 2817              		.loc 1 2028 0
 2818 0018 7B68     		ldr	r3, [r7, #4]
 2819 001a 0322     		movs	r2, #3
 2820 001c A3F84020 		strh	r2, [r3, #64]	@ movhi
2029:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2030:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2821              		.loc 1 2030 0
 2822 0020 0023     		movs	r3, #0
2031:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2823              		.loc 1 2031 0
 2824 0022 1846     		mov	r0, r3
 2825 0024 0C37     		adds	r7, r7, #12
 2826              	.LCFI90:
 2827              		.cfi_def_cfa_offset 4
 2828 0026 BD46     		mov	sp, r7
 2829              	.LCFI91:
 2830              		.cfi_def_cfa_register 13
 2831              		@ sp needed
 2832 0028 80BC     		pop	{r7}
 2833              	.LCFI92:
 2834              		.cfi_restore 7
 2835              		.cfi_def_cfa_offset 0
 2836 002a 7047     		bx	lr
 2837              		.cfi_endproc
 2838              	.LFE80:
 2840              		.section	.text.USB_SetDevAddress,"ax",%progbits
 2841              		.align	1
 2842              		.global	USB_SetDevAddress
 2843              		.syntax unified
 2844              		.thumb
ARM GAS  /tmp/ccxRhxZv.s 			page 86


 2845              		.thumb_func
 2846              		.fpu softvfp
 2848              	USB_SetDevAddress:
 2849              	.LFB81:
2032:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2033:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2034:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_SetDevAddress : Stop the usb device mode
2035:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2036:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  address : new device address to be assigned
2037:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
2038:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2039:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2040:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_SetDevAddress (USB_TypeDef *USBx, uint8_t address)
2041:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2850              		.loc 1 2041 0
 2851              		.cfi_startproc
 2852              		@ args = 0, pretend = 0, frame = 8
 2853              		@ frame_needed = 1, uses_anonymous_args = 0
 2854              		@ link register save eliminated.
 2855 0000 80B4     		push	{r7}
 2856              	.LCFI93:
 2857              		.cfi_def_cfa_offset 4
 2858              		.cfi_offset 7, -4
 2859 0002 83B0     		sub	sp, sp, #12
 2860              	.LCFI94:
 2861              		.cfi_def_cfa_offset 16
 2862 0004 00AF     		add	r7, sp, #0
 2863              	.LCFI95:
 2864              		.cfi_def_cfa_register 7
 2865 0006 7860     		str	r0, [r7, #4]
 2866 0008 0B46     		mov	r3, r1
 2867 000a FB70     		strb	r3, [r7, #3]
2042:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   if(address == 0) 
 2868              		.loc 1 2042 0
 2869 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2870 000e 002B     		cmp	r3, #0
 2871 0010 03D1     		bne	.L129
2043:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2044:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    /* set device address and enable function */
2045:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    USBx->DADDR = USB_DADDR_EF;
 2872              		.loc 1 2045 0
 2873 0012 7B68     		ldr	r3, [r7, #4]
 2874 0014 8022     		movs	r2, #128
 2875 0016 A3F84C20 		strh	r2, [r3, #76]	@ movhi
 2876              	.L129:
2046:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2047:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2048:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2877              		.loc 1 2048 0
 2878 001a 0023     		movs	r3, #0
2049:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2879              		.loc 1 2049 0
 2880 001c 1846     		mov	r0, r3
 2881 001e 0C37     		adds	r7, r7, #12
 2882              	.LCFI96:
 2883              		.cfi_def_cfa_offset 4
 2884 0020 BD46     		mov	sp, r7
ARM GAS  /tmp/ccxRhxZv.s 			page 87


 2885              	.LCFI97:
 2886              		.cfi_def_cfa_register 13
 2887              		@ sp needed
 2888 0022 80BC     		pop	{r7}
 2889              	.LCFI98:
 2890              		.cfi_restore 7
 2891              		.cfi_def_cfa_offset 0
 2892 0024 7047     		bx	lr
 2893              		.cfi_endproc
 2894              	.LFE81:
 2896              		.section	.text.USB_DevConnect,"ax",%progbits
 2897              		.align	1
 2898              		.global	USB_DevConnect
 2899              		.syntax unified
 2900              		.thumb
 2901              		.thumb_func
 2902              		.fpu softvfp
 2904              	USB_DevConnect:
 2905              	.LFB82:
2050:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2051:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2052:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevConnect : Connect the USB device by enabling the pull-up/pull-down
2053:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2054:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2055:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2056:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevConnect (USB_TypeDef *USBx)
2057:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2906              		.loc 1 2057 0
 2907              		.cfi_startproc
 2908              		@ args = 0, pretend = 0, frame = 8
 2909              		@ frame_needed = 1, uses_anonymous_args = 0
 2910              		@ link register save eliminated.
 2911 0000 80B4     		push	{r7}
 2912              	.LCFI99:
 2913              		.cfi_def_cfa_offset 4
 2914              		.cfi_offset 7, -4
 2915 0002 83B0     		sub	sp, sp, #12
 2916              	.LCFI100:
 2917              		.cfi_def_cfa_offset 16
 2918 0004 00AF     		add	r7, sp, #0
 2919              	.LCFI101:
 2920              		.cfi_def_cfa_register 7
 2921 0006 7860     		str	r0, [r7, #4]
2058:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2059:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2060:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2061:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2062:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2063:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2064:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2922              		.loc 1 2064 0
 2923 0008 0023     		movs	r3, #0
2065:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2924              		.loc 1 2065 0
 2925 000a 1846     		mov	r0, r3
 2926 000c 0C37     		adds	r7, r7, #12
 2927              	.LCFI102:
ARM GAS  /tmp/ccxRhxZv.s 			page 88


 2928              		.cfi_def_cfa_offset 4
 2929 000e BD46     		mov	sp, r7
 2930              	.LCFI103:
 2931              		.cfi_def_cfa_register 13
 2932              		@ sp needed
 2933 0010 80BC     		pop	{r7}
 2934              	.LCFI104:
 2935              		.cfi_restore 7
 2936              		.cfi_def_cfa_offset 0
 2937 0012 7047     		bx	lr
 2938              		.cfi_endproc
 2939              	.LFE82:
 2941              		.section	.text.USB_DevDisconnect,"ax",%progbits
 2942              		.align	1
 2943              		.global	USB_DevDisconnect
 2944              		.syntax unified
 2945              		.thumb
 2946              		.thumb_func
 2947              		.fpu softvfp
 2949              	USB_DevDisconnect:
 2950              	.LFB83:
2066:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2067:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2068:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DevDisconnect : Disconnect the USB device by disabling the pull-up/pull-down
2069:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2070:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2071:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2072:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevDisconnect (USB_TypeDef *USBx)
2073:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2951              		.loc 1 2073 0
 2952              		.cfi_startproc
 2953              		@ args = 0, pretend = 0, frame = 8
 2954              		@ frame_needed = 1, uses_anonymous_args = 0
 2955              		@ link register save eliminated.
 2956 0000 80B4     		push	{r7}
 2957              	.LCFI105:
 2958              		.cfi_def_cfa_offset 4
 2959              		.cfi_offset 7, -4
 2960 0002 83B0     		sub	sp, sp, #12
 2961              	.LCFI106:
 2962              		.cfi_def_cfa_offset 16
 2963 0004 00AF     		add	r7, sp, #0
 2964              	.LCFI107:
 2965              		.cfi_def_cfa_register 7
 2966 0006 7860     		str	r0, [r7, #4]
2074:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2075:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2076:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2077:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2078:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2079:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2080:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 2967              		.loc 1 2080 0
 2968 0008 0023     		movs	r3, #0
2081:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 2969              		.loc 1 2081 0
 2970 000a 1846     		mov	r0, r3
ARM GAS  /tmp/ccxRhxZv.s 			page 89


 2971 000c 0C37     		adds	r7, r7, #12
 2972              	.LCFI108:
 2973              		.cfi_def_cfa_offset 4
 2974 000e BD46     		mov	sp, r7
 2975              	.LCFI109:
 2976              		.cfi_def_cfa_register 13
 2977              		@ sp needed
 2978 0010 80BC     		pop	{r7}
 2979              	.LCFI110:
 2980              		.cfi_restore 7
 2981              		.cfi_def_cfa_offset 0
 2982 0012 7047     		bx	lr
 2983              		.cfi_endproc
 2984              	.LFE83:
 2986              		.section	.text.USB_ReadInterrupts,"ax",%progbits
 2987              		.align	1
 2988              		.global	USB_ReadInterrupts
 2989              		.syntax unified
 2990              		.thumb
 2991              		.thumb_func
 2992              		.fpu softvfp
 2994              	USB_ReadInterrupts:
 2995              	.LFB84:
2082:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2083:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2084:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadInterrupts: return the global USB interrupt status
2085:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2086:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2087:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2088:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t  USB_ReadInterrupts (USB_TypeDef *USBx)
2089:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 2996              		.loc 1 2089 0
 2997              		.cfi_startproc
 2998              		@ args = 0, pretend = 0, frame = 16
 2999              		@ frame_needed = 1, uses_anonymous_args = 0
 3000              		@ link register save eliminated.
 3001 0000 80B4     		push	{r7}
 3002              	.LCFI111:
 3003              		.cfi_def_cfa_offset 4
 3004              		.cfi_offset 7, -4
 3005 0002 85B0     		sub	sp, sp, #20
 3006              	.LCFI112:
 3007              		.cfi_def_cfa_offset 24
 3008 0004 00AF     		add	r7, sp, #0
 3009              	.LCFI113:
 3010              		.cfi_def_cfa_register 7
 3011 0006 7860     		str	r0, [r7, #4]
2090:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t tmpreg = 0;
 3012              		.loc 1 2090 0
 3013 0008 0023     		movs	r3, #0
 3014 000a FB60     		str	r3, [r7, #12]
2091:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2092:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   tmpreg = USBx->ISTR;
 3015              		.loc 1 2092 0
 3016 000c 7B68     		ldr	r3, [r7, #4]
 3017 000e B3F84430 		ldrh	r3, [r3, #68]	@ movhi
 3018 0012 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccxRhxZv.s 			page 90


 3019 0014 FB60     		str	r3, [r7, #12]
2093:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return tmpreg;
 3020              		.loc 1 2093 0
 3021 0016 FB68     		ldr	r3, [r7, #12]
2094:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3022              		.loc 1 2094 0
 3023 0018 1846     		mov	r0, r3
 3024 001a 1437     		adds	r7, r7, #20
 3025              	.LCFI114:
 3026              		.cfi_def_cfa_offset 4
 3027 001c BD46     		mov	sp, r7
 3028              	.LCFI115:
 3029              		.cfi_def_cfa_register 13
 3030              		@ sp needed
 3031 001e 80BC     		pop	{r7}
 3032              	.LCFI116:
 3033              		.cfi_restore 7
 3034              		.cfi_def_cfa_offset 0
 3035 0020 7047     		bx	lr
 3036              		.cfi_endproc
 3037              	.LFE84:
 3039              		.section	.text.USB_ReadDevAllOutEpInterrupt,"ax",%progbits
 3040              		.align	1
 3041              		.global	USB_ReadDevAllOutEpInterrupt
 3042              		.syntax unified
 3043              		.thumb
 3044              		.thumb_func
 3045              		.fpu softvfp
 3047              	USB_ReadDevAllOutEpInterrupt:
 3048              	.LFB85:
2095:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2096:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2097:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllOutEpInterrupt: return the USB device OUT endpoints interrupt status
2098:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2099:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2100:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2101:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllOutEpInterrupt (USB_TypeDef *USBx)
2102:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3049              		.loc 1 2102 0
 3050              		.cfi_startproc
 3051              		@ args = 0, pretend = 0, frame = 8
 3052              		@ frame_needed = 1, uses_anonymous_args = 0
 3053              		@ link register save eliminated.
 3054 0000 80B4     		push	{r7}
 3055              	.LCFI117:
 3056              		.cfi_def_cfa_offset 4
 3057              		.cfi_offset 7, -4
 3058 0002 83B0     		sub	sp, sp, #12
 3059              	.LCFI118:
 3060              		.cfi_def_cfa_offset 16
 3061 0004 00AF     		add	r7, sp, #0
 3062              	.LCFI119:
 3063              		.cfi_def_cfa_register 7
 3064 0006 7860     		str	r0, [r7, #4]
2103:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2104:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2105:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
ARM GAS  /tmp/ccxRhxZv.s 			page 91


2106:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2107:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2108:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2109:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
 3065              		.loc 1 2109 0
 3066 0008 0023     		movs	r3, #0
2110:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3067              		.loc 1 2110 0
 3068 000a 1846     		mov	r0, r3
 3069 000c 0C37     		adds	r7, r7, #12
 3070              	.LCFI120:
 3071              		.cfi_def_cfa_offset 4
 3072 000e BD46     		mov	sp, r7
 3073              	.LCFI121:
 3074              		.cfi_def_cfa_register 13
 3075              		@ sp needed
 3076 0010 80BC     		pop	{r7}
 3077              	.LCFI122:
 3078              		.cfi_restore 7
 3079              		.cfi_def_cfa_offset 0
 3080 0012 7047     		bx	lr
 3081              		.cfi_endproc
 3082              	.LFE85:
 3084              		.section	.text.USB_ReadDevAllInEpInterrupt,"ax",%progbits
 3085              		.align	1
 3086              		.global	USB_ReadDevAllInEpInterrupt
 3087              		.syntax unified
 3088              		.thumb
 3089              		.thumb_func
 3090              		.fpu softvfp
 3092              	USB_ReadDevAllInEpInterrupt:
 3093              	.LFB86:
2111:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2112:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2113:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ReadDevAllInEpInterrupt: return the USB device IN endpoints interrupt status
2114:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2115:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2116:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2117:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevAllInEpInterrupt (USB_TypeDef *USBx)
2118:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3094              		.loc 1 2118 0
 3095              		.cfi_startproc
 3096              		@ args = 0, pretend = 0, frame = 8
 3097              		@ frame_needed = 1, uses_anonymous_args = 0
 3098              		@ link register save eliminated.
 3099 0000 80B4     		push	{r7}
 3100              	.LCFI123:
 3101              		.cfi_def_cfa_offset 4
 3102              		.cfi_offset 7, -4
 3103 0002 83B0     		sub	sp, sp, #12
 3104              	.LCFI124:
 3105              		.cfi_def_cfa_offset 16
 3106 0004 00AF     		add	r7, sp, #0
 3107              	.LCFI125:
 3108              		.cfi_def_cfa_register 7
 3109 0006 7860     		str	r0, [r7, #4]
2119:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
ARM GAS  /tmp/ccxRhxZv.s 			page 92


2120:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2121:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2122:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2123:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2124:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2125:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
 3110              		.loc 1 2125 0
 3111 0008 0023     		movs	r3, #0
2126:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3112              		.loc 1 2126 0
 3113 000a 1846     		mov	r0, r3
 3114 000c 0C37     		adds	r7, r7, #12
 3115              	.LCFI126:
 3116              		.cfi_def_cfa_offset 4
 3117 000e BD46     		mov	sp, r7
 3118              	.LCFI127:
 3119              		.cfi_def_cfa_register 13
 3120              		@ sp needed
 3121 0010 80BC     		pop	{r7}
 3122              	.LCFI128:
 3123              		.cfi_restore 7
 3124              		.cfi_def_cfa_offset 0
 3125 0012 7047     		bx	lr
 3126              		.cfi_endproc
 3127              	.LFE86:
 3129              		.section	.text.USB_ReadDevOutEPInterrupt,"ax",%progbits
 3130              		.align	1
 3131              		.global	USB_ReadDevOutEPInterrupt
 3132              		.syntax unified
 3133              		.thumb
 3134              		.thumb_func
 3135              		.fpu softvfp
 3137              	USB_ReadDevOutEPInterrupt:
 3138              	.LFB87:
2127:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2128:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2129:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device OUT EP Interrupt register
2130:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2131:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
2132:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
2133:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device OUT EP Interrupt register
2134:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2135:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevOutEPInterrupt (USB_TypeDef *USBx , uint8_t epnum)
2136:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3139              		.loc 1 2136 0
 3140              		.cfi_startproc
 3141              		@ args = 0, pretend = 0, frame = 8
 3142              		@ frame_needed = 1, uses_anonymous_args = 0
 3143              		@ link register save eliminated.
 3144 0000 80B4     		push	{r7}
 3145              	.LCFI129:
 3146              		.cfi_def_cfa_offset 4
 3147              		.cfi_offset 7, -4
 3148 0002 83B0     		sub	sp, sp, #12
 3149              	.LCFI130:
 3150              		.cfi_def_cfa_offset 16
 3151 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccxRhxZv.s 			page 93


 3152              	.LCFI131:
 3153              		.cfi_def_cfa_register 7
 3154 0006 7860     		str	r0, [r7, #4]
 3155 0008 0B46     		mov	r3, r1
 3156 000a FB70     		strb	r3, [r7, #3]
2137:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2138:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2139:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(epnum);
2140:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2141:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2142:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2143:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2144:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
 3157              		.loc 1 2144 0
 3158 000c 0023     		movs	r3, #0
2145:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3159              		.loc 1 2145 0
 3160 000e 1846     		mov	r0, r3
 3161 0010 0C37     		adds	r7, r7, #12
 3162              	.LCFI132:
 3163              		.cfi_def_cfa_offset 4
 3164 0012 BD46     		mov	sp, r7
 3165              	.LCFI133:
 3166              		.cfi_def_cfa_register 13
 3167              		@ sp needed
 3168 0014 80BC     		pop	{r7}
 3169              	.LCFI134:
 3170              		.cfi_restore 7
 3171              		.cfi_def_cfa_offset 0
 3172 0016 7047     		bx	lr
 3173              		.cfi_endproc
 3174              	.LFE87:
 3176              		.section	.text.USB_ReadDevInEPInterrupt,"ax",%progbits
 3177              		.align	1
 3178              		.global	USB_ReadDevInEPInterrupt
 3179              		.syntax unified
 3180              		.thumb
 3181              		.thumb_func
 3182              		.fpu softvfp
 3184              	USB_ReadDevInEPInterrupt:
 3185              	.LFB88:
2146:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2147:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2148:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Returns Device IN EP Interrupt register
2149:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2150:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  epnum : endpoint number
2151:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
2152:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval Device IN EP Interrupt register
2153:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2154:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** uint32_t USB_ReadDevInEPInterrupt (USB_TypeDef *USBx , uint8_t epnum)
2155:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3186              		.loc 1 2155 0
 3187              		.cfi_startproc
 3188              		@ args = 0, pretend = 0, frame = 8
 3189              		@ frame_needed = 1, uses_anonymous_args = 0
 3190              		@ link register save eliminated.
 3191 0000 80B4     		push	{r7}
ARM GAS  /tmp/ccxRhxZv.s 			page 94


 3192              	.LCFI135:
 3193              		.cfi_def_cfa_offset 4
 3194              		.cfi_offset 7, -4
 3195 0002 83B0     		sub	sp, sp, #12
 3196              	.LCFI136:
 3197              		.cfi_def_cfa_offset 16
 3198 0004 00AF     		add	r7, sp, #0
 3199              	.LCFI137:
 3200              		.cfi_def_cfa_register 7
 3201 0006 7860     		str	r0, [r7, #4]
 3202 0008 0B46     		mov	r3, r1
 3203 000a FB70     		strb	r3, [r7, #3]
2156:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2157:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2158:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(epnum);
2159:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2160:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2161:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2162:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2163:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return (0);
 3204              		.loc 1 2163 0
 3205 000c 0023     		movs	r3, #0
2164:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3206              		.loc 1 2164 0
 3207 000e 1846     		mov	r0, r3
 3208 0010 0C37     		adds	r7, r7, #12
 3209              	.LCFI138:
 3210              		.cfi_def_cfa_offset 4
 3211 0012 BD46     		mov	sp, r7
 3212              	.LCFI139:
 3213              		.cfi_def_cfa_register 13
 3214              		@ sp needed
 3215 0014 80BC     		pop	{r7}
 3216              	.LCFI140:
 3217              		.cfi_restore 7
 3218              		.cfi_def_cfa_offset 0
 3219 0016 7047     		bx	lr
 3220              		.cfi_endproc
 3221              	.LFE88:
 3223              		.section	.text.USB_ClearInterrupts,"ax",%progbits
 3224              		.align	1
 3225              		.global	USB_ClearInterrupts
 3226              		.syntax unified
 3227              		.thumb
 3228              		.thumb_func
 3229              		.fpu softvfp
 3231              	USB_ClearInterrupts:
 3232              	.LFB89:
2165:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2166:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2167:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ClearInterrupts: clear a USB interrupt
2168:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2169:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  interrupt : interrupt flag
2170:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
2171:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2172:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void  USB_ClearInterrupts (USB_TypeDef *USBx, uint32_t interrupt)
2173:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
ARM GAS  /tmp/ccxRhxZv.s 			page 95


 3233              		.loc 1 2173 0
 3234              		.cfi_startproc
 3235              		@ args = 0, pretend = 0, frame = 8
 3236              		@ frame_needed = 1, uses_anonymous_args = 0
 3237              		@ link register save eliminated.
 3238 0000 80B4     		push	{r7}
 3239              	.LCFI141:
 3240              		.cfi_def_cfa_offset 4
 3241              		.cfi_offset 7, -4
 3242 0002 83B0     		sub	sp, sp, #12
 3243              	.LCFI142:
 3244              		.cfi_def_cfa_offset 16
 3245 0004 00AF     		add	r7, sp, #0
 3246              	.LCFI143:
 3247              		.cfi_def_cfa_register 7
 3248 0006 7860     		str	r0, [r7, #4]
 3249 0008 3960     		str	r1, [r7]
2174:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2175:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2176:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(interrupt);
2177:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2178:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2179:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2180:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2181:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3250              		.loc 1 2181 0
 3251 000a 00BF     		nop
 3252 000c 0C37     		adds	r7, r7, #12
 3253              	.LCFI144:
 3254              		.cfi_def_cfa_offset 4
 3255 000e BD46     		mov	sp, r7
 3256              	.LCFI145:
 3257              		.cfi_def_cfa_register 13
 3258              		@ sp needed
 3259 0010 80BC     		pop	{r7}
 3260              	.LCFI146:
 3261              		.cfi_restore 7
 3262              		.cfi_def_cfa_offset 0
 3263 0012 7047     		bx	lr
 3264              		.cfi_endproc
 3265              	.LFE89:
 3267              		.section	.text.USB_EP0_OutStart,"ax",%progbits
 3268              		.align	1
 3269              		.global	USB_EP0_OutStart
 3270              		.syntax unified
 3271              		.thumb
 3272              		.thumb_func
 3273              		.fpu softvfp
 3275              	USB_EP0_OutStart:
 3276              	.LFB90:
2182:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2183:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2184:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Prepare the EP0 to start the first control setup
2185:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2186:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  psetup : pointer to setup packet
2187:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2188:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
ARM GAS  /tmp/ccxRhxZv.s 			page 96


2189:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0_OutStart(USB_TypeDef *USBx, uint8_t *psetup)
2190:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3277              		.loc 1 2190 0
 3278              		.cfi_startproc
 3279              		@ args = 0, pretend = 0, frame = 8
 3280              		@ frame_needed = 1, uses_anonymous_args = 0
 3281              		@ link register save eliminated.
 3282 0000 80B4     		push	{r7}
 3283              	.LCFI147:
 3284              		.cfi_def_cfa_offset 4
 3285              		.cfi_offset 7, -4
 3286 0002 83B0     		sub	sp, sp, #12
 3287              	.LCFI148:
 3288              		.cfi_def_cfa_offset 16
 3289 0004 00AF     		add	r7, sp, #0
 3290              	.LCFI149:
 3291              		.cfi_def_cfa_register 7
 3292 0006 7860     		str	r0, [r7, #4]
 3293 0008 3960     		str	r1, [r7]
2191:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2192:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(USBx);
2193:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   UNUSED(psetup);
2194:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used 
2195:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****               only by USB OTG FS peripheral.
2196:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2197:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****    */
2198:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 3294              		.loc 1 2198 0
 3295 000a 0023     		movs	r3, #0
2199:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3296              		.loc 1 2199 0
 3297 000c 1846     		mov	r0, r3
 3298 000e 0C37     		adds	r7, r7, #12
 3299              	.LCFI150:
 3300              		.cfi_def_cfa_offset 4
 3301 0010 BD46     		mov	sp, r7
 3302              	.LCFI151:
 3303              		.cfi_def_cfa_register 13
 3304              		@ sp needed
 3305 0012 80BC     		pop	{r7}
 3306              	.LCFI152:
 3307              		.cfi_restore 7
 3308              		.cfi_def_cfa_offset 0
 3309 0014 7047     		bx	lr
 3310              		.cfi_endproc
 3311              	.LFE90:
 3313              		.section	.text.USB_ActivateRemoteWakeup,"ax",%progbits
 3314              		.align	1
 3315              		.global	USB_ActivateRemoteWakeup
 3316              		.syntax unified
 3317              		.thumb
 3318              		.thumb_func
 3319              		.fpu softvfp
 3321              	USB_ActivateRemoteWakeup:
 3322              	.LFB91:
2200:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2201:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
ARM GAS  /tmp/ccxRhxZv.s 			page 97


2202:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_ActivateRemoteWakeup : active remote wakeup signalling
2203:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2204:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2205:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2206:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateRemoteWakeup(USB_TypeDef *USBx)
2207:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3323              		.loc 1 2207 0
 3324              		.cfi_startproc
 3325              		@ args = 0, pretend = 0, frame = 8
 3326              		@ frame_needed = 1, uses_anonymous_args = 0
 3327              		@ link register save eliminated.
 3328 0000 80B4     		push	{r7}
 3329              	.LCFI153:
 3330              		.cfi_def_cfa_offset 4
 3331              		.cfi_offset 7, -4
 3332 0002 83B0     		sub	sp, sp, #12
 3333              	.LCFI154:
 3334              		.cfi_def_cfa_offset 16
 3335 0004 00AF     		add	r7, sp, #0
 3336              	.LCFI155:
 3337              		.cfi_def_cfa_register 7
 3338 0006 7860     		str	r0, [r7, #4]
2208:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR |= USB_CNTR_RESUME;
 3339              		.loc 1 2208 0
 3340 0008 7B68     		ldr	r3, [r7, #4]
 3341 000a B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 3342 000e 9BB2     		uxth	r3, r3
 3343 0010 43F01003 		orr	r3, r3, #16
 3344 0014 9AB2     		uxth	r2, r3
 3345 0016 7B68     		ldr	r3, [r7, #4]
 3346 0018 A3F84020 		strh	r2, [r3, #64]	@ movhi
2209:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2210:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 3347              		.loc 1 2210 0
 3348 001c 0023     		movs	r3, #0
2211:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3349              		.loc 1 2211 0
 3350 001e 1846     		mov	r0, r3
 3351 0020 0C37     		adds	r7, r7, #12
 3352              	.LCFI156:
 3353              		.cfi_def_cfa_offset 4
 3354 0022 BD46     		mov	sp, r7
 3355              	.LCFI157:
 3356              		.cfi_def_cfa_register 13
 3357              		@ sp needed
 3358 0024 80BC     		pop	{r7}
 3359              	.LCFI158:
 3360              		.cfi_restore 7
 3361              		.cfi_def_cfa_offset 0
 3362 0026 7047     		bx	lr
 3363              		.cfi_endproc
 3364              	.LFE91:
 3366              		.section	.text.USB_DeActivateRemoteWakeup,"ax",%progbits
 3367              		.align	1
 3368              		.global	USB_DeActivateRemoteWakeup
 3369              		.syntax unified
 3370              		.thumb
ARM GAS  /tmp/ccxRhxZv.s 			page 98


 3371              		.thumb_func
 3372              		.fpu softvfp
 3374              	USB_DeActivateRemoteWakeup:
 3375              	.LFB92:
2212:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2213:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2214:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  USB_DeActivateRemoteWakeup : de-active remote wakeup signalling
2215:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : Selected device
2216:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval HAL status
2217:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2218:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** HAL_StatusTypeDef USB_DeActivateRemoteWakeup(USB_TypeDef *USBx)
2219:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3376              		.loc 1 2219 0
 3377              		.cfi_startproc
 3378              		@ args = 0, pretend = 0, frame = 8
 3379              		@ frame_needed = 1, uses_anonymous_args = 0
 3380              		@ link register save eliminated.
 3381 0000 80B4     		push	{r7}
 3382              	.LCFI159:
 3383              		.cfi_def_cfa_offset 4
 3384              		.cfi_offset 7, -4
 3385 0002 83B0     		sub	sp, sp, #12
 3386              	.LCFI160:
 3387              		.cfi_def_cfa_offset 16
 3388 0004 00AF     		add	r7, sp, #0
 3389              	.LCFI161:
 3390              		.cfi_def_cfa_register 7
 3391 0006 7860     		str	r0, [r7, #4]
2220:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   USBx->CNTR &= ~(USB_CNTR_RESUME);
 3392              		.loc 1 2220 0
 3393 0008 7B68     		ldr	r3, [r7, #4]
 3394 000a B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 3395 000e 9BB2     		uxth	r3, r3
 3396 0010 23F01003 		bic	r3, r3, #16
 3397 0014 9AB2     		uxth	r2, r3
 3398 0016 7B68     		ldr	r3, [r7, #4]
 3399 0018 A3F84020 		strh	r2, [r3, #64]	@ movhi
2221:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   return HAL_OK;
 3400              		.loc 1 2221 0
 3401 001c 0023     		movs	r3, #0
2222:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3402              		.loc 1 2222 0
 3403 001e 1846     		mov	r0, r3
 3404 0020 0C37     		adds	r7, r7, #12
 3405              	.LCFI162:
 3406              		.cfi_def_cfa_offset 4
 3407 0022 BD46     		mov	sp, r7
 3408              	.LCFI163:
 3409              		.cfi_def_cfa_register 13
 3410              		@ sp needed
 3411 0024 80BC     		pop	{r7}
 3412              	.LCFI164:
 3413              		.cfi_restore 7
 3414              		.cfi_def_cfa_offset 0
 3415 0026 7047     		bx	lr
 3416              		.cfi_endproc
 3417              	.LFE92:
ARM GAS  /tmp/ccxRhxZv.s 			page 99


 3419              		.section	.text.USB_WritePMA,"ax",%progbits
 3420              		.align	1
 3421              		.global	USB_WritePMA
 3422              		.syntax unified
 3423              		.thumb
 3424              		.thumb_func
 3425              		.fpu softvfp
 3427              	USB_WritePMA:
 3428              	.LFB93:
2223:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2224:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2225:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Copy a buffer from user memory area to packet memory area (PMA)
2226:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : pointer to USB register.
2227:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  pbUsrBuf : pointer to user memory area.
2228:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wPMABufAddr : address into PMA.
2229:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wNBytes : number of bytes to be copied.
2230:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
2231:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2232:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void USB_WritePMA(USB_TypeDef *USBx, uint8_t *pbUsrBuf, uint16_t wPMABufAddr, uint16_t wNBytes)
2233:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3429              		.loc 1 2233 0
 3430              		.cfi_startproc
 3431              		@ args = 0, pretend = 0, frame = 40
 3432              		@ frame_needed = 1, uses_anonymous_args = 0
 3433              		@ link register save eliminated.
 3434 0000 80B4     		push	{r7}
 3435              	.LCFI165:
 3436              		.cfi_def_cfa_offset 4
 3437              		.cfi_offset 7, -4
 3438 0002 8BB0     		sub	sp, sp, #44
 3439              	.LCFI166:
 3440              		.cfi_def_cfa_offset 48
 3441 0004 00AF     		add	r7, sp, #0
 3442              	.LCFI167:
 3443              		.cfi_def_cfa_register 7
 3444 0006 F860     		str	r0, [r7, #12]
 3445 0008 B960     		str	r1, [r7, #8]
 3446 000a 1146     		mov	r1, r2
 3447 000c 1A46     		mov	r2, r3
 3448 000e 0B46     		mov	r3, r1	@ movhi
 3449 0010 FB80     		strh	r3, [r7, #6]	@ movhi
 3450 0012 1346     		mov	r3, r2	@ movhi
 3451 0014 BB80     		strh	r3, [r7, #4]	@ movhi
2234:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;   /* nbytes = (wNBytes + 1) / 2 */
 3452              		.loc 1 2234 0
 3453 0016 BB88     		ldrh	r3, [r7, #4]
 3454 0018 0133     		adds	r3, r3, #1
 3455 001a 5B10     		asrs	r3, r3, #1
 3456 001c FB61     		str	r3, [r7, #28]
2235:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0, temp1 = 0, temp2 = 0;
 3457              		.loc 1 2235 0
 3458 001e 0023     		movs	r3, #0
 3459 0020 7B62     		str	r3, [r7, #36]
 3460 0022 0023     		movs	r3, #0
 3461 0024 BB61     		str	r3, [r7, #24]
 3462 0026 0023     		movs	r3, #0
 3463 0028 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccxRhxZv.s 			page 100


2236:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint16_t *pdwVal = NULL;
 3464              		.loc 1 2236 0
 3465 002a 0023     		movs	r3, #0
 3466 002c 3B62     		str	r3, [r7, #32]
2237:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2238:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   pdwVal = (uint16_t *)(wPMABufAddr * 2 + (uint32_t)USBx + 0x400);
 3467              		.loc 1 2238 0
 3468 002e FB88     		ldrh	r3, [r7, #6]
 3469 0030 5B00     		lsls	r3, r3, #1
 3470 0032 1A46     		mov	r2, r3
 3471 0034 FB68     		ldr	r3, [r7, #12]
 3472 0036 1344     		add	r3, r3, r2
 3473 0038 03F58063 		add	r3, r3, #1024
 3474 003c 3B62     		str	r3, [r7, #32]
2239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 3475              		.loc 1 2239 0
 3476 003e FB69     		ldr	r3, [r7, #28]
 3477 0040 7B62     		str	r3, [r7, #36]
 3478 0042 1BE0     		b	.L153
 3479              	.L154:
2240:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2241:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     temp1 = (uint16_t) * pbUsrBuf;
 3480              		.loc 1 2241 0 discriminator 3
 3481 0044 BB68     		ldr	r3, [r7, #8]
 3482 0046 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3483 0048 BB61     		str	r3, [r7, #24]
2242:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
 3484              		.loc 1 2242 0 discriminator 3
 3485 004a BB68     		ldr	r3, [r7, #8]
 3486 004c 0133     		adds	r3, r3, #1
 3487 004e BB60     		str	r3, [r7, #8]
2243:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     temp2 = temp1 | (uint16_t) * pbUsrBuf << 8;
 3488              		.loc 1 2243 0 discriminator 3
 3489 0050 BB68     		ldr	r3, [r7, #8]
 3490 0052 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3491 0054 1B02     		lsls	r3, r3, #8
 3492 0056 1A46     		mov	r2, r3
 3493 0058 BB69     		ldr	r3, [r7, #24]
 3494 005a 1343     		orrs	r3, r3, r2
 3495 005c 7B61     		str	r3, [r7, #20]
2244:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     *pdwVal++ = temp2;
 3496              		.loc 1 2244 0 discriminator 3
 3497 005e 3B6A     		ldr	r3, [r7, #32]
 3498 0060 9A1C     		adds	r2, r3, #2
 3499 0062 3A62     		str	r2, [r7, #32]
 3500 0064 7A69     		ldr	r2, [r7, #20]
 3501 0066 92B2     		uxth	r2, r2
 3502 0068 1A80     		strh	r2, [r3]	@ movhi
2245:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pdwVal++;
 3503              		.loc 1 2245 0 discriminator 3
 3504 006a 3B6A     		ldr	r3, [r7, #32]
 3505 006c 0233     		adds	r3, r3, #2
 3506 006e 3B62     		str	r3, [r7, #32]
2246:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
 3507              		.loc 1 2246 0 discriminator 3
 3508 0070 BB68     		ldr	r3, [r7, #8]
 3509 0072 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccxRhxZv.s 			page 101


 3510 0074 BB60     		str	r3, [r7, #8]
2239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 3511              		.loc 1 2239 0 discriminator 3
 3512 0076 7B6A     		ldr	r3, [r7, #36]
 3513 0078 013B     		subs	r3, r3, #1
 3514 007a 7B62     		str	r3, [r7, #36]
 3515              	.L153:
2239:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
 3516              		.loc 1 2239 0 is_stmt 0 discriminator 1
 3517 007c 7B6A     		ldr	r3, [r7, #36]
 3518 007e 002B     		cmp	r3, #0
 3519 0080 E0D1     		bne	.L154
2247:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2248:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3520              		.loc 1 2248 0 is_stmt 1
 3521 0082 00BF     		nop
 3522 0084 2C37     		adds	r7, r7, #44
 3523              	.LCFI168:
 3524              		.cfi_def_cfa_offset 4
 3525 0086 BD46     		mov	sp, r7
 3526              	.LCFI169:
 3527              		.cfi_def_cfa_register 13
 3528              		@ sp needed
 3529 0088 80BC     		pop	{r7}
 3530              	.LCFI170:
 3531              		.cfi_restore 7
 3532              		.cfi_def_cfa_offset 0
 3533 008a 7047     		bx	lr
 3534              		.cfi_endproc
 3535              	.LFE93:
 3537              		.section	.text.USB_ReadPMA,"ax",%progbits
 3538              		.align	1
 3539              		.global	USB_ReadPMA
 3540              		.syntax unified
 3541              		.thumb
 3542              		.thumb_func
 3543              		.fpu softvfp
 3545              	USB_ReadPMA:
 3546              	.LFB94:
2249:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** 
2250:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** /**
2251:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @brief  Copy a buffer from packet memory area (PMA) to user memory area
2252:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  USBx : pointer to USB register.
2253:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** * @param  pbUsrBuf : pointer to user memory area.
2254:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wPMABufAddr : address into PMA.
2255:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @param  wNBytes : number of bytes to be copied.
2256:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   * @retval None
2257:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   */
2258:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** void USB_ReadPMA(USB_TypeDef *USBx, uint8_t *pbUsrBuf, uint16_t wPMABufAddr, uint16_t wNBytes)
2259:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** {
 3547              		.loc 1 2259 0
 3548              		.cfi_startproc
 3549              		@ args = 0, pretend = 0, frame = 32
 3550              		@ frame_needed = 1, uses_anonymous_args = 0
 3551              		@ link register save eliminated.
 3552 0000 80B4     		push	{r7}
 3553              	.LCFI171:
ARM GAS  /tmp/ccxRhxZv.s 			page 102


 3554              		.cfi_def_cfa_offset 4
 3555              		.cfi_offset 7, -4
 3556 0002 89B0     		sub	sp, sp, #36
 3557              	.LCFI172:
 3558              		.cfi_def_cfa_offset 40
 3559 0004 00AF     		add	r7, sp, #0
 3560              	.LCFI173:
 3561              		.cfi_def_cfa_register 7
 3562 0006 F860     		str	r0, [r7, #12]
 3563 0008 B960     		str	r1, [r7, #8]
 3564 000a 1146     		mov	r1, r2
 3565 000c 1A46     		mov	r2, r3
 3566 000e 0B46     		mov	r3, r1	@ movhi
 3567 0010 FB80     		strh	r3, [r7, #6]	@ movhi
 3568 0012 1346     		mov	r3, r2	@ movhi
 3569 0014 BB80     		strh	r3, [r7, #4]	@ movhi
2260:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t nbytes = (wNBytes + 1) >> 1;/* /2*/
 3570              		.loc 1 2260 0
 3571 0016 BB88     		ldrh	r3, [r7, #4]
 3572 0018 0133     		adds	r3, r3, #1
 3573 001a 5B10     		asrs	r3, r3, #1
 3574 001c 7B61     		str	r3, [r7, #20]
2261:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t index = 0;
 3575              		.loc 1 2261 0
 3576 001e 0023     		movs	r3, #0
 3577 0020 FB61     		str	r3, [r7, #28]
2262:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   uint32_t *pdwVal = NULL;
 3578              		.loc 1 2262 0
 3579 0022 0023     		movs	r3, #0
 3580 0024 BB61     		str	r3, [r7, #24]
2263:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   
2264:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   pdwVal = (uint32_t *)(wPMABufAddr * 2 + (uint32_t)USBx + 0x400);
 3581              		.loc 1 2264 0
 3582 0026 FB88     		ldrh	r3, [r7, #6]
 3583 0028 5B00     		lsls	r3, r3, #1
 3584 002a 1A46     		mov	r2, r3
 3585 002c FB68     		ldr	r3, [r7, #12]
 3586 002e 1344     		add	r3, r3, r2
 3587 0030 03F58063 		add	r3, r3, #1024
 3588 0034 BB61     		str	r3, [r7, #24]
2265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 3589              		.loc 1 2265 0
 3590 0036 7B69     		ldr	r3, [r7, #20]
 3591 0038 FB61     		str	r3, [r7, #28]
 3592 003a 0EE0     		b	.L156
 3593              	.L157:
2266:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   {
2267:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     *(uint16_t*)pbUsrBuf++ = *pdwVal++;
 3594              		.loc 1 2267 0 discriminator 3
 3595 003c BB69     		ldr	r3, [r7, #24]
 3596 003e 1A1D     		adds	r2, r3, #4
 3597 0040 BA61     		str	r2, [r7, #24]
 3598 0042 1968     		ldr	r1, [r3]
 3599 0044 BB68     		ldr	r3, [r7, #8]
 3600 0046 5A1C     		adds	r2, r3, #1
 3601 0048 BA60     		str	r2, [r7, #8]
 3602 004a 8AB2     		uxth	r2, r1
ARM GAS  /tmp/ccxRhxZv.s 			page 103


 3603 004c 1A80     		strh	r2, [r3]	@ movhi
2268:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****     pbUsrBuf++;
 3604              		.loc 1 2268 0 discriminator 3
 3605 004e BB68     		ldr	r3, [r7, #8]
 3606 0050 0133     		adds	r3, r3, #1
 3607 0052 BB60     		str	r3, [r7, #8]
2265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 3608              		.loc 1 2265 0 discriminator 3
 3609 0054 FB69     		ldr	r3, [r7, #28]
 3610 0056 013B     		subs	r3, r3, #1
 3611 0058 FB61     		str	r3, [r7, #28]
 3612              	.L156:
2265:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   for (index = nbytes; index != 0; index--)
 3613              		.loc 1 2265 0 is_stmt 0 discriminator 1
 3614 005a FB69     		ldr	r3, [r7, #28]
 3615 005c 002B     		cmp	r3, #0
 3616 005e EDD1     		bne	.L157
2269:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c ****   }
2270:Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_ll_usb.c **** }
 3617              		.loc 1 2270 0 is_stmt 1
 3618 0060 00BF     		nop
 3619 0062 2437     		adds	r7, r7, #36
 3620              	.LCFI174:
 3621              		.cfi_def_cfa_offset 4
 3622 0064 BD46     		mov	sp, r7
 3623              	.LCFI175:
 3624              		.cfi_def_cfa_register 13
 3625              		@ sp needed
 3626 0066 80BC     		pop	{r7}
 3627              	.LCFI176:
 3628              		.cfi_restore 7
 3629              		.cfi_def_cfa_offset 0
 3630 0068 7047     		bx	lr
 3631              		.cfi_endproc
 3632              	.LFE94:
 3634              		.text
 3635              	.Letext0:
 3636              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 3637              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 3638              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 3639              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 3640              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 3641              		.file 7 "/usr/include/newlib/sys/lock.h"
 3642              		.file 8 "/usr/include/newlib/sys/_types.h"
 3643              		.file 9 "/usr/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h"
 3644              		.file 10 "/usr/include/newlib/sys/reent.h"
 3645              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 3646              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_ll_usb.h"
 3647              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_pcd.h"
ARM GAS  /tmp/ccxRhxZv.s 			page 104


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32f1xx_ll_usb.c
     /tmp/ccxRhxZv.s:16     .text.USB_CoreInit:0000000000000000 $t
     /tmp/ccxRhxZv.s:23     .text.USB_CoreInit:0000000000000000 USB_CoreInit
     /tmp/ccxRhxZv.s:70     .text.USB_EnableGlobalInt:0000000000000000 $t
     /tmp/ccxRhxZv.s:77     .text.USB_EnableGlobalInt:0000000000000000 USB_EnableGlobalInt
     /tmp/ccxRhxZv.s:131    .text.USB_DisableGlobalInt:0000000000000000 $t
     /tmp/ccxRhxZv.s:138    .text.USB_DisableGlobalInt:0000000000000000 USB_DisableGlobalInt
     /tmp/ccxRhxZv.s:194    .text.USB_SetCurrentMode:0000000000000000 $t
     /tmp/ccxRhxZv.s:201    .text.USB_SetCurrentMode:0000000000000000 USB_SetCurrentMode
     /tmp/ccxRhxZv.s:241    .text.USB_DevInit:0000000000000000 $t
     /tmp/ccxRhxZv.s:248    .text.USB_DevInit:0000000000000000 USB_DevInit
     /tmp/ccxRhxZv.s:314    .text.USB_FlushTxFifo:0000000000000000 $t
     /tmp/ccxRhxZv.s:321    .text.USB_FlushTxFifo:0000000000000000 USB_FlushTxFifo
     /tmp/ccxRhxZv.s:360    .text.USB_FlushRxFifo:0000000000000000 $t
     /tmp/ccxRhxZv.s:367    .text.USB_FlushRxFifo:0000000000000000 USB_FlushRxFifo
     /tmp/ccxRhxZv.s:405    .text.USB_ActivateEndpoint:0000000000000000 $t
     /tmp/ccxRhxZv.s:412    .text.USB_ActivateEndpoint:0000000000000000 USB_ActivateEndpoint
     /tmp/ccxRhxZv.s:441    .text.USB_ActivateEndpoint:0000000000000018 $d
     /tmp/ccxRhxZv.s:445    .text.USB_ActivateEndpoint:0000000000000028 $t
     /tmp/ccxRhxZv.s:804    .text.USB_ActivateEndpoint:00000000000002d4 $d
     /tmp/ccxRhxZv.s:810    .text.USB_ActivateEndpoint:00000000000002e0 $t
     /tmp/ccxRhxZv.s:1157   .text.USB_ActivateEndpoint:0000000000000574 $d
     /tmp/ccxRhxZv.s:1165   .text.USB_DeactivateEndpoint:0000000000000000 $t
     /tmp/ccxRhxZv.s:1172   .text.USB_DeactivateEndpoint:0000000000000000 USB_DeactivateEndpoint
     /tmp/ccxRhxZv.s:1451   .text.USB_DeactivateEndpoint:00000000000001f4 $d
     /tmp/ccxRhxZv.s:1456   .text.USB_DeactivateEndpoint:0000000000000200 $t
     /tmp/ccxRhxZv.s:1604   .text.USB_DeactivateEndpoint:0000000000000304 $d
     /tmp/ccxRhxZv.s:1611   .text.USB_EPStartXfer:0000000000000000 $t
     /tmp/ccxRhxZv.s:1618   .text.USB_EPStartXfer:0000000000000000 USB_EPStartXfer
     /tmp/ccxRhxZv.s:3427   .text.USB_WritePMA:0000000000000000 USB_WritePMA
     /tmp/ccxRhxZv.s:2291   .text.USB_EPStartXfer:0000000000000488 $d
     /tmp/ccxRhxZv.s:2298   .text.USB_EPStartXfer:0000000000000494 $t
     /tmp/ccxRhxZv.s:2362   .text.USB_EPStartXfer:0000000000000500 $d
     /tmp/ccxRhxZv.s:2367   .text.USB_WritePacket:0000000000000000 $t
     /tmp/ccxRhxZv.s:2374   .text.USB_WritePacket:0000000000000000 USB_WritePacket
     /tmp/ccxRhxZv.s:2419   .text.USB_ReadPacket:0000000000000000 $t
     /tmp/ccxRhxZv.s:2426   .text.USB_ReadPacket:0000000000000000 USB_ReadPacket
     /tmp/ccxRhxZv.s:2467   .text.USB_EPSetStall:0000000000000000 $t
     /tmp/ccxRhxZv.s:2474   .text.USB_EPSetStall:0000000000000000 USB_EPSetStall
     /tmp/ccxRhxZv.s:2601   .text.USB_EPSetStall:00000000000000bc $d
     /tmp/ccxRhxZv.s:2606   .text.USB_EPClearStall:0000000000000000 $t
     /tmp/ccxRhxZv.s:2613   .text.USB_EPClearStall:0000000000000000 USB_EPClearStall
     /tmp/ccxRhxZv.s:2777   .text.USB_EPClearStall:0000000000000108 $d
     /tmp/ccxRhxZv.s:2784   .text.USB_StopDevice:0000000000000000 $t
     /tmp/ccxRhxZv.s:2791   .text.USB_StopDevice:0000000000000000 USB_StopDevice
     /tmp/ccxRhxZv.s:2841   .text.USB_SetDevAddress:0000000000000000 $t
     /tmp/ccxRhxZv.s:2848   .text.USB_SetDevAddress:0000000000000000 USB_SetDevAddress
     /tmp/ccxRhxZv.s:2897   .text.USB_DevConnect:0000000000000000 $t
     /tmp/ccxRhxZv.s:2904   .text.USB_DevConnect:0000000000000000 USB_DevConnect
     /tmp/ccxRhxZv.s:2942   .text.USB_DevDisconnect:0000000000000000 $t
     /tmp/ccxRhxZv.s:2949   .text.USB_DevDisconnect:0000000000000000 USB_DevDisconnect
     /tmp/ccxRhxZv.s:2987   .text.USB_ReadInterrupts:0000000000000000 $t
     /tmp/ccxRhxZv.s:2994   .text.USB_ReadInterrupts:0000000000000000 USB_ReadInterrupts
     /tmp/ccxRhxZv.s:3040   .text.USB_ReadDevAllOutEpInterrupt:0000000000000000 $t
     /tmp/ccxRhxZv.s:3047   .text.USB_ReadDevAllOutEpInterrupt:0000000000000000 USB_ReadDevAllOutEpInterrupt
     /tmp/ccxRhxZv.s:3085   .text.USB_ReadDevAllInEpInterrupt:0000000000000000 $t
ARM GAS  /tmp/ccxRhxZv.s 			page 105


     /tmp/ccxRhxZv.s:3092   .text.USB_ReadDevAllInEpInterrupt:0000000000000000 USB_ReadDevAllInEpInterrupt
     /tmp/ccxRhxZv.s:3130   .text.USB_ReadDevOutEPInterrupt:0000000000000000 $t
     /tmp/ccxRhxZv.s:3137   .text.USB_ReadDevOutEPInterrupt:0000000000000000 USB_ReadDevOutEPInterrupt
     /tmp/ccxRhxZv.s:3177   .text.USB_ReadDevInEPInterrupt:0000000000000000 $t
     /tmp/ccxRhxZv.s:3184   .text.USB_ReadDevInEPInterrupt:0000000000000000 USB_ReadDevInEPInterrupt
     /tmp/ccxRhxZv.s:3224   .text.USB_ClearInterrupts:0000000000000000 $t
     /tmp/ccxRhxZv.s:3231   .text.USB_ClearInterrupts:0000000000000000 USB_ClearInterrupts
     /tmp/ccxRhxZv.s:3268   .text.USB_EP0_OutStart:0000000000000000 $t
     /tmp/ccxRhxZv.s:3275   .text.USB_EP0_OutStart:0000000000000000 USB_EP0_OutStart
     /tmp/ccxRhxZv.s:3314   .text.USB_ActivateRemoteWakeup:0000000000000000 $t
     /tmp/ccxRhxZv.s:3321   .text.USB_ActivateRemoteWakeup:0000000000000000 USB_ActivateRemoteWakeup
     /tmp/ccxRhxZv.s:3367   .text.USB_DeActivateRemoteWakeup:0000000000000000 $t
     /tmp/ccxRhxZv.s:3374   .text.USB_DeActivateRemoteWakeup:0000000000000000 USB_DeActivateRemoteWakeup
     /tmp/ccxRhxZv.s:3420   .text.USB_WritePMA:0000000000000000 $t
     /tmp/ccxRhxZv.s:3538   .text.USB_ReadPMA:0000000000000000 $t
     /tmp/ccxRhxZv.s:3545   .text.USB_ReadPMA:0000000000000000 USB_ReadPMA

NO UNDEFINED SYMBOLS
